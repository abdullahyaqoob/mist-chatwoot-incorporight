{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{1916:function(e,t,n){\"use strict\";n(69),n(52),n(70),n(1915),n(159),n(22),n(10),n(23),n(25),n(207),n(12);var r=n(1918),a=n.n(r),s=(n(368),/mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm);function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(e){e.children.forEach((function(e){\"image\"===e.type&&function(e){var t=e.attrGet(\"src\");if(t){var n=new URL(t).searchParams.get(\"cw_image_height\");n&&e.attrSet(\"style\",\"height: \".concat(n,\";\"))}}(e)}))},u=n(1809)({html:!1,xhtmlOut:!0,breaks:!0,langPrefix:\"language-\",linkify:!0,typographer:!0,quotes:\"\\u201c\\u201d\\u2018\\u2019\",maxNesting:20}).use((function(e){e.renderer.rules.mention=function(e,t){return'<span class=\"prosemirror-mention-node\">'.concat(e[t].content,\"</span>\")},e.inline.ruler.before(\"link\",\"mention\",(function(e,t){var n,r,a,i,o,c,u=\"\",l=e.posMax;return 91===e.src.charCodeAt(e.pos)&&(a=e.pos+1,!((r=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)&&(n=e.src.slice(a,r),(i=r+1)<l&&40===e.src.charCodeAt(i)&&(i+=1,(o=e.md.helpers.parseLinkDestination(e.src,i,e.posMax)).ok&&(u=e.md.normalizeLink(o.str),e.md.validateLink(u)?i=o.pos:u=\"\"),i+=1),!!u.match(new RegExp(s))&&(t||(e.pos=a,e.posMax=r,(c=e.push(\"mention\",\"\")).href=u,c.content=n),e.pos=i,e.posMax=l,!0)))}))})).use((function(e){e.core.ruler.after(\"inline\",\"add-image-height\",(function(e){e.tokens.forEach((function(e){\"inline\"===e.type&&c(e)}))}))})).use(a.a,{attrs:{class:\"link\",rel:\"noreferrer noopener nofollow\",target:\"_blank\"}}),l=/(^|[^@\\w])@(\\w{1,15})\\b/g,f=/(^|\\s)#(\\w+)/g,m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,e),this.message=t||\"\",this.isAPrivateNote=r,this.isATweet=n}var t,n,r;return t=e,(n=[{key:\"formatMessage\",value:function(){var e=this.message;return this.isATweet&&!this.isAPrivateNote&&(e=(e=e.replace(l,\"$1[@$2](http://twitter.com/$2)\")).replace(f,\"$1[#$2](https://twitter.com/hashtag/$2)\")),u.render(e)}},{key:\"formattedMessage\",get:function(){return this.formatMessage()}},{key:\"plainText\",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,\"text/html\").body.textContent||\"\"}}])&&o(t.prototype,n),r&&o(t,r),e}(),p=m;t.a={methods:{formatMessage:function(e,t,n){return new p(e,t,n).formattedMessage},getPlainText:function(e,t){return new p(e,t).plainText},truncateMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";return e.length<100?e:\"\".concat(e.slice(0,97),\"...\")},highlightContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\",r=this.getPlainText(e),a=t.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\");return r.replace(new RegExp(\"(\".concat(a,\")\"),\"ig\"),'<span class=\"'.concat(n,'\">$1</span>'))}}}},2824:function(e,t,n){e.exports=n.p+\"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png\"},2825:function(e,t,n){},2826:function(e,t,n){},2953:function(e,t,n){\"use strict\";n(2825)},2954:function(e,t,n){\"use strict\";n(2826)},2958:function(e,t,n){\"use strict\";n(13),n(9),n(11),n(15),n(12),n(16),n(37),n(10),n(39),n(22),n(23),n(25),n(69),n(43),n(72);var r=n(32),a=n(351),s=n(318),i=n(321),o=(n(56),n(51),n(1916)),c=n(271),u=n(93),l=n(312),f={name:\"UnreadMessage\",components:{Thumbnail:c.a},mixins:[o.a,a.a,l.a],props:{message:{type:String,default:\"\"},showSender:{type:Boolean,default:!1},sender:{type:Object,default:function(){}},campaignId:{type:Number,default:null}},computed:{companyName:function(){return\"\".concat(this.$t(\"UNREAD_VIEW.COMPANY_FROM\"),\" \").concat(this.channelConfig.websiteName)},avatarUrl:function(){var e=n(2824),t=this.useInboxAvatarForBot?this.inboxAvatarUrl:e;if(this.isSenderExist(this.sender)){var r=this.sender.avatar_url;return r}return t},agentName:function(){return this.isSenderExist(this.sender)?this.sender.available_name:this.useInboxAvatarForBot?this.channelConfig.websiteName:this.$t(\"UNREAD_VIEW.BOT\")},availabilityStatus:function(){if(this.isSenderExist(this.sender)){var e=this.sender.availability_status;return e}return null}},methods:{isSenderExist:function(e){return e&&!Object(u.d)(e)},onClickMessage:function(){this.campaignId?this.$emitter.emit(s.b,this.campaignId):this.$emitter.emit(s.d)}}},m=(n(2953),n(8)),p=Object(m.a)(f,(function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"chat-bubble-wrap\"},[t(\"button\",{staticClass:\"chat-bubble agent\",class:e.$dm(\"bg-white\",\"dark:bg-slate-50\"),on:{click:e.onClickMessage}},[e.showSender?t(\"div\",{staticClass:\"row--agent-block\"},[t(\"thumbnail\",{attrs:{src:e.avatarUrl,size:\"20px\",username:e.agentName,status:e.availabilityStatus}}),e._v(\" \"),t(\"span\",{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:e.agentName,expression:\"agentName\"}],staticClass:\"agent--name\"}),e._v(\" \"),t(\"span\",{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:e.companyName,expression:\"companyName\"}],staticClass:\"company--name\"})],1):e._e(),e._v(\" \"),t(\"div\",{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:e.formatMessage(e.message,!1),expression:\"formatMessage(message, false)\"}],staticClass:\"message-content\"})])])}),[],!1,null,\"19750f4a\",null).exports,g=n(383);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&(\"undefined\"!==typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"]);if(null==n)return;var r,a,s=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return s}(e,t)||function(e,t){if(!e)return;if(\"string\"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={name:\"Unread\",components:{FluentIcon:i.a,UnreadMessage:p},mixins:[a.a],props:{messages:{type:Array,required:!0}},computed:v(v({},Object(r.mapGetters)({unreadMessageCount:\"conversation/getUnreadMessageCount\",widgetColor:\"appConfig/getWidgetColor\"})),{},{sender:function(){return d(this.messages,1)[0].sender||{}},isBackgroundLighter:function(){return Object(g.b)(this.widgetColor)}}),methods:{openConversationView:function(){this.$emitter.emit(s.d)},closeFullView:function(){this.$emit(\"close\")},getMessageContent:function(e){var t=e.attachments,n=e.content,r=t&&t.length;return n||(r?\"\\ud83d\\udcd1\":\"\")}}},O=(n(2954),Object(m.a)(w,(function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"unread-wrap\"},[t(\"div\",{staticClass:\"close-unread-wrap\"},[t(\"button\",{staticClass:\"button small close-unread-button\",on:{click:e.closeFullView}},[t(\"span\",{staticClass:\"flex items-center\"},[t(\"fluent-icon\",{staticClass:\"mr-1\",attrs:{icon:\"dismiss\",size:\"12\"}}),e._v(\"\\n        \"+e._s(e.$t(\"UNREAD_VIEW.CLOSE_MESSAGES_BUTTON\"))+\"\\n      \")],1)])]),e._v(\" \"),t(\"div\",{staticClass:\"unread-messages\"},e._l(e.messages,(function(n,r){return t(\"unread-message\",{key:n.id,attrs:{\"message-type\":n.messageType,\"message-id\":n.id,\"show-sender\":!r,sender:n.sender,message:e.getMessageContent(n),\"campaign-id\":n.campaignId}})})),1),e._v(\" \"),t(\"div\",{staticClass:\"open-read-view-wrap\"},[e.unreadMessageCount?t(\"button\",{staticClass:\"button clear-button\",on:{click:e.openConversationView}},[t(\"span\",{staticClass:\"flex items-center\",class:{\"is-background-light\":e.isBackgroundLighter},style:{color:e.widgetColor}},[t(\"fluent-icon\",{staticClass:\"mr-2\",attrs:{size:\"16\",icon:\"arrow-right\"}}),e._v(\"\\n        \"+e._s(e.$t(\"UNREAD_VIEW.VIEW_MESSAGES_BUTTON\"))+\"\\n      \")],1)]):e._e()])])}),[],!1,null,\"38679e35\",null));t.a=O.exports},3374:function(e,t,n){\"use strict\";n.r(t);n(13),n(9),n(11),n(15),n(12),n(16);var r=n(32),a=n(93);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={name:\"UnreadMessages\",components:{UnreadMessageList:n(2958).a},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.mapGetters)({messages:\"conversation/getUnreadTextMessages\"})),methods:{closeFullView:function(){a.a.isIFrame()&&a.a.sendMessage({event:\"toggleBubble\"})}}},c=o,u=n(8),l=Object(u.a)(c,(function(){var e=this;return(0,e._self._c)(\"unread-message-list\",{attrs:{messages:e.messages},on:{close:e.closeFullView}})}),[],!1,null,null,null);t.default=l.exports},383:function(e,t,n){\"use strict\";n.d(t,\"b\",(function(){return a})),n.d(t,\"a\",(function(){return s}));n(52),n(70);var r=n(263),a=function(e){var t=e.replace(\"#\",\"\");return(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>225},s=function(e,t){for(var n=e,a=0;a<20;a+=1){if(Object(r.a)(n,t)>=3.1)break;var s=Object(r.b)(n)<.5?\"#fff\":\"#151718\";n=Object(r.c)(n,s,.05)}return Object(r.d)(n)}}}]);","name":"js/56-c969c1c73d62350284db.chunk.js","map":{"version":3,"names":["window","push","module","__webpack_exports__","__webpack_require__","markdown_it_link_attributes","markdown_it_link_attributes_default","n","USER_MENTIONS_REGEX","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","processInlineToken","blockToken","children","forEach","inlineToken","type","imgSrc","attrGet","height","URL","searchParams","get","attrSet","concat","setImageHeight","md","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","renderer","rules","mention","tokens","idx","content","inline","ruler","before","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","core","after","a","attrs","class","rel","TWITTER_USERNAME_REGEX","TWITTER_HASH_REGEX","MessageFormatter","message","isATweet","arguments","undefined","isAPrivateNote","this","protoProps","staticProps","value","updatedMessage","replace","render","formatMessage","DOMParser","parseFromString","formattedMessage","body","textContent","prototype","helpers_MessageFormatter","methods","getPlainText","plainText","truncateMessage","description","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm","exports","p","vuex","configMixin","widgetBusEvents","Index","messageFormatterMixin","Thumbnail","utils","darkModeMixin","components_UnreadMessagevue_type_script_lang_js_","name","components","mixins","String","default","showSender","Boolean","sender","campaignId","Number","computed","companyName","$t","channelConfig","websiteName","avatarUrl","BotImage","displayImage","useInboxAvatarForBot","inboxAvatarUrl","isSenderExist","avatar_url","agentName","available_name","availabilityStatus","availability_status","onClickMessage","$emitter","emit","componentNormalizer","UnreadMessage","_vm","_c","_self","staticClass","$dm","on","click","size","username","status","_v","directives","rawName","expression","_e","colorHelper","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_i","Symbol","iterator","_s","_arr","_n","_d","call","next","done","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","toString","constructor","from","test","_unsupportedIterableToArray","_nonIterableRest","len","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread","source","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","components_UnreadMessageListvue_type_script_lang_js_","FluentIcon","messages","required","unreadMessageCount","widgetColor","isBackgroundLighter","openConversationView","closeFullView","$emit","getMessageContent","attachments","hasAttachments","UnreadMessageList_component","icon","_l","index","id","messageType","style","color","r","UnreadMessagesvue_type_script_lang_js_","UnreadMessageList","isIFrame","sendMessage","event","views_UnreadMessagesvue_type_script_lang_js_","component","close","d","isWidgetColorLighter","adjustColorForContrast","color2k__WEBPACK_IMPORTED_MODULE_2__","colorToCheck","parseInt","substr","backgroundColor","adjustedColor","iteration","adjustmentDirection"],"sources":["js/56-c969c1c73d62350284db.chunk.js"],"mappings":"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"},"input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[56],{\n\n/***/ 1916:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js\nvar es_array_slice = __webpack_require__(69);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__(52);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(70);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.constructor.js\nvar es_regexp_constructor = __webpack_require__(1915);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js\nvar es_regexp_to_string = __webpack_require__(159);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js\nvar es_array_iterator = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js\nvar es_string_iterator = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.js\nvar web_url = __webpack_require__(207);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/markdown-it-link-attributes/index.js\nvar markdown_it_link_attributes = __webpack_require__(1918);\nvar markdown_it_link_attributes_default = /*#__PURE__*/__webpack_require__.n(markdown_it_link_attributes);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match.js\nvar es_string_match = __webpack_require__(368);\n\n// CONCATENATED MODULE: ./app/javascript/shared/helpers/markdownIt/link.js\n// Process [@mention](mention://user/1/Pranav)\nvar USER_MENTIONS_REGEX=/mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;var buildMentionTokens=function buildMentionTokens(){return function(state,silent){var label;var labelEnd;var labelStart;var pos;var res;var token;var href='';var max=state.posMax;if(state.src.charCodeAt(state.pos)!==0x5b/* [ */){return false;}labelStart=state.pos+1;labelEnd=state.md.helpers.parseLinkLabel(state,state.pos,true);// parser failed to find ']', so it's not a valid link\nif(labelEnd<0){return false;}label=state.src.slice(labelStart,labelEnd);pos=labelEnd+1;if(pos<max&&state.src.charCodeAt(pos)===0x28/* ( */){pos+=1;res=state.md.helpers.parseLinkDestination(state.src,pos,state.posMax);if(res.ok){href=state.md.normalizeLink(res.str);if(state.md.validateLink(href)){pos=res.pos;}else{href='';}}pos+=1;}if(!href.match(new RegExp(USER_MENTIONS_REGEX))){return false;}if(!silent){state.pos=labelStart;state.posMax=labelEnd;token=state.push('mention','');token.href=href;token.content=label;}state.pos=pos;state.posMax=max;return true;};};var renderMentions=function renderMentions(){return function(tokens,idx){return\"<span class=\\\"prosemirror-mention-node\\\">\".concat(tokens[idx].content,\"</span>\");};};function mentionPlugin(md){md.renderer.rules.mention=renderMentions(md);md.inline.ruler.before('link','mention',buildMentionTokens(md));}\n// CONCATENATED MODULE: ./app/javascript/shared/helpers/MessageFormatter.js\nfunction _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}var setImageHeight=function setImageHeight(inlineToken){var imgSrc=inlineToken.attrGet('src');if(!imgSrc)return;var url=new URL(imgSrc);var height=url.searchParams.get('cw_image_height');if(!height)return;inlineToken.attrSet('style',\"height: \".concat(height,\";\"));};var processInlineToken=function processInlineToken(blockToken){blockToken.children.forEach(function(inlineToken){if(inlineToken.type==='image'){setImageHeight(inlineToken);}});};var imgResizeManager=function imgResizeManager(md){// Custom rule for image resize in markdown\n// If the image url has a query param cw_image_height, then add a style attribute to the image\nmd.core.ruler.after('inline','add-image-height',function(state){state.tokens.forEach(function(blockToken){if(blockToken.type==='inline'){processInlineToken(blockToken);}});});};var md=__webpack_require__(1809)({html:false,xhtmlOut:true,breaks:true,langPrefix:'language-',linkify:true,typographer:true,quotes:\"\\u201C\\u201D\\u2018\\u2019\",maxNesting:20}).use(mentionPlugin).use(imgResizeManager).use(markdown_it_link_attributes_default.a,{attrs:{class:'link',rel:'noreferrer noopener nofollow',target:'_blank'}});var TWITTER_USERNAME_REGEX=/(^|[^@\\w])@(\\w{1,15})\\b/g;var TWITTER_USERNAME_REPLACEMENT='$1[@$2](http://twitter.com/$2)';var TWITTER_HASH_REGEX=/(^|\\s)#(\\w+)/g;var TWITTER_HASH_REPLACEMENT='$1[#$2](https://twitter.com/hashtag/$2)';var MessageFormatter=/*#__PURE__*/function(){function MessageFormatter(message){var isATweet=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var isAPrivateNote=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,MessageFormatter);this.message=message||'';this.isAPrivateNote=isAPrivateNote;this.isATweet=isATweet;}_createClass(MessageFormatter,[{key:\"formatMessage\",value:function formatMessage(){var updatedMessage=this.message;if(this.isATweet&&!this.isAPrivateNote){updatedMessage=updatedMessage.replace(TWITTER_USERNAME_REGEX,TWITTER_USERNAME_REPLACEMENT);updatedMessage=updatedMessage.replace(TWITTER_HASH_REGEX,TWITTER_HASH_REPLACEMENT);}return md.render(updatedMessage);}},{key:\"formattedMessage\",get:function get(){return this.formatMessage();}},{key:\"plainText\",get:function get(){var strippedOutHtml=new DOMParser().parseFromString(this.formattedMessage,'text/html');return strippedOutHtml.body.textContent||'';}}]);return MessageFormatter;}();/* harmony default export */ var helpers_MessageFormatter = (MessageFormatter);\n// CONCATENATED MODULE: ./app/javascript/shared/mixins/messageFormatterMixin.js\n/* harmony default export */ var messageFormatterMixin = __webpack_exports__[\"a\"] = ({methods:{formatMessage:function formatMessage(message,isATweet,isAPrivateNote){var messageFormatter=new helpers_MessageFormatter(message,isATweet,isAPrivateNote);return messageFormatter.formattedMessage;},getPlainText:function getPlainText(message,isATweet){var messageFormatter=new helpers_MessageFormatter(message,isATweet);return messageFormatter.plainText;},truncateMessage:function truncateMessage(){var description=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';if(description.length<100){return description;}return\"\".concat(description.slice(0,97),\"...\");},highlightContent:function highlightContent(){var content=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var searchTerm=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var highlightClass=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';var plainTextContent=this.getPlainText(content);// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\nvar escapedSearchTerm=searchTerm.replace(/[.*+?^${}()|[\\]\\\\]/g,'\\\\$&');return plainTextContent.replace(new RegExp(\"(\".concat(escapedSearchTerm,\")\"),'ig'),\"<span class=\\\"\".concat(highlightClass,\"\\\">$1</span>\"));}}});\n\n/***/ }),\n\n/***/ 2824:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png\";\n\n/***/ }),\n\n/***/ 2825:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 2826:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 2953:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_ref_3_2_node_modules_sass_loader_dist_cjs_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_UnreadMessage_vue_vue_type_style_index_0_id_19750f4a_prod_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2825);\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_ref_3_2_node_modules_sass_loader_dist_cjs_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_UnreadMessage_vue_vue_type_style_index_0_id_19750f4a_prod_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_ref_3_2_node_modules_sass_loader_dist_cjs_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_UnreadMessage_vue_vue_type_style_index_0_id_19750f4a_prod_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n/***/ }),\n\n/***/ 2954:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_ref_3_2_node_modules_sass_loader_dist_cjs_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_UnreadMessageList_vue_vue_type_style_index_0_id_38679e35_prod_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2826);\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_ref_3_2_node_modules_sass_loader_dist_cjs_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_UnreadMessageList_vue_vue_type_style_index_0_id_38679e35_prod_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_ref_3_2_node_modules_sass_loader_dist_cjs_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_UnreadMessageList_vue_vue_type_style_index_0_id_38679e35_prod_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n/***/ }),\n\n/***/ 2958:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/widget/components/UnreadMessageList.vue?vue&type=template&id=38679e35&scoped=true&\nvar render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"unread-wrap\"},[_c('div',{staticClass:\"close-unread-wrap\"},[_c('button',{staticClass:\"button small close-unread-button\",on:{\"click\":_vm.closeFullView}},[_c('span',{staticClass:\"flex items-center\"},[_c('fluent-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"dismiss\",\"size\":\"12\"}}),_vm._v(\"\\n        \"+_vm._s(_vm.$t('UNREAD_VIEW.CLOSE_MESSAGES_BUTTON'))+\"\\n      \")],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"unread-messages\"},_vm._l((_vm.messages),function(message,index){return _c('unread-message',{key:message.id,attrs:{\"message-type\":message.messageType,\"message-id\":message.id,\"show-sender\":!index,\"sender\":message.sender,\"message\":_vm.getMessageContent(message),\"campaign-id\":message.campaignId}})}),1),_vm._v(\" \"),_c('div',{staticClass:\"open-read-view-wrap\"},[(_vm.unreadMessageCount)?_c('button',{staticClass:\"button clear-button\",on:{\"click\":_vm.openConversationView}},[_c('span',{staticClass:\"flex items-center\",class:{\n          'is-background-light': _vm.isBackgroundLighter,\n        },style:({\n          color: _vm.widgetColor,\n        })},[_c('fluent-icon',{staticClass:\"mr-2\",attrs:{\"size\":\"16\",\"icon\":\"arrow-right\"}}),_vm._v(\"\\n        \"+_vm._s(_vm.$t('UNREAD_VIEW.VIEW_MESSAGES_BUTTON'))+\"\\n      \")],1)]):_vm._e()])])\n}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/widget/components/UnreadMessageList.vue?vue&type=template&id=38679e35&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js\nvar es_object_keys = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.js\nvar es_symbol = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js\nvar es_array_filter = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptor.js\nvar es_object_get_own_property_descriptor = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptors.js\nvar es_object_get_own_property_descriptors = __webpack_require__(16);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.description.js\nvar es_symbol_description = __webpack_require__(37);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.iterator.js\nvar es_symbol_iterator = __webpack_require__(39);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js\nvar es_array_iterator = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js\nvar es_string_iterator = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js\nvar es_array_slice = __webpack_require__(69);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js\nvar es_function_name = __webpack_require__(43);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.from.js\nvar es_array_from = __webpack_require__(72);\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.js\nvar vuex = __webpack_require__(32);\n\n// EXTERNAL MODULE: ./app/javascript/widget/mixins/configMixin.js\nvar configMixin = __webpack_require__(351);\n\n// EXTERNAL MODULE: ./app/javascript/widget/constants/widgetBusEvents.js\nvar widgetBusEvents = __webpack_require__(318);\n\n// EXTERNAL MODULE: ./app/javascript/shared/components/FluentIcon/Index.vue + 4 modules\nvar Index = __webpack_require__(321);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/widget/components/UnreadMessage.vue?vue&type=template&id=19750f4a&scoped=true&\nvar UnreadMessagevue_type_template_id_19750f4a_scoped_true_render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-bubble-wrap\"},[_c('button',{staticClass:\"chat-bubble agent\",class:_vm.$dm('bg-white', 'dark:bg-slate-50'),on:{\"click\":_vm.onClickMessage}},[(_vm.showSender)?_c('div',{staticClass:\"row--agent-block\"},[_c('thumbnail',{attrs:{\"src\":_vm.avatarUrl,\"size\":\"20px\",\"username\":_vm.agentName,\"status\":_vm.availabilityStatus}}),_vm._v(\" \"),_c('span',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.agentName),expression:\"agentName\"}],staticClass:\"agent--name\"}),_vm._v(\" \"),_c('span',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.companyName),expression:\"companyName\"}],staticClass:\"company--name\"})],1):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.formatMessage(_vm.message, false)),expression:\"formatMessage(message, false)\"}],staticClass:\"message-content\"})])])\n}\nvar UnreadMessagevue_type_template_id_19750f4a_scoped_true_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/widget/components/UnreadMessage.vue?vue&type=template&id=19750f4a&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.number.constructor.js\nvar es_number_constructor = __webpack_require__(56);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js\nvar es_array_concat = __webpack_require__(51);\n\n// EXTERNAL MODULE: ./app/javascript/shared/mixins/messageFormatterMixin.js + 2 modules\nvar messageFormatterMixin = __webpack_require__(1916);\n\n// EXTERNAL MODULE: ./app/javascript/dashboard/components/widgets/Thumbnail.vue + 4 modules\nvar Thumbnail = __webpack_require__(271);\n\n// EXTERNAL MODULE: ./app/javascript/widget/helpers/utils.js\nvar utils = __webpack_require__(93);\n\n// EXTERNAL MODULE: ./app/javascript/widget/mixins/darkModeMixin.js\nvar darkModeMixin = __webpack_require__(312);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/widget/components/UnreadMessage.vue?vue&type=script&lang=js&\n/* harmony default export */ var UnreadMessagevue_type_script_lang_js_ = ({name:'UnreadMessage',components:{Thumbnail:Thumbnail[\"a\" /* default */]},mixins:[messageFormatterMixin[\"a\" /* default */],configMixin[\"a\" /* default */],darkModeMixin[\"a\" /* default */]],props:{message:{type:String,default:''},showSender:{type:Boolean,default:false},sender:{type:Object,default:function _default(){}},campaignId:{type:Number,default:null}},computed:{companyName:function companyName(){return\"\".concat(this.$t('UNREAD_VIEW.COMPANY_FROM'),\" \").concat(this.channelConfig.websiteName);},avatarUrl:function avatarUrl(){// eslint-disable-next-line\nvar BotImage=__webpack_require__(2824);var displayImage=this.useInboxAvatarForBot?this.inboxAvatarUrl:BotImage;if(this.isSenderExist(this.sender)){var avatarUrl=this.sender.avatar_url;return avatarUrl;}return displayImage;},agentName:function agentName(){if(this.isSenderExist(this.sender)){var availableName=this.sender.available_name;return availableName;}if(this.useInboxAvatarForBot){return this.channelConfig.websiteName;}return this.$t('UNREAD_VIEW.BOT');},availabilityStatus:function availabilityStatus(){if(this.isSenderExist(this.sender)){var availabilityStatus=this.sender.availability_status;return availabilityStatus;}return null;}},methods:{isSenderExist:function isSenderExist(sender){return sender&&!Object(utils[\"d\" /* isEmptyObject */])(sender);},onClickMessage:function onClickMessage(){if(this.campaignId){this.$emitter.emit(widgetBusEvents[\"b\" /* ON_CAMPAIGN_MESSAGE_CLICK */],this.campaignId);}else{this.$emitter.emit(widgetBusEvents[\"d\" /* ON_UNREAD_MESSAGE_CLICK */]);}}}});\n// CONCATENATED MODULE: ./app/javascript/widget/components/UnreadMessage.vue?vue&type=script&lang=js&\n /* harmony default export */ var components_UnreadMessagevue_type_script_lang_js_ = (UnreadMessagevue_type_script_lang_js_); \n// EXTERNAL MODULE: ./app/javascript/widget/components/UnreadMessage.vue?vue&type=style&index=0&id=19750f4a&prod&lang=scss&scoped=true&\nvar UnreadMessagevue_type_style_index_0_id_19750f4a_prod_lang_scss_scoped_true_ = __webpack_require__(2953);\n\n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./app/javascript/widget/components/UnreadMessage.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  components_UnreadMessagevue_type_script_lang_js_,\n  UnreadMessagevue_type_template_id_19750f4a_scoped_true_render,\n  UnreadMessagevue_type_template_id_19750f4a_scoped_true_staticRenderFns,\n  false,\n  null,\n  \"19750f4a\",\n  null\n  \n)\n\n/* harmony default export */ var UnreadMessage = (component.exports);\n// EXTERNAL MODULE: ./app/javascript/shared/helpers/colorHelper.js\nvar colorHelper = __webpack_require__(383);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/widget/components/UnreadMessageList.vue?vue&type=script&lang=js&\nfunction _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _iterableToArrayLimit(arr,i){var _i=arr&&(typeof Symbol!==\"undefined\"&&arr[Symbol.iterator]||arr[\"@@iterator\"]);if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"]!=null)_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}/* harmony default export */ var UnreadMessageListvue_type_script_lang_js_ = ({name:'Unread',components:{FluentIcon:Index[\"a\" /* default */],UnreadMessage:UnreadMessage},mixins:[configMixin[\"a\" /* default */]],props:{messages:{type:Array,required:true}},computed:_objectSpread(_objectSpread({},Object(vuex[\"mapGetters\"])({unreadMessageCount:'conversation/getUnreadMessageCount',widgetColor:'appConfig/getWidgetColor'})),{},{sender:function sender(){var _this$messages=_slicedToArray(this.messages,1),firstMessage=_this$messages[0];return firstMessage.sender||{};},isBackgroundLighter:function isBackgroundLighter(){return Object(colorHelper[\"b\" /* isWidgetColorLighter */])(this.widgetColor);}}),methods:{openConversationView:function openConversationView(){this.$emitter.emit(widgetBusEvents[\"d\" /* ON_UNREAD_MESSAGE_CLICK */]);},closeFullView:function closeFullView(){this.$emit('close');},getMessageContent:function getMessageContent(message){var attachments=message.attachments,content=message.content;var hasAttachments=attachments&&attachments.length;if(content)return content;if(hasAttachments)return\"\\uD83D\\uDCD1\";return'';}}});\n// CONCATENATED MODULE: ./app/javascript/widget/components/UnreadMessageList.vue?vue&type=script&lang=js&\n /* harmony default export */ var components_UnreadMessageListvue_type_script_lang_js_ = (UnreadMessageListvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./app/javascript/widget/components/UnreadMessageList.vue?vue&type=style&index=0&id=38679e35&prod&lang=scss&scoped=true&\nvar UnreadMessageListvue_type_style_index_0_id_38679e35_prod_lang_scss_scoped_true_ = __webpack_require__(2954);\n\n// CONCATENATED MODULE: ./app/javascript/widget/components/UnreadMessageList.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar UnreadMessageList_component = Object(componentNormalizer[\"a\" /* default */])(\n  components_UnreadMessageListvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38679e35\",\n  null\n  \n)\n\n/* harmony default export */ var UnreadMessageList = __webpack_exports__[\"a\"] = (UnreadMessageList_component.exports);\n\n/***/ }),\n\n/***/ 3374:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/widget/views/UnreadMessages.vue?vue&type=template&id=1c439afd&\nvar render = function render(){var _vm=this,_c=_vm._self._c;return _c('unread-message-list',{attrs:{\"messages\":_vm.messages},on:{\"close\":_vm.closeFullView}})\n}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/widget/views/UnreadMessages.vue?vue&type=template&id=1c439afd&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js\nvar es_object_keys = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.js\nvar es_symbol = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js\nvar es_array_filter = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptor.js\nvar es_object_get_own_property_descriptor = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptors.js\nvar es_object_get_own_property_descriptors = __webpack_require__(16);\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.js\nvar vuex = __webpack_require__(32);\n\n// EXTERNAL MODULE: ./app/javascript/widget/helpers/utils.js\nvar utils = __webpack_require__(93);\n\n// EXTERNAL MODULE: ./app/javascript/widget/components/UnreadMessageList.vue + 9 modules\nvar UnreadMessageList = __webpack_require__(2958);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/widget/views/UnreadMessages.vue?vue&type=script&lang=js&\nfunction ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}/* harmony default export */ var UnreadMessagesvue_type_script_lang_js_ = ({name:'UnreadMessages',components:{UnreadMessageList:UnreadMessageList[\"a\" /* default */]},computed:_objectSpread({},Object(vuex[\"mapGetters\"])({messages:'conversation/getUnreadTextMessages'})),methods:{closeFullView:function closeFullView(){if(utils[\"a\" /* IFrameHelper */].isIFrame()){utils[\"a\" /* IFrameHelper */].sendMessage({event:'toggleBubble'});}}}});\n// CONCATENATED MODULE: ./app/javascript/widget/views/UnreadMessages.vue?vue&type=script&lang=js&\n /* harmony default export */ var views_UnreadMessagesvue_type_script_lang_js_ = (UnreadMessagesvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./app/javascript/widget/views/UnreadMessages.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  views_UnreadMessagesvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var UnreadMessages = __webpack_exports__[\"default\"] = (component.exports);\n\n/***/ }),\n\n/***/ 383:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return isWidgetColorLighter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return adjustColorForContrast; });\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(70);\n/* harmony import */ var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var color2k__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(263);\nvar isWidgetColorLighter=function isWidgetColorLighter(color){var colorToCheck=color.replace('#','');var c_r=parseInt(colorToCheck.substr(0,2),16);var c_g=parseInt(colorToCheck.substr(2,2),16);var c_b=parseInt(colorToCheck.substr(4,2),16);var brightness=(c_r*299+c_g*587+c_b*114)/1000;return brightness>225;};var adjustColorForContrast=function adjustColorForContrast(color,backgroundColor){var targetRatio=3.1;var MAX_ITERATIONS=20;var adjustedColor=color;for(var iteration=0;iteration<MAX_ITERATIONS;iteration+=1){var currentRatio=Object(color2k__WEBPACK_IMPORTED_MODULE_2__[/* getContrast */ \"a\"])(adjustedColor,backgroundColor);if(currentRatio>=targetRatio){break;}var adjustmentDirection=Object(color2k__WEBPACK_IMPORTED_MODULE_2__[/* getLuminance */ \"b\"])(adjustedColor)<0.5?'#fff':'#151718';adjustedColor=Object(color2k__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"c\"])(adjustedColor,adjustmentDirection,0.05);}return Object(color2k__WEBPACK_IMPORTED_MODULE_2__[/* toHex */ \"d\"])(adjustedColor);};\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/home/chatwoot/chatwoot/app/javascript/shared/helpers/markdownIt/link.js","/home/chatwoot/chatwoot/app/javascript/shared/helpers/MessageFormatter.js","/home/chatwoot/chatwoot/app/javascript/shared/mixins/messageFormatterMixin.js","/home/chatwoot/chatwoot/node_modules/file-loader/dist/cjs.js??ref--1-0!/home/chatwoot/chatwoot/app/javascript/dashboard/assets/images/chatwoot_bot.png","/home/chatwoot/chatwoot/node_modules/mini-css-extract-plugin/dist/loader.js!/home/chatwoot/chatwoot/node_modules/css-loader/dist/cjs.js??ref--3-1!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/stylePostLoader.js!/home/chatwoot/chatwoot/node_modules/postcss-loader/dist/cjs.js??ref--3-2!/home/chatwoot/chatwoot/node_modules/sass-loader/dist/cjs.js??ref--3-3!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/UnreadMessage.vue?vue&type=style&index=0&id=19750f4a&prod&lang=scss&scoped=true&","/home/chatwoot/chatwoot/node_modules/mini-css-extract-plugin/dist/loader.js!/home/chatwoot/chatwoot/node_modules/css-loader/dist/cjs.js??ref--3-1!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/stylePostLoader.js!/home/chatwoot/chatwoot/node_modules/postcss-loader/dist/cjs.js??ref--3-2!/home/chatwoot/chatwoot/node_modules/sass-loader/dist/cjs.js??ref--3-3!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/UnreadMessageList.vue?vue&type=style&index=0&id=38679e35&prod&lang=scss&scoped=true&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/mini-css-extract-plugin/dist/loader.js!/home/chatwoot/chatwoot/node_modules/css-loader/dist/cjs.js??ref--3-1!/home/chatwoot/chatwoot/node_modules/postcss-loader/dist/cjs.js??ref--3-2!/home/chatwoot/chatwoot/node_modules/sass-loader/dist/cjs.js??ref--3-3!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/UnreadMessage.vue?vue&type=style&index=0&id=19750f4a&prod&lang=scss&scoped=true&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/mini-css-extract-plugin/dist/loader.js!/home/chatwoot/chatwoot/node_modules/css-loader/dist/cjs.js??ref--3-1!/home/chatwoot/chatwoot/node_modules/postcss-loader/dist/cjs.js??ref--3-2!/home/chatwoot/chatwoot/node_modules/sass-loader/dist/cjs.js??ref--3-3!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/UnreadMessageList.vue?vue&type=style&index=0&id=38679e35&prod&lang=scss&scoped=true&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/UnreadMessageList.vue?vue&type=template&id=38679e35&scoped=true&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/UnreadMessage.vue?vue&type=template&id=19750f4a&scoped=true&","app/javascript/widget/components/UnreadMessage.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/UnreadMessage.vue?vue&type=script&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/UnreadMessage.vue","app/javascript/widget/components/UnreadMessageList.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/UnreadMessageList.vue?vue&type=script&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/UnreadMessageList.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/views/UnreadMessages.vue?vue&type=template&id=1c439afd&","app/javascript/widget/views/UnreadMessages.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/views/UnreadMessages.vue?vue&type=script&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/views/UnreadMessages.vue","/home/chatwoot/chatwoot/app/javascript/shared/helpers/colorHelper.js"],"names":["USER_MENTIONS_REGEX","buildMentionTokens","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","md","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","push","content","renderMentions","tokens","idx","mentionPlugin","renderer","rules","mention","inline","ruler","before","setImageHeight","inlineToken","imgSrc","attrGet","url","URL","height","searchParams","get","attrSet","processInlineToken","blockToken","children","forEach","type","imgResizeManager","core","after","require","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","mila","attrs","class","rel","target","TWITTER_USERNAME_REGEX","TWITTER_USERNAME_REPLACEMENT","TWITTER_HASH_REGEX","TWITTER_HASH_REPLACEMENT","MessageFormatter","message","isATweet","isAPrivateNote","updatedMessage","replace","render","formatMessage","strippedOutHtml","DOMParser","parseFromString","formattedMessage","body","textContent","methods","messageFormatter","getPlainText","plainText","truncateMessage","description","length","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm","isWidgetColorLighter","color","colorToCheck","c_r","parseInt","substr","c_g","c_b","brightness","adjustColorForContrast","backgroundColor","targetRatio","MAX_ITERATIONS","adjustedColor","iteration","currentRatio","getContrast","adjustmentDirection","getLuminance","mix","toHex"],"mappings":"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","file":"x","sourcesContent":["// Process [@mention](mention://user/1/Pranav)\nconst USER_MENTIONS_REGEX = /mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;\n\nconst buildMentionTokens = () => (state, silent) => {\n  var label;\n  var labelEnd;\n  var labelStart;\n  var pos;\n  var res;\n  var token;\n  var href = '';\n  var max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5b /* [ */) {\n    return false;\n  }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n\n  label = state.src.slice(labelStart, labelEnd);\n  pos = labelEnd + 1;\n\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    pos += 1;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n    pos += 1;\n  }\n\n  if (!href.match(new RegExp(USER_MENTIONS_REGEX))) {\n    return false;\n  }\n\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token = state.push('mention', '');\n    token.href = href;\n    token.content = label;\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n\n  return true;\n};\n\nconst renderMentions = () => (tokens, idx) => {\n  return `<span class=\"prosemirror-mention-node\">${tokens[idx].content}</span>`;\n};\n\nexport default function mentionPlugin(md) {\n  md.renderer.rules.mention = renderMentions(md);\n  md.inline.ruler.before('link', 'mention', buildMentionTokens(md));\n}\n","import mila from 'markdown-it-link-attributes';\nimport mentionPlugin from './markdownIt/link';\n\nconst setImageHeight = inlineToken => {\n  const imgSrc = inlineToken.attrGet('src');\n  if (!imgSrc) return;\n  const url = new URL(imgSrc);\n  const height = url.searchParams.get('cw_image_height');\n  if (!height) return;\n  inlineToken.attrSet('style', `height: ${height};`);\n};\n\nconst processInlineToken = blockToken => {\n  blockToken.children.forEach(inlineToken => {\n    if (inlineToken.type === 'image') {\n      setImageHeight(inlineToken);\n    }\n  });\n};\n\nconst imgResizeManager = md => {\n  // Custom rule for image resize in markdown\n  // If the image url has a query param cw_image_height, then add a style attribute to the image\n  md.core.ruler.after('inline', 'add-image-height', state => {\n    state.tokens.forEach(blockToken => {\n      if (blockToken.type === 'inline') {\n        processInlineToken(blockToken);\n      }\n    });\n  });\n};\n\nconst md = require('markdown-it')({\n  html: false,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  quotes: '\\u201c\\u201d\\u2018\\u2019',\n  maxNesting: 20,\n})\n  .use(mentionPlugin)\n  .use(imgResizeManager)\n  .use(mila, {\n    attrs: {\n      class: 'link',\n      rel: 'noreferrer noopener nofollow',\n      target: '_blank',\n    },\n  });\n\nconst TWITTER_USERNAME_REGEX = /(^|[^@\\w])@(\\w{1,15})\\b/g;\nconst TWITTER_USERNAME_REPLACEMENT = '$1[@$2](http://twitter.com/$2)';\nconst TWITTER_HASH_REGEX = /(^|\\s)#(\\w+)/g;\nconst TWITTER_HASH_REPLACEMENT = '$1[#$2](https://twitter.com/hashtag/$2)';\n\nclass MessageFormatter {\n  constructor(message, isATweet = false, isAPrivateNote = false) {\n    this.message = message || '';\n    this.isAPrivateNote = isAPrivateNote;\n    this.isATweet = isATweet;\n  }\n\n  formatMessage() {\n    let updatedMessage = this.message;\n    if (this.isATweet && !this.isAPrivateNote) {\n      updatedMessage = updatedMessage.replace(\n        TWITTER_USERNAME_REGEX,\n        TWITTER_USERNAME_REPLACEMENT\n      );\n      updatedMessage = updatedMessage.replace(\n        TWITTER_HASH_REGEX,\n        TWITTER_HASH_REPLACEMENT\n      );\n    }\n    return md.render(updatedMessage);\n  }\n\n  get formattedMessage() {\n    return this.formatMessage();\n  }\n\n  get plainText() {\n    const strippedOutHtml = new DOMParser().parseFromString(\n      this.formattedMessage,\n      'text/html'\n    );\n    return strippedOutHtml.body.textContent || '';\n  }\n}\n\nexport default MessageFormatter;\n","import MessageFormatter from '../helpers/MessageFormatter';\n\nexport default {\n  methods: {\n    formatMessage(message, isATweet, isAPrivateNote) {\n      const messageFormatter = new MessageFormatter(\n        message,\n        isATweet,\n        isAPrivateNote\n      );\n      return messageFormatter.formattedMessage;\n    },\n    getPlainText(message, isATweet) {\n      const messageFormatter = new MessageFormatter(message, isATweet);\n      return messageFormatter.plainText;\n    },\n    truncateMessage(description = '') {\n      if (description.length < 100) {\n        return description;\n      }\n\n      return `${description.slice(0, 97)}...`;\n    },\n\n    highlightContent(content = '', searchTerm = '', highlightClass = '') {\n      const plainTextContent = this.getPlainText(content);\n\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n      const escapedSearchTerm = searchTerm.replace(\n        /[.*+?^${}()|[\\]\\\\]/g,\n        '\\\\$&'\n      );\n\n      return plainTextContent.replace(\n        new RegExp(`(${escapedSearchTerm})`, 'ig'),\n        `<span class=\"${highlightClass}\">$1</span>`\n      );\n    },\n  },\n};\n","module.exports = __webpack_public_path__ + \"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png\";","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessage.vue?vue&type=style&index=0&id=19750f4a&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessageList.vue?vue&type=style&index=0&id=38679e35&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"unread-wrap\"},[_c('div',{staticClass:\"close-unread-wrap\"},[_c('button',{staticClass:\"button small close-unread-button\",on:{\"click\":_vm.closeFullView}},[_c('span',{staticClass:\"flex items-center\"},[_c('fluent-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"dismiss\",\"size\":\"12\"}}),_vm._v(\"\\n        \"+_vm._s(_vm.$t('UNREAD_VIEW.CLOSE_MESSAGES_BUTTON'))+\"\\n      \")],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"unread-messages\"},_vm._l((_vm.messages),function(message,index){return _c('unread-message',{key:message.id,attrs:{\"message-type\":message.messageType,\"message-id\":message.id,\"show-sender\":!index,\"sender\":message.sender,\"message\":_vm.getMessageContent(message),\"campaign-id\":message.campaignId}})}),1),_vm._v(\" \"),_c('div',{staticClass:\"open-read-view-wrap\"},[(_vm.unreadMessageCount)?_c('button',{staticClass:\"button clear-button\",on:{\"click\":_vm.openConversationView}},[_c('span',{staticClass:\"flex items-center\",class:{\n          'is-background-light': _vm.isBackgroundLighter,\n        },style:({\n          color: _vm.widgetColor,\n        })},[_c('fluent-icon',{staticClass:\"mr-2\",attrs:{\"size\":\"16\",\"icon\":\"arrow-right\"}}),_vm._v(\"\\n        \"+_vm._s(_vm.$t('UNREAD_VIEW.VIEW_MESSAGES_BUTTON'))+\"\\n      \")],1)]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-bubble-wrap\"},[_c('button',{staticClass:\"chat-bubble agent\",class:_vm.$dm('bg-white', 'dark:bg-slate-50'),on:{\"click\":_vm.onClickMessage}},[(_vm.showSender)?_c('div',{staticClass:\"row--agent-block\"},[_c('thumbnail',{attrs:{\"src\":_vm.avatarUrl,\"size\":\"20px\",\"username\":_vm.agentName,\"status\":_vm.availabilityStatus}}),_vm._v(\" \"),_c('span',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.agentName),expression:\"agentName\"}],staticClass:\"agent--name\"}),_vm._v(\" \"),_c('span',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.companyName),expression:\"companyName\"}],staticClass:\"company--name\"})],1):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.formatMessage(_vm.message, false)),expression:\"formatMessage(message, false)\"}],staticClass:\"message-content\"})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"chat-bubble-wrap\">\n    <button\n      class=\"chat-bubble agent\"\n      :class=\"$dm('bg-white', 'dark:bg-slate-50')\"\n      @click=\"onClickMessage\"\n    >\n      <div v-if=\"showSender\" class=\"row--agent-block\">\n        <thumbnail\n          :src=\"avatarUrl\"\n          size=\"20px\"\n          :username=\"agentName\"\n          :status=\"availabilityStatus\"\n        />\n        <span v-dompurify-html=\"agentName\" class=\"agent--name\" />\n        <span v-dompurify-html=\"companyName\" class=\"company--name\" />\n      </div>\n      <div\n        v-dompurify-html=\"formatMessage(message, false)\"\n        class=\"message-content\"\n      />\n    </button>\n  </div>\n</template>\n\n<script>\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nimport Thumbnail from 'dashboard/components/widgets/Thumbnail.vue';\nimport configMixin from '../mixins/configMixin';\nimport { isEmptyObject } from 'widget/helpers/utils';\nimport {\n  ON_CAMPAIGN_MESSAGE_CLICK,\n  ON_UNREAD_MESSAGE_CLICK,\n} from '../constants/widgetBusEvents';\nimport darkModeMixin from 'widget/mixins/darkModeMixin';\nexport default {\n  name: 'UnreadMessage',\n  components: { Thumbnail },\n  mixins: [messageFormatterMixin, configMixin, darkModeMixin],\n  props: {\n    message: {\n      type: String,\n      default: '',\n    },\n    showSender: {\n      type: Boolean,\n      default: false,\n    },\n    sender: {\n      type: Object,\n      default: () => {},\n    },\n    campaignId: {\n      type: Number,\n      default: null,\n    },\n  },\n  computed: {\n    companyName() {\n      return `${this.$t('UNREAD_VIEW.COMPANY_FROM')} ${\n        this.channelConfig.websiteName\n      }`;\n    },\n    avatarUrl() {\n      // eslint-disable-next-line\n      const BotImage = require('dashboard/assets/images/chatwoot_bot.png');\n      const displayImage = this.useInboxAvatarForBot\n        ? this.inboxAvatarUrl\n        : BotImage;\n      if (this.isSenderExist(this.sender)) {\n        const { avatar_url: avatarUrl } = this.sender;\n        return avatarUrl;\n      }\n      return displayImage;\n    },\n    agentName() {\n      if (this.isSenderExist(this.sender)) {\n        const { available_name: availableName } = this.sender;\n        return availableName;\n      }\n      if (this.useInboxAvatarForBot) {\n        return this.channelConfig.websiteName;\n      }\n      return this.$t('UNREAD_VIEW.BOT');\n    },\n    availabilityStatus() {\n      if (this.isSenderExist(this.sender)) {\n        const { availability_status: availabilityStatus } = this.sender;\n        return availabilityStatus;\n      }\n      return null;\n    },\n  },\n  methods: {\n    isSenderExist(sender) {\n      return sender && !isEmptyObject(sender);\n    },\n    onClickMessage() {\n      if (this.campaignId) {\n        this.$emitter.emit(ON_CAMPAIGN_MESSAGE_CLICK, this.campaignId);\n      } else {\n        this.$emitter.emit(ON_UNREAD_MESSAGE_CLICK);\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n.chat-bubble {\n  max-width: 85%;\n  padding: $space-normal;\n  cursor: pointer;\n}\n\n.row--agent-block {\n  align-items: center;\n  display: flex;\n  text-align: left;\n  padding-bottom: $space-small;\n  font-size: $font-size-small;\n  .agent--name {\n    font-weight: $font-weight-medium;\n    margin-left: $space-smaller;\n  }\n  .company--name {\n    color: $color-light-gray;\n    margin-left: $space-smaller;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UnreadMessage.vue?vue&type=template&id=19750f4a&scoped=true&\"\nimport script from \"./UnreadMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./UnreadMessage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UnreadMessage.vue?vue&type=style&index=0&id=19750f4a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19750f4a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"unread-wrap\">\n    <div class=\"close-unread-wrap\">\n      <button class=\"button small close-unread-button\" @click=\"closeFullView\">\n        <span class=\"flex items-center\">\n          <fluent-icon class=\"mr-1\" icon=\"dismiss\" size=\"12\" />\n          {{ $t('UNREAD_VIEW.CLOSE_MESSAGES_BUTTON') }}\n        </span>\n      </button>\n    </div>\n    <div class=\"unread-messages\">\n      <unread-message\n        v-for=\"(message, index) in messages\"\n        :key=\"message.id\"\n        :message-type=\"message.messageType\"\n        :message-id=\"message.id\"\n        :show-sender=\"!index\"\n        :sender=\"message.sender\"\n        :message=\"getMessageContent(message)\"\n        :campaign-id=\"message.campaignId\"\n      />\n    </div>\n\n    <div class=\"open-read-view-wrap\">\n      <button\n        v-if=\"unreadMessageCount\"\n        class=\"button clear-button\"\n        @click=\"openConversationView\"\n      >\n        <span\n          class=\"flex items-center\"\n          :class=\"{\n            'is-background-light': isBackgroundLighter,\n          }\"\n          :style=\"{\n            color: widgetColor,\n          }\"\n        >\n          <fluent-icon class=\"mr-2\" size=\"16\" icon=\"arrow-right\" />\n          {{ $t('UNREAD_VIEW.VIEW_MESSAGES_BUTTON') }}\n        </span>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport configMixin from '../mixins/configMixin';\nimport { ON_UNREAD_MESSAGE_CLICK } from '../constants/widgetBusEvents';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport UnreadMessage from 'widget/components/UnreadMessage.vue';\nimport { isWidgetColorLighter } from 'shared/helpers/colorHelper';\n\nexport default {\n  name: 'Unread',\n  components: {\n    FluentIcon,\n    UnreadMessage,\n  },\n  mixins: [configMixin],\n  props: {\n    messages: {\n      type: Array,\n      required: true,\n    },\n  },\n  computed: {\n    ...mapGetters({\n      unreadMessageCount: 'conversation/getUnreadMessageCount',\n      widgetColor: 'appConfig/getWidgetColor',\n    }),\n    sender() {\n      const [firstMessage] = this.messages;\n      return firstMessage.sender || {};\n    },\n    isBackgroundLighter() {\n      return isWidgetColorLighter(this.widgetColor);\n    },\n  },\n  methods: {\n    openConversationView() {\n      this.$emitter.emit(ON_UNREAD_MESSAGE_CLICK);\n    },\n    closeFullView() {\n      this.$emit('close');\n    },\n    getMessageContent(message) {\n      const { attachments, content } = message;\n      const hasAttachments = attachments && attachments.length;\n\n      if (content) return content;\n\n      if (hasAttachments) return `📑`;\n\n      return '';\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables';\n\n.unread-wrap {\n  width: 100%;\n  height: auto;\n  max-height: 100vh;\n  background: transparent;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  overflow: hidden;\n\n  .unread-messages {\n    padding-bottom: $space-small;\n  }\n\n  .clear-button {\n    background: transparent;\n    color: $color-woot;\n    border: 0;\n    font-weight: $font-weight-bold;\n    font-size: $font-size-medium;\n    transition: all 0.3s var(--ease-in-cubic);\n    margin-left: $space-smaller;\n    padding: 0 $space-one 0 0;\n\n    &:hover {\n      transform: translateX($space-smaller);\n      color: $color-primary-dark;\n    }\n  }\n\n  .close-unread-button {\n    background: $color-background;\n    color: $color-light-gray;\n    border: 0;\n    font-weight: $font-weight-medium;\n    font-size: $font-size-mini;\n    transition: all 0.3s var(--ease-in-cubic);\n    margin-bottom: $space-slab;\n    border-radius: $space-normal;\n\n    &:hover {\n      color: $color-body;\n    }\n  }\n  .is-background-light {\n    color: $color-body !important;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessageList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessageList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UnreadMessageList.vue?vue&type=template&id=38679e35&scoped=true&\"\nimport script from \"./UnreadMessageList.vue?vue&type=script&lang=js&\"\nexport * from \"./UnreadMessageList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UnreadMessageList.vue?vue&type=style&index=0&id=38679e35&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38679e35\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('unread-message-list',{attrs:{\"messages\":_vm.messages},on:{\"close\":_vm.closeFullView}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <unread-message-list :messages=\"messages\" @close=\"closeFullView\" />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport { IFrameHelper } from 'widget/helpers/utils';\nimport UnreadMessageList from '../components/UnreadMessageList.vue';\n\nexport default {\n  name: 'UnreadMessages',\n  components: {\n    UnreadMessageList,\n  },\n  computed: {\n    ...mapGetters({\n      messages: 'conversation/getUnreadTextMessages',\n    }),\n  },\n  methods: {\n    closeFullView() {\n      if (IFrameHelper.isIFrame()) {\n        IFrameHelper.sendMessage({ event: 'toggleBubble' });\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessages.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UnreadMessages.vue?vue&type=template&id=1c439afd&\"\nimport script from \"./UnreadMessages.vue?vue&type=script&lang=js&\"\nexport * from \"./UnreadMessages.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { toHex, mix, getLuminance, getContrast } from 'color2k';\n\nexport const isWidgetColorLighter = color => {\n  const colorToCheck = color.replace('#', '');\n  const c_r = parseInt(colorToCheck.substr(0, 2), 16);\n  const c_g = parseInt(colorToCheck.substr(2, 2), 16);\n  const c_b = parseInt(colorToCheck.substr(4, 2), 16);\n  const brightness = (c_r * 299 + c_g * 587 + c_b * 114) / 1000;\n  return brightness > 225;\n};\n\nexport const adjustColorForContrast = (color, backgroundColor) => {\n  const targetRatio = 3.1;\n  const MAX_ITERATIONS = 20;\n  let adjustedColor = color;\n\n  for (let iteration = 0; iteration < MAX_ITERATIONS; iteration += 1) {\n    const currentRatio = getContrast(adjustedColor, backgroundColor);\n    if (currentRatio >= targetRatio) {\n      break;\n    }\n    const adjustmentDirection =\n      getLuminance(adjustedColor) < 0.5 ? '#fff' : '#151718';\n    adjustedColor = mix(adjustedColor, adjustmentDirection, 0.05);\n  }\n\n  return toHex(adjustedColor);\n};\n"]}}