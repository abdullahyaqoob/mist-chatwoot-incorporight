{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{1916:function(e,t,n){\"use strict\";n(69),n(52),n(70),n(1915),n(159),n(22),n(10),n(23),n(25),n(207),n(12);var r=n(1918),a=n.n(r),s=(n(368),/mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm);function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(e){e.children.forEach((function(e){\"image\"===e.type&&function(e){var t=e.attrGet(\"src\");if(t){var n=new URL(t).searchParams.get(\"cw_image_height\");n&&e.attrSet(\"style\",\"height: \".concat(n,\";\"))}}(e)}))},u=n(1809)({html:!1,xhtmlOut:!0,breaks:!0,langPrefix:\"language-\",linkify:!0,typographer:!0,quotes:\"\\u201c\\u201d\\u2018\\u2019\",maxNesting:20}).use((function(e){e.renderer.rules.mention=function(e,t){return'<span class=\"prosemirror-mention-node\">'.concat(e[t].content,\"</span>\")},e.inline.ruler.before(\"link\",\"mention\",(function(e,t){var n,r,a,i,o,l,u=\"\",c=e.posMax;return 91===e.src.charCodeAt(e.pos)&&(a=e.pos+1,!((r=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)&&(n=e.src.slice(a,r),(i=r+1)<c&&40===e.src.charCodeAt(i)&&(i+=1,(o=e.md.helpers.parseLinkDestination(e.src,i,e.posMax)).ok&&(u=e.md.normalizeLink(o.str),e.md.validateLink(u)?i=o.pos:u=\"\"),i+=1),!!u.match(new RegExp(s))&&(t||(e.pos=a,e.posMax=r,(l=e.push(\"mention\",\"\")).href=u,l.content=n),e.pos=i,e.posMax=c,!0)))}))})).use((function(e){e.core.ruler.after(\"inline\",\"add-image-height\",(function(e){e.tokens.forEach((function(e){\"inline\"===e.type&&l(e)}))}))})).use(a.a,{attrs:{class:\"link\",rel:\"noreferrer noopener nofollow\",target:\"_blank\"}}),c=/(^|[^@\\w])@(\\w{1,15})\\b/g,h=/(^|\\s)#(\\w+)/g,d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,e),this.message=t||\"\",this.isAPrivateNote=r,this.isATweet=n}var t,n,r;return t=e,(n=[{key:\"formatMessage\",value:function(){var e=this.message;return this.isATweet&&!this.isAPrivateNote&&(e=(e=e.replace(c,\"$1[@$2](http://twitter.com/$2)\")).replace(h,\"$1[#$2](https://twitter.com/hashtag/$2)\")),u.render(e)}},{key:\"formattedMessage\",get:function(){return this.formatMessage()}},{key:\"plainText\",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,\"text/html\").body.textContent||\"\"}}])&&o(t.prototype,n),r&&o(t,r),e}(),m=d;t.a={methods:{formatMessage:function(e,t,n){return new m(e,t,n).formattedMessage},getPlainText:function(e,t){return new m(e,t).plainText},truncateMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";return e.length<100?e:\"\".concat(e.slice(0,97),\"...\")},highlightContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\",r=this.getPlainText(e),a=t.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\");return r.replace(new RegExp(\"(\".concat(a,\")\"),\"ig\"),'<span class=\"'.concat(n,'\">$1</span>'))}}}},1942:function(e,t,n){\"use strict\";n(13);var r={props:{block:{type:Boolean,default:!1},type:{type:String,default:\"blue\"},bgColor:{type:String,default:\"\"},textColor:{type:String,default:\"\"},disabled:{type:Boolean,default:!1}},computed:{buttonClassName:function(){var e=\"text-white py-3 px-4 rounded shadow-sm leading-4\";return\"clear\"===this.type&&(e=\"flex mx-auto mt-4 text-xs leading-3 w-auto text-black-600\"),\"blue\"!==this.type||Object.keys(this.buttonStyles).length||(e=\"\".concat(e,\" bg-woot-500 hover:bg-woot-700\")),this.block&&(e=\"\".concat(e,\" w-full\")),e},buttonStyles:function(){var e={};return this.bgColor&&(e.backgroundColor=this.bgColor),this.textColor&&(e.color=this.textColor),e}},methods:{onClick:function(e){this.$emit(\"click\",e)}}},a=n(8),s=Object(a.a)(r,(function(){var e=this;return(0,e._self._c)(\"button\",{class:e.buttonClassName,style:e.buttonStyles,attrs:{disabled:e.disabled},on:{click:e.onClick}},[e._t(\"default\")],2)}),[],!1,null,null,null);t.a=s.exports},2666:function(e,t,n){\"use strict\";n(1915),n(52),n(159),n(69);t.a={methods:{getRegexp:function(e){var t=e.lastIndexOf(\"/\");return new RegExp(e.slice(1,t),e.slice(t+1))}}}},3091:function(e,t,n){},3303:function(e,t,n){\"use strict\";n(3091)},3360:function(e,t,n){\"use strict\";n.r(t);n(11),n(43),n(88),n(12),n(51),n(158),n(22),n(10),n(25),n(13),n(75),n(102),n(9),n(15),n(16);var r=n(1942),a=n(190),s=n(32),i=n(281),o=n(1916),l=n(93),u=n(1785),c=n(312),h=n(351),d=n(2666);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={components:{CustomButton:r.a,Spinner:a.a},mixins:[u.a,c.a,o.a,h.a,d.a],props:{options:{type:Object,default:function(){}}},data:function(){return{locale:this.$root.$i18n.locale,hasErrorInPhoneInput:!1,message:\"\",formValues:{},labels:{emailAddress:\"EMAIL_ADDRESS\",fullName:\"FULL_NAME\",phoneNumber:\"PHONE_NUMBER\"}}},computed:p(p({},Object(s.mapGetters)({widgetColor:\"appConfig/getWidgetColor\",isCreating:\"conversation/getIsCreating\",activeCampaign:\"campaign/getActiveCampaign\",currentUser:\"contacts/getCurrentUser\"})),{},{textColor:function(){return Object(i.f)(this.widgetColor)},hasActiveCampaign:function(){return!Object(l.d)(this.activeCampaign)},shouldShowHeaderMessage:function(){return this.hasActiveCampaign||this.preChatFormEnabled},headerMessage:function(){return this.preChatFormEnabled?this.options.preChatMessage:this.hasActiveCampaign?this.$t(\"PRE_CHAT_FORM.CAMPAIGN_HEADER\"):\"\"},preChatFields:function(){return this.preChatFormEnabled?this.options.preChatFields:[]},filteredPreChatFields:function(){var e=this.currentUser.has_email,t=this.currentUser.has_phone_number,n=!!(!!this.currentUser.identifier||e||t);return this.preChatFields.filter((function(r){return(!e||\"emailAddress\"!==r.name)&&((!t||\"phoneNumber\"!==r.name)&&(!n||\"fullName\"!==r.name))}))},enabledPreChatFields:function(){var e=this;return this.filteredPreChatFields.filter((function(e){return e.enabled})).map((function(t){return p(p({},t),{},{type:\"phoneNumber\"===t.name?\"phoneInput\":e.findFieldType(t.type)})}))},conversationCustomAttributes:function(){var e=this,t={};return this.enabledPreChatFields.forEach((function(n){\"conversation_attribute\"===n.field_type&&(t=p(p({},t),{},f({},n.name,e.getValue(n))))})),t},contactCustomAttributes:function(){var e=this,t={};return this.enabledPreChatFields.forEach((function(n){\"contact_attribute\"===n.field_type&&(t=p(p({},t),{},f({},n.name,e.getValue(n))))})),t},inputStyles:function(){return\"mt-1 border rounded w-full py-2 px-3 text-slate-700 outline-none\"},isInputDarkOrLightMode:function(){return\"\".concat(this.$dm(\"bg-white\",\"dark:bg-slate-600\"),\" \").concat(this.$dm(\"text-slate-700\",\"dark:text-slate-50\"))},inputBorderColor:function(){return\"\".concat(this.$dm(\"border-black-200\",\"dark:border-black-500\"))}}),methods:{labelClass:function(e){var t=e.hasErrors;return\"text-xs font-medium \".concat(t?this.$dm(\"text-red-400\",\"dark:text-red-400\"):this.$dm(\"text-black-800\",\"dark:text-slate-50\"))},inputClass:function(e){var t=e.hasErrors,n=e.classification,r=e.type;return\"box\"===n&&\"checkbox\"===r?\"\":(\"phoneInput\"===r&&(this.hasErrorInPhoneInput=t),t?\"\".concat(this.inputStyles,\" border-red-200 hover:border-red-300 focus:border-red-300 \").concat(this.isInputDarkOrLightMode):\"\".concat(this.inputStyles,\" hover:border-black-300 focus:border-black-300 \").concat(this.isInputDarkOrLightMode,\" \").concat(this.inputBorderColor))},isContactFieldRequired:function(e){return this.preChatFields.find((function(t){return t.name===e})).required},getLabel:function(e){return e.label},getPlaceHolder:function(e){return e.placeholder},getValue:function(e){var t=e.name;return\"select\"===e.type?this.enabledPreChatFields.find((function(e){return e.name===t})).values[this.formValues[t]]:this.formValues[t]||null},getValidation:function(e){var t=e.type,n=e.name,r=e.field_type,a=e.regex_pattern,s=a?this.getRegexp(a):null,i={emailAddress:\"email\",phoneNumber:[\"startsWithPlus\",\"isValidPhoneNumber\"],url:\"url\",date:\"date\",text:null,select:null,number:null,checkbox:!1,contact_attribute:s?[[\"matches\",s]]:null,conversation_attribute:s?[[\"matches\",s]]:null},o=Object.keys(i),l=this.isContactFieldRequired(n)?[\"bail\",\"required\"]:[\"bail\",\"optional\"];if(o.includes(n)||o.includes(t)||o.includes(r)){var u=i[t]||i[n]||i[r];return u?l.concat(u):l}return[]},findFieldType:function(e){return\"link\"===e?\"url\":\"list\"===e?\"select\":e},getOptions:function(e){if(\"select\"===e.type){var t={};return e.values.forEach((function(e,n){t=p(p({},t),{},f({},n,e))})),t}return null},onSubmit:function(){var e=this.formValues,t=e.emailAddress,n=e.fullName,r=e.phoneNumber,a=e.message;this.$emit(\"submit\",{fullName:n,phoneNumber:r,emailAddress:t,message:a,activeCampaignId:this.activeCampaign.id,conversationCustomAttributes:this.conversationCustomAttributes,contactCustomAttributes:this.contactCustomAttributes})}}},g=(n(3303),n(8)),C=Object(g.a)(b,(function(){var e=this,t=e._self._c;return t(\"FormulateForm\",{staticClass:\"flex flex-col flex-1 p-6 overflow-y-auto\",on:{submit:e.onSubmit},model:{value:e.formValues,callback:function(t){e.formValues=t},expression:\"formValues\"}},[e.shouldShowHeaderMessage?t(\"div\",{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:e.formatMessage(e.headerMessage,!1),expression:\"formatMessage(headerMessage, false)\"}],staticClass:\"mb-4 text-sm leading-5 pre-chat-header-message\",class:e.$dm(\"text-black-800\",\"dark:text-slate-50\")}):e._e(),e._v(\" \"),e._l(e.enabledPreChatFields,(function(n){return t(\"FormulateInput\",{key:n.name,attrs:{name:n.name,type:n.type,label:e.getLabel(n),placeholder:e.getPlaceHolder(n),validation:e.getValidation(n),options:e.getOptions(n),\"label-class\":t=>e.labelClass(t),\"input-class\":t=>e.inputClass(t),\"validation-messages\":{startsWithPlus:e.$t(\"PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.DIAL_CODE_VALID_ERROR\"),isValidPhoneNumber:e.$t(\"PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.VALID_ERROR\"),email:e.$t(\"PRE_CHAT_FORM.FIELDS.EMAIL_ADDRESS.VALID_ERROR\"),required:e.$t(\"PRE_CHAT_FORM.REQUIRED\"),matches:n.regex_cue?n.regex_cue:e.$t(\"PRE_CHAT_FORM.REGEX_ERROR\")},\"has-error-in-phone-input\":e.hasErrorInPhoneInput}})})),e._v(\" \"),e.hasActiveCampaign?e._e():t(\"FormulateInput\",{attrs:{name:\"message\",type:\"textarea\",\"label-class\":t=>e.labelClass(t),\"input-class\":t=>e.inputClass(t),label:e.$t(\"PRE_CHAT_FORM.FIELDS.MESSAGE.LABEL\"),placeholder:e.$t(\"PRE_CHAT_FORM.FIELDS.MESSAGE.PLACEHOLDER\"),validation:\"required\",\"validation-messages\":{required:e.$t(\"PRE_CHAT_FORM.FIELDS.MESSAGE.ERROR\")}}}),e._v(\" \"),t(\"custom-button\",{staticClass:\"mt-2 mb-5 font-medium\",attrs:{block:\"\",\"bg-color\":e.widgetColor,\"text-color\":e.textColor,disabled:e.isCreating}},[e.isCreating?t(\"spinner\",{staticClass:\"p-0\"}):e._e(),e._v(\"\\n    \"+e._s(e.$t(\"START_CONVERSATION\"))+\"\\n  \")],1)],2)}),[],!1,null,\"be741956\",null).exports,v=n(318),E={components:{PreChatForm:C},mixins:[h.a,u.a],mounted:function(){var e=this;this.$emitter.on(v.c,(function(){e.replaceRoute(\"messages\")}))},methods:{onSubmit:function(e){var t=e.fullName,n=e.emailAddress,r=e.message,a=e.activeCampaignId,s=e.phoneNumber,i=e.contactCustomAttributes,o=e.conversationCustomAttributes;a?(this.$emitter.emit(\"execute-campaign\",{campaignId:a,customAttributes:o}),this.$store.dispatch(\"contacts/update\",{user:{email:n,name:t,phone_number:s}})):this.$store.dispatch(\"conversation/createConversation\",{fullName:t,emailAddress:n,message:r,phoneNumber:s,customAttributes:o}),Object(l.d)(i)||this.$store.dispatch(\"contacts/setCustomAttributes\",i)}}},x=Object(g.a)(E,(function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"flex flex-1 overflow-auto\"},[t(\"pre-chat-form\",{attrs:{options:e.preChatFormOptions},on:{submit:e.onSubmit}})],1)}),[],!1,null,null,null);t.default=x.exports}}]);","name":"js/71-fed7d436b39cc438aac2.chunk.js","map":{"version":3,"names":["window","push","module","__webpack_exports__","__webpack_require__","markdown_it_link_attributes","markdown_it_link_attributes_default","n","USER_MENTIONS_REGEX","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","processInlineToken","blockToken","children","forEach","inlineToken","type","imgSrc","attrGet","height","URL","searchParams","get","attrSet","concat","setImageHeight","md","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","renderer","rules","mention","tokens","idx","content","inline","ruler","before","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","core","after","a","attrs","class","rel","TWITTER_USERNAME_REGEX","TWITTER_HASH_REGEX","MessageFormatter","message","isATweet","arguments","undefined","isAPrivateNote","this","protoProps","staticProps","value","updatedMessage","replace","render","formatMessage","DOMParser","parseFromString","formattedMessage","body","textContent","prototype","helpers_MessageFormatter","methods","getPlainText","plainText","truncateMessage","description","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm","components_Buttonvue_type_script_lang_js_","block","Boolean","default","String","bgColor","textColor","disabled","computed","buttonClassName","className","keys","buttonStyles","styles","backgroundColor","color","onClick","e","$emit","componentNormalizer","component","_vm","_c","_self","style","on","click","_t","getRegexp","regexPatternValue","lastSlash","lastIndexOf","exports","r","Button","Spinner","vuex","utils_esm","messageFormatterMixin","utils","routerMixin","darkModeMixin","configMixin","customAttributeMixin","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread","source","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","PreChat_Formvue_type_script_lang_js_","components","CustomButton","mixins","options","data","locale","$root","$i18n","hasErrorInPhoneInput","formValues","labels","emailAddress","fullName","phoneNumber","widgetColor","isCreating","activeCampaign","currentUser","hasActiveCampaign","shouldShowHeaderMessage","preChatFormEnabled","headerMessage","preChatMessage","$t","preChatFields","filteredPreChatFields","isUserEmailAvailable","has_email","isUserPhoneNumberAvailable","has_phone_number","isUserNameAvailable","identifier","field","name","enabledPreChatFields","_this","enabled","map","findFieldType","conversationCustomAttributes","_this2","conversationAttributes","field_type","getValue","contactCustomAttributes","_this3","contactAttributes","inputStyles","isInputDarkOrLightMode","$dm","inputBorderColor","labelClass","context","hasErrors","inputClass","classification","isContactFieldRequired","find","option","required","getLabel","_ref","getPlaceHolder","_ref2","placeholder","_ref3","values","getValidation","_ref4","regex_pattern","regex","validations","url","date","text","select","number","checkbox","contact_attribute","conversation_attribute","validationKeys","validation","includes","validationType","getOptions","item","index","onSubmit","_this$formValues","activeCampaignId","id","Form","staticClass","submit","model","callback","$$v","expression","directives","rawName","_e","_v","_l","startsWithPlus","isValidPhoneNumber","email","matches","regex_cue","_s","widgetBusEvents","views_PreChatFormvue_type_script_lang_js_","PreChatForm","mounted","$emitter","replaceRoute","emit","campaignId","customAttributes","$store","dispatch","user","phone_number","PreChatForm_component","preChatFormOptions"],"sources":["js/71-fed7d436b39cc438aac2.chunk.js"],"mappings":"CAACA,OAAqB,aAAIA,OAAqB,cAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAE7D,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,aAGqBA,EAAoB,IAGpBA,EAAoB,IAGjBA,EAAoB,IAGhBA,EAAoB,MAGtBA,EAAoB,KAGtBA,EAAoB,IAGlBA,EAAoB,IAGrBA,EAAoB,IAGVA,EAAoB,IAGzCA,EAAoB,KAGCA,EAAoB,IA9BvD,IAiCIC,EAA8BD,EAAoB,MAClDE,EAAmDF,EAAoBG,EAAEF,GAOzEG,GAJkBJ,EAAoB,KAIlB,0CAGxB,SAASK,EAAgBC,EAASC,GAAa,KAAKD,aAAoBC,GAAc,MAAM,IAAIC,UAAU,qCAAuC,SAASC,EAAkBC,EAAOC,GAAO,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAME,OAAOD,IAAI,CAAC,IAAIE,EAAWH,EAAMC,GAAGE,EAAWC,WAAWD,EAAWC,aAAY,EAAMD,EAAWE,cAAa,EAAQ,UAAUF,IAAWA,EAAWG,UAAS,GAAKC,OAAOC,eAAeT,EAAOI,EAAWM,IAAIN,IAAwN,IAA8QO,EAAmB,SAA4BC,GAAYA,EAAWC,SAASC,SAAQ,SAASC,GAAmC,UAAnBA,EAAYC,MAAvX,SAAwBD,GAAa,IAAIE,EAAOF,EAAYG,QAAQ,OAAO,GAAID,EAAJ,CAAkB,IAA4BE,EAApB,IAAIC,IAAIH,GAAuBI,aAAaC,IAAI,mBAAuBH,GAAcJ,EAAYQ,QAAQ,QAAQ,WAAWC,OAAOL,EAAO,OAAwJM,CAAeV,OAE32BW,EAAGpC,EAAoB,KAApBA,CAA0B,CAACqC,MAAK,EAAMC,UAAS,EAAKC,QAAO,EAAKC,WAAW,YAAYC,SAAQ,EAAKC,aAAY,EAAKC,OAAO,2BAA2BC,WAAW,KAAKC,KAJ4X,SAAuBT,GAAIA,EAAGU,SAASC,MAAMC,QAA9J,SAASC,EAAOC,GAAK,MAAM,0CAA4ChB,OAAOe,EAAOC,GAAKC,QAAQ,YAAuFf,EAAGgB,OAAOC,MAAMC,OAAO,OAAO,WADpsB,SAASC,EAAMC,GAAQ,IAAIC,EAAUC,EAAaC,EAAeC,EAAQC,EAAQC,EAAUC,EAAK,GAAOC,EAAIT,EAAMU,OAAO,OAAqC,KAAlCV,EAAMW,IAAIC,WAAWZ,EAAMK,OAAkCD,EAAWJ,EAAMK,IAAI,KAAEF,EAASH,EAAMnB,GAAGgC,QAAQC,eAAed,EAAMA,EAAMK,KAAI,IACzX,KAAiBH,EAAMF,EAAMW,IAAII,MAAMX,EAAWD,IAAUE,EAAIF,EAAS,GAASM,GAAiC,KAA5BT,EAAMW,IAAIC,WAAWP,KAAoBA,GAAK,GAAEC,EAAIN,EAAMnB,GAAGgC,QAAQG,qBAAqBhB,EAAMW,IAAIN,EAAIL,EAAMU,SAAeO,KAAIT,EAAKR,EAAMnB,GAAGqC,cAAcZ,EAAIa,KAAQnB,EAAMnB,GAAGuC,aAAaZ,GAAOH,EAAIC,EAAID,IAAUG,EAAK,IAAKH,GAAK,KAAOG,EAAKa,MAAM,IAAIC,OAAOzE,MAAyCoD,IAAQD,EAAMK,IAAID,EAAWJ,EAAMU,OAAOP,GAASI,EAAMP,EAAM1D,KAAK,UAAU,KAAUkE,KAAKA,EAAKD,EAAMX,QAAQM,GAAOF,EAAMK,IAAIA,EAAIL,EAAMU,OAAOD,GAAW,WAI3LnB,KAFstB,SAA0BT,GAElmCA,EAAG0C,KAAKzB,MAAM0B,MAAM,SAAS,oBAAmB,SAASxB,GAAOA,EAAMN,OAAOzB,SAAQ,SAASF,GAAiC,WAAlBA,EAAWI,MAAiBL,EAAmBC,YAA4OuB,IAAI3C,EAAoC8E,EAAE,CAACC,MAAM,CAACC,MAAM,OAAOC,IAAI,+BAA+BzE,OAAO,YAAgB0E,EAAuB,2BAAiGC,EAAmB,gBAA2FC,EAA8B,WAAW,SAASA,EAAiBC,GAAS,IAAIC,EAASC,UAAU5E,OAAO,QAAkB6E,IAAfD,UAAU,IAAeA,UAAU,GAAaE,EAAeF,UAAU5E,OAAO,QAAkB6E,IAAfD,UAAU,IAAeA,UAAU,GAASpF,EAAgBuF,KAAKN,GAAkBM,KAAKL,QAAQA,GAAS,GAAGK,KAAKD,eAAeA,EAAeC,KAAKJ,SAASA,EAFvpB,IAAsBjF,EAAYsF,EAAWC,EAEwtC,OAF/uCvF,EAEwpB+E,GAF5oBO,EAE6pB,CAAC,CAACzE,IAAI,gBAAgB2E,MAAM,WAAyB,IAAIC,EAAeJ,KAAKL,QAA+N,OAApNK,KAAKJ,WAAWI,KAAKD,iBAA2GK,GAA3FA,EAAeA,EAAeC,QAAQb,EAA3rB,mCAA8wBa,QAAQZ,EAAjrB,4CAAsuBjD,EAAG8D,OAAOF,KAAmB,CAAC5E,IAAI,mBAAmBY,IAAI,WAAe,OAAO4D,KAAKO,kBAAmB,CAAC/E,IAAI,YAAYY,IAAI,WAAsG,OAAnE,IAAIoE,WAAYC,gBAAgBT,KAAKU,iBAAiB,aAAoCC,KAAKC,aAAa,QAFrrC/F,EAAkBF,EAAYkG,UAAUZ,GAAeC,GAAYrF,EAAkBF,EAAYuF,GAEmmCR,EAAp7B,GAA0+BoB,EAA2B,EAEjtD3G,EAAuB,EAAI,CAAE4G,QAAQ,CAACR,cAAc,SAAuBZ,EAAQC,EAASG,GAAmG,OAA9D,IAAIe,EAAyBnB,EAAQC,EAASG,GAAwCW,kBAAmBM,aAAa,SAAsBrB,EAAQC,GAA8E,OAA/C,IAAIkB,EAAyBnB,EAAQC,GAAkCqB,WAAYC,gBAAgB,WAA2B,IAAIC,EAAYtB,UAAU5E,OAAO,QAAkB6E,IAAfD,UAAU,GAAeA,UAAU,GAAG,GAAG,OAAGsB,EAAYlG,OAAO,IAAYkG,EAAmB,GAAG7E,OAAO6E,EAAYzC,MAAM,EAAE,IAAI,QAAS0C,iBAAiB,WAA4B,IAAI7D,EAAQsC,UAAU5E,OAAO,QAAkB6E,IAAfD,UAAU,GAAeA,UAAU,GAAG,GAAOwB,EAAWxB,UAAU5E,OAAO,QAAkB6E,IAAfD,UAAU,GAAeA,UAAU,GAAG,GAAOyB,EAAezB,UAAU5E,OAAO,QAAkB6E,IAAfD,UAAU,GAAeA,UAAU,GAAG,GAAO0B,EAAiBvB,KAAKgB,aAAazD,GAC78BiE,EAAkBH,EAAWhB,QAAQ,sBAAsB,QAAQ,OAAOkB,EAAiBlB,QAAQ,IAAIpB,OAAO,IAAI3C,OAAOkF,EAAkB,KAAK,MAAM,gBAAiBlF,OAAOgF,EAAe,oBAI3L,KACA,SAAUpH,EAAQC,EAAqBC,GAE7C,aAWqBA,EAAoB,IARzC,IAakCqH,EAFgC,CAAE1G,MAAM,CAAC2G,MAAM,CAAC5F,KAAK6F,QAAQC,SAAQ,GAAO9F,KAAK,CAACA,KAAK+F,OAAOD,QAAQ,QAAQE,QAAQ,CAAChG,KAAK+F,OAAOD,QAAQ,IAAIG,UAAU,CAACjG,KAAK+F,OAAOD,QAAQ,IAAII,SAAS,CAAClG,KAAK6F,QAAQC,SAAQ,IAAQK,SAAS,CAACC,gBAAgB,WAA2B,IAAIC,EAAU,mDAA2U,MAAzQ,UAAZnC,KAAKlE,OAAgBqG,EAAU,6DAA4E,SAAZnC,KAAKlE,MAAgBR,OAAO8G,KAAKpC,KAAKqC,cAAcpH,SAAQkH,EAAU,GAAG7F,OAAO6F,EAAU,mCAAsCnC,KAAK0B,QAAOS,EAAU,GAAG7F,OAAO6F,EAAU,YAAmBA,GAAYE,aAAa,WAAwB,IAAIC,EAAO,GAAyG,OAAnGtC,KAAK8B,UAASQ,EAAOC,gBAAgBvC,KAAK8B,SAAY9B,KAAK+B,YAAWO,EAAOE,MAAMxC,KAAK+B,WAAkBO,IAAUvB,QAAQ,CAAC0B,QAAQ,SAAiBC,GAAG1C,KAAK2C,MAAM,QAAQD,MAI13BE,EAAsBxI,EAAoB,GAU1CyI,EAAYvH,OAAOsH,EAAqC,EAA5CtH,CACdmG,GA1BW,WAAkB,IAAIqB,EAAI9C,KAAqB,OAAO+C,EAApBD,EAAIE,MAAMD,IAAa,SAAS,CAACzD,MAAMwD,EAAIZ,gBAAgBe,MAAOH,EAAgB,aAAEzD,MAAM,CAAC2C,SAAWc,EAAId,UAAUkB,GAAG,CAACC,MAAQL,EAAIL,UAAU,CAACK,EAAIM,GAAG,YAAY,KAE3L,IA2BpB,EACA,KACA,KACA,MAIwCjJ,EAAuB,EAAK0I,EAAiB,SAIjF,KACA,SAAU3I,EAAQC,EAAqBC,GAE7C,aACiGA,EAAoB,MAE3BA,EAAoB,IAEfA,EAAoB,KAEzBA,EAAoB,IAEjFD,EAAuB,EAAI,CAAE4G,QAAQ,CAACsC,UAAU,SAAmBC,GAAmB,IAAIC,EAAUD,EAAkBE,YAAY,KAAK,OAAO,IAAIvE,OAAOqE,EAAkB5E,MAAM,EAAE6E,GAAWD,EAAkB5E,MAAM6E,EAAU,QAIvP,KACA,SAAUrJ,EAAQuJ,EAASrJ,KAM3B,KACA,SAAUF,EAAQC,EAAqBC,GAE7C,aAC6aA,EAAoB,OAO3b,KACA,SAAUF,EAAQC,EAAqBC,GAE7C,aAEAA,EAAoBsJ,EAAEvJ,GA+BAC,EAAoB,IAGnBA,EAAoB,IAGxBA,EAAoB,IAGJA,EAAoB,IAGjCA,EAAoB,IAGtBA,EAAoB,KAGhBA,EAAoB,IAGlBA,EAAoB,IAGXA,EAAoB,IAGlCA,EAAoB,IAGjBA,EAAoB,IAGnBA,EAAoB,KAG7BA,EAAoB,GAGQA,EAAoB,IAGnBA,EAAoB,IAtEjE,IAyEIuJ,EAASvJ,EAAoB,MAG7BwJ,EAAUxJ,EAAoB,KAG9ByJ,EAAOzJ,EAAoB,IAG3B0J,EAAY1J,EAAoB,KAGhC2J,EAAwB3J,EAAoB,MAG5C4J,EAAQ5J,EAAoB,IAG5B6J,EAAc7J,EAAoB,MAGlC8J,EAAgB9J,EAAoB,KAGpC+J,EAAc/J,EAAoB,KAGlCgK,EAAuBhK,EAAoB,MAG/C,SAASiK,EAAQC,EAAOC,GAAgB,IAAInC,EAAK9G,OAAO8G,KAAKkC,GAAQ,GAAGhJ,OAAOkJ,sBAAsB,CAAC,IAAIC,EAAQnJ,OAAOkJ,sBAAsBF,GAAWC,IAAeE,EAAQA,EAAQC,QAAO,SAASC,GAAK,OAAOrJ,OAAOsJ,yBAAyBN,EAAOK,GAAKxJ,eAAciH,EAAKnI,KAAK4K,MAAMzC,EAAKqC,GAAU,OAAOrC,EAAM,SAAS0C,EAAchK,GAAQ,IAAI,IAAIE,EAAE,EAAEA,EAAE6E,UAAU5E,OAAOD,IAAI,CAAC,IAAI+J,EAAqB,MAAdlF,UAAU7E,GAAS6E,UAAU7E,GAAG,GAAMA,EAAE,EAAGqJ,EAAQ/I,OAAOyJ,IAAQ,GAAMnJ,SAAQ,SAASJ,GAAKwJ,EAAgBlK,EAAOU,EAAIuJ,EAAOvJ,OAAkBF,OAAO2J,0BAA2B3J,OAAO4J,iBAAiBpK,EAAOQ,OAAO2J,0BAA0BF,IAAeV,EAAQ/I,OAAOyJ,IAASnJ,SAAQ,SAASJ,GAAKF,OAAOC,eAAeT,EAAOU,EAAIF,OAAOsJ,yBAAyBG,EAAOvJ,OAAW,OAAOV,EAAQ,SAASkK,EAAgBG,EAAI3J,EAAI2E,GAAyI,OAA/H3E,KAAO2J,EAAK7J,OAAOC,eAAe4J,EAAI3J,EAAI,CAAC2E,MAAMA,EAAMhF,YAAW,EAAKC,cAAa,EAAKC,UAAS,IAAa8J,EAAI3J,GAAK2E,EAAcgF,EAAkC,IAE78BC,EAFg/B,CAAEC,WAAW,CAACC,aAAa3B,EAAwB,EAAEC,QAAQA,EAAyB,GAAG2B,OAAO,CAACtB,EAA6B,EAAEC,EAA+B,EAAEH,EAAuC,EAAEI,EAA6B,EAAEC,EAAsC,GAAGrJ,MAAM,CAACyK,QAAQ,CAAC1J,KAAKR,OAAOsG,QAAQ,eAAwB6D,KAAK,WAAgB,MAAM,CAACC,OAAO1F,KAAK2F,MAAMC,MAAMF,OAAOG,sBAAqB,EAAMlG,QAAQ,GAAGmG,WAAW,GAAGC,OAAO,CAACC,aAAa,gBAAgBC,SAAS,YAAYC,YAAY,kBAAmBjE,SAAS6C,EAAcA,EAAc,GAAGxJ,OAAOuI,EAAiB,WAAxBvI,CAA2B,CAAC6K,YAAY,2BAA2BC,WAAW,6BAA6BC,eAAe,6BAA6BC,YAAY,6BAA6B,GAAG,CAACvE,UAAU,WAAqB,OAAOzG,OAAOwI,EAA2C,EAAlDxI,CAAqD0E,KAAKmG,cAAeI,kBAAkB,WAA6B,OAAOjL,OAAO0I,EAA6B,EAApC1I,CAAuC0E,KAAKqG,iBAAkBG,wBAAwB,WAAmC,OAAOxG,KAAKuG,mBAAmBvG,KAAKyG,oBAAqBC,cAAc,WAAyB,OAAG1G,KAAKyG,mBAA2BzG,KAAKwF,QAAQmB,eAAmB3G,KAAKuG,kBAA0BvG,KAAK4G,GAAG,iCAAwC,IAAKC,cAAc,WAAyB,OAAO7G,KAAKyG,mBAAmBzG,KAAKwF,QAAQqB,cAAc,IAAKC,sBAAsB,WAAiC,IAAIC,EAAqB/G,KAAKsG,YAAYU,UAAcC,EAA2BjH,KAAKsG,YAAYY,iBAAiFC,OAAhCnH,KAAKsG,YAAYc,YAAiEL,GAAsBE,GAA4B,OAAOjH,KAAK6G,cAAcnC,QAAO,SAAS2C,GAAO,QAAGN,GAAmC,iBAAbM,EAAMC,UAAwCL,GAAyC,gBAAbI,EAAMC,SAAuCH,GAAkC,aAAbE,EAAMC,WAAkDC,qBAAqB,WAAgC,IAAIC,EAAMxH,KAAK,OAAOA,KAAK8G,sBAAsBpC,QAAO,SAAS2C,GAAO,OAAOA,EAAMI,WAAWC,KAAI,SAASL,GAAO,OAAOvC,EAAcA,EAAc,GAAGuC,GAAO,GAAG,CAACvL,KAAkB,gBAAbuL,EAAMC,KAAqB,aAAaE,EAAMG,cAAcN,EAAMvL,YAAa8L,6BAA6B,WAAwC,IAAIC,EAAO7H,KAAS8H,EAAuB,GAAiP,OAA9O9H,KAAKuH,qBAAqB3L,SAAQ,SAASyL,GAA6B,2BAAnBA,EAAMU,aAAuCD,EAAuBhD,EAAcA,EAAc,GAAGgD,GAAwB,GAAG9C,EAAgB,GAAGqC,EAAMC,KAAKO,EAAOG,SAASX,SAAoBS,GAAyBG,wBAAwB,WAAmC,IAAIC,EAAOlI,KAASmI,EAAkB,GAAkO,OAA/NnI,KAAKuH,qBAAqB3L,SAAQ,SAASyL,GAA6B,sBAAnBA,EAAMU,aAAkCI,EAAkBrD,EAAcA,EAAc,GAAGqD,GAAmB,GAAGnD,EAAgB,GAAGqC,EAAMC,KAAKY,EAAOF,SAASX,SAAoBc,GAAoBC,YAAY,WAAuB,MAAM,oEAAqEC,uBAAuB,WAAkC,MAAM,GAAG/L,OAAO0D,KAAKsI,IAAI,WAAW,qBAAqB,KAAKhM,OAAO0D,KAAKsI,IAAI,iBAAiB,wBAAyBC,iBAAiB,WAA4B,MAAM,GAAGjM,OAAO0D,KAAKsI,IAAI,mBAAmB,6BAA8BvH,QAAQ,CAACyH,WAAW,SAAoBC,GAAS,IAAIC,EAAUD,EAAQC,UAAU,MAA2G,uBAAuBpM,OAA9HoM,EAAqI1I,KAAKsI,IAAI,eAAe,qBAA9GtI,KAAKsI,IAAI,iBAAiB,wBAA4GK,WAAW,SAAoBF,GAAS,IAAIC,EAAUD,EAAQC,UAAUE,EAAeH,EAAQG,eAAe9M,EAAK2M,EAAQ3M,KAAK,MAAoB,QAAjB8M,GAA+B,aAAP9M,EAAyB,IAAc,eAAPA,IAAqBkE,KAAK6F,qBAAqB6C,GAAeA,EAA4K,GAAGpM,OAAO0D,KAAKoI,YAAY,8DAA8D9L,OAAO0D,KAAKqI,wBAAhQ,GAAG/L,OAAO0D,KAAKoI,YAAY,mDAAmD9L,OAAO0D,KAAKqI,uBAAuB,KAAK/L,OAAO0D,KAAKuI,oBAAwJM,uBAAuB,SAAgCxB,GAAO,OAAOrH,KAAK6G,cAAciC,MAAK,SAASC,GAAQ,OAAOA,EAAOzB,OAAOD,KAAS2B,UAAWC,SAAS,SAAkBC,GAA2B,OAAXA,EAAKrL,OAAqBsL,eAAe,SAAwBC,GAAyC,OAAlBA,EAAMC,aAAiCrB,SAAS,SAAkBsB,GAAO,IAAIhC,EAAKgC,EAAMhC,KAAqB,MAAU,WAArBgC,EAAMxN,KAAgCkE,KAAKuH,qBAAqBuB,MAAK,SAASC,GAAQ,OAAOA,EAAOzB,OAAOA,KAAQiC,OAAOvJ,KAAK8F,WAAWwB,IAAetH,KAAK8F,WAAWwB,IAAO,MAAOkC,cAAc,SAAuBC,GAAO,IAAI3N,EAAK2N,EAAM3N,KAAKwL,EAAKmC,EAAMnC,KAAKS,EAAW0B,EAAM1B,WAAW2B,EAAcD,EAAMC,cAAkBC,EAAMD,EAAc1J,KAAKqD,UAAUqG,GAAe,KAASE,EAAY,CAAC5D,aAAa,QAAQE,YAAY,CAAC,iBAAiB,sBAAsB2D,IAAI,MAAMC,KAAK,OAAOC,KAAK,KAAKC,OAAO,KAAKC,OAAO,KAAKC,UAAS,EAAMC,kBAAkBR,EAAM,CAAC,CAAC,UAAUA,IAAQ,KAAKS,uBAAuBT,EAAM,CAAC,CAAC,UAAUA,IAAQ,MAAUU,EAAe/O,OAAO8G,KAAKwH,GAAkEU,EAAtCtK,KAAK6I,uBAAuBvB,GAAgC,CAAC,OAAO,YAAY,CAAC,OAAO,YAAY,GAAG+C,EAAeE,SAASjD,IAAO+C,EAAeE,SAASzO,IAAOuO,EAAeE,SAASxC,GAAY,CAAC,IAAIyC,EAAeZ,EAAY9N,IAAO8N,EAAYtC,IAAOsC,EAAY7B,GAAY,OAAOyC,EAAeF,EAAWhO,OAAOkO,GAAgBF,EAAY,MAAM,IAAK3C,cAAc,SAAuB7L,GAAM,MAAU,SAAPA,EAAqB,MAAiB,SAAPA,EAAqB,SAAiBA,GAAO2O,WAAW,SAAoBC,GAAM,GAAe,WAAZA,EAAK5O,KAAgB,CAAC,IAAIyN,EAAO,GAAkI,OAA/HmB,EAAKnB,OAAO3N,SAAQ,SAASuE,EAAMwK,GAAOpB,EAAOzE,EAAcA,EAAc,GAAGyE,GAAQ,GAAGvE,EAAgB,GAAG2F,EAAMxK,OAAkBoJ,EAAQ,OAAO,MAAOqB,SAAS,WAAoB,IAAIC,EAAiB7K,KAAK8F,WAAWE,EAAa6E,EAAiB7E,aAAaC,EAAS4E,EAAiB5E,SAASC,EAAY2E,EAAiB3E,YAAYvG,EAAQkL,EAAiBlL,QAAQK,KAAK2C,MAAM,SAAS,CAACsD,SAASA,EAASC,YAAYA,EAAYF,aAAaA,EAAarG,QAAQA,EAAQmL,iBAAiB9K,KAAKqG,eAAe0E,GAAGnD,6BAA6B5H,KAAK4H,6BAA6BK,wBAAwBjI,KAAKiI,6BAO74OrF,GAHqExI,EAAoB,MAGnEA,EAAoB,IAsBb4Q,EAXjB1P,OAAOsH,EAAqC,EAA5CtH,CACd8J,GAlHyD,WAAkB,IAAItC,EAAI9C,KAAK+C,EAAGD,EAAIE,MAAMD,GAAG,OAAOA,EAAG,gBAAgB,CAACkI,YAAY,2CAA2C/H,GAAG,CAACgI,OAASpI,EAAI8H,UAAUO,MAAM,CAAChL,MAAO2C,EAAc,WAAEsI,SAAS,SAAUC,GAAMvI,EAAIgD,WAAWuF,GAAKC,WAAW,eAAe,CAAExI,EAA2B,wBAAEC,EAAG,MAAM,CAACwI,WAAW,CAAC,CAACjE,KAAK,iBAAiBkE,QAAQ,mBAAmBrL,MAAO2C,EAAIvC,cAAcuC,EAAI4D,eAAe,GAAQ4E,WAAW,wCAAwCL,YAAY,iDAAiD3L,MAAMwD,EAAIwF,IAAI,iBAAkB,wBAAwBxF,EAAI2I,KAAK3I,EAAI4I,GAAG,KAAK5I,EAAI6I,GAAI7I,EAAwB,sBAAE,SAAS4H,GAAM,OAAO3H,EAAG,iBAAiB,CAACvH,IAAIkP,EAAKpD,KAAKjI,MAAM,CAACiI,KAAOoD,EAAKpD,KAAKxL,KAAO4O,EAAK5O,KAAK+B,MAAQiF,EAAImG,SAASyB,GAAMrB,YAAcvG,EAAIqG,eAAeuB,GAAMJ,WAAaxH,EAAI0G,cAAckB,GAAMlF,QAAU1C,EAAI2H,WAAWC,GAAM,cAAcjC,GAAW3F,EAAI0F,WAAWC,GAAS,cAAcA,GAAW3F,EAAI6F,WAAWF,GAAS,sBAAsB,CAChhCmD,eAAgB9I,EAAI8D,GAClB,2DAEFiF,mBAAoB/I,EAAI8D,GAAG,iDAC3BkF,MAAOhJ,EAAI8D,GAAG,kDACdoC,SAAUlG,EAAI8D,GAAG,0BACjBmF,QAASrB,EAAKsB,UACVtB,EAAKsB,UACLlJ,EAAI8D,GAAG,8BACX,2BAA2B9D,EAAI+C,2BAA0B/C,EAAI4I,GAAG,KAAO5I,EAAIyD,kBAExEzD,EAAI2I,KAFuF1I,EAAG,iBAAiB,CAAC1D,MAAM,CAACiI,KAAO,UAAUxL,KAAO,WAAW,cAAc2M,GAAW3F,EAAI0F,WAAWC,GAAS,cAAcA,GAAW3F,EAAI6F,WAAWF,GAAS5K,MAAQiF,EAAI8D,GAAG,sCAAsCyC,YAAcvG,EAAI8D,GAAG,4CAA4C0D,WAAa,WAAW,sBAAsB,CACnatB,SAAUlG,EAAI8D,GAAG,0CACL9D,EAAI4I,GAAG,KAAK3I,EAAG,gBAAgB,CAACkI,YAAY,wBAAwB5L,MAAM,CAACqC,MAAQ,GAAG,WAAWoB,EAAIqD,YAAY,aAAarD,EAAIf,UAAUC,SAAWc,EAAIsD,aAAa,CAAEtD,EAAc,WAAEC,EAAG,UAAU,CAACkI,YAAY,QAAQnI,EAAI2I,KAAK3I,EAAI4I,GAAG,SAAS5I,EAAImJ,GAAGnJ,EAAI8D,GAAG,uBAAuB,SAAS,IAAI,KAErP,IAuGlE,EACA,KACA,WACA,MAIwD,QAEtDsF,EAAkB9R,EAAoB,KAMR+R,EAHqC,CAAE9G,WAAW,CAAC+G,YAAYpB,GAAMzF,OAAO,CAACpB,EAA6B,EAAEF,EAA6B,GAAGoI,QAAQ,WAAmB,IAAI7E,EAAMxH,KAAKA,KAAKsM,SAASpJ,GAAGgJ,EAAiD,GAAE,WAC5R1E,EAAM+E,aAAa,gBAAiBxL,QAAQ,CAAC6J,SAAS,SAAkB1B,GAAM,IAAIjD,EAASiD,EAAKjD,SAASD,EAAakD,EAAKlD,aAAarG,EAAQuJ,EAAKvJ,QAAQmL,EAAiB5B,EAAK4B,iBAAiB5E,EAAYgD,EAAKhD,YAAY+B,EAAwBiB,EAAKjB,wBAAwBL,EAA6BsB,EAAKtB,6BAAgCkD,GAAkB9K,KAAKsM,SAASE,KAAK,mBAAmB,CAACC,WAAW3B,EAAiB4B,iBAAiB9E,IAA+B5H,KAAK2M,OAAOC,SAAS,kBAAkB,CAACC,KAAK,CAACf,MAAM9F,EAAasB,KAAKrB,EAAS6G,aAAa5G,MAAqBlG,KAAK2M,OAAOC,SAAS,kCAAkC,CAAC3G,SAASA,EAASD,aAAaA,EAAarG,QAAQA,EAAQuG,YAAYA,EAAYwG,iBAAiB9E,IAAoCtM,OAAO0I,EAA6B,EAApC1I,CAAuC2M,IAA0BjI,KAAK2M,OAAOC,SAAS,+BAA+B3E,MAWh4B8E,EAAwBzR,OAAOsH,EAAqC,EAA5CtH,CAC1B6Q,GAtJW,WAAkB,IAAIrJ,EAAI9C,KAAK+C,EAAGD,EAAIE,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACkI,YAAY,6BAA6B,CAAClI,EAAG,gBAAgB,CAAC1D,MAAM,CAACmG,QAAU1C,EAAIkK,oBAAoB9J,GAAG,CAACgI,OAASpI,EAAI8H,aAAa,KAE5L,IAuJpB,EACA,KACA,KACA,MAI6CzQ,EAA6B,QAAK4S,EAA6B"},"input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[71],{\n\n/***/ 1916:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js\nvar es_array_slice = __webpack_require__(69);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__(52);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(70);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.constructor.js\nvar es_regexp_constructor = __webpack_require__(1915);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js\nvar es_regexp_to_string = __webpack_require__(159);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js\nvar es_array_iterator = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js\nvar es_string_iterator = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.js\nvar web_url = __webpack_require__(207);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/markdown-it-link-attributes/index.js\nvar markdown_it_link_attributes = __webpack_require__(1918);\nvar markdown_it_link_attributes_default = /*#__PURE__*/__webpack_require__.n(markdown_it_link_attributes);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match.js\nvar es_string_match = __webpack_require__(368);\n\n// CONCATENATED MODULE: ./app/javascript/shared/helpers/markdownIt/link.js\n// Process [@mention](mention://user/1/Pranav)\nvar USER_MENTIONS_REGEX=/mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;var buildMentionTokens=function buildMentionTokens(){return function(state,silent){var label;var labelEnd;var labelStart;var pos;var res;var token;var href='';var max=state.posMax;if(state.src.charCodeAt(state.pos)!==0x5b/* [ */){return false;}labelStart=state.pos+1;labelEnd=state.md.helpers.parseLinkLabel(state,state.pos,true);// parser failed to find ']', so it's not a valid link\nif(labelEnd<0){return false;}label=state.src.slice(labelStart,labelEnd);pos=labelEnd+1;if(pos<max&&state.src.charCodeAt(pos)===0x28/* ( */){pos+=1;res=state.md.helpers.parseLinkDestination(state.src,pos,state.posMax);if(res.ok){href=state.md.normalizeLink(res.str);if(state.md.validateLink(href)){pos=res.pos;}else{href='';}}pos+=1;}if(!href.match(new RegExp(USER_MENTIONS_REGEX))){return false;}if(!silent){state.pos=labelStart;state.posMax=labelEnd;token=state.push('mention','');token.href=href;token.content=label;}state.pos=pos;state.posMax=max;return true;};};var renderMentions=function renderMentions(){return function(tokens,idx){return\"<span class=\\\"prosemirror-mention-node\\\">\".concat(tokens[idx].content,\"</span>\");};};function mentionPlugin(md){md.renderer.rules.mention=renderMentions(md);md.inline.ruler.before('link','mention',buildMentionTokens(md));}\n// CONCATENATED MODULE: ./app/javascript/shared/helpers/MessageFormatter.js\nfunction _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}var setImageHeight=function setImageHeight(inlineToken){var imgSrc=inlineToken.attrGet('src');if(!imgSrc)return;var url=new URL(imgSrc);var height=url.searchParams.get('cw_image_height');if(!height)return;inlineToken.attrSet('style',\"height: \".concat(height,\";\"));};var processInlineToken=function processInlineToken(blockToken){blockToken.children.forEach(function(inlineToken){if(inlineToken.type==='image'){setImageHeight(inlineToken);}});};var imgResizeManager=function imgResizeManager(md){// Custom rule for image resize in markdown\n// If the image url has a query param cw_image_height, then add a style attribute to the image\nmd.core.ruler.after('inline','add-image-height',function(state){state.tokens.forEach(function(blockToken){if(blockToken.type==='inline'){processInlineToken(blockToken);}});});};var md=__webpack_require__(1809)({html:false,xhtmlOut:true,breaks:true,langPrefix:'language-',linkify:true,typographer:true,quotes:\"\\u201C\\u201D\\u2018\\u2019\",maxNesting:20}).use(mentionPlugin).use(imgResizeManager).use(markdown_it_link_attributes_default.a,{attrs:{class:'link',rel:'noreferrer noopener nofollow',target:'_blank'}});var TWITTER_USERNAME_REGEX=/(^|[^@\\w])@(\\w{1,15})\\b/g;var TWITTER_USERNAME_REPLACEMENT='$1[@$2](http://twitter.com/$2)';var TWITTER_HASH_REGEX=/(^|\\s)#(\\w+)/g;var TWITTER_HASH_REPLACEMENT='$1[#$2](https://twitter.com/hashtag/$2)';var MessageFormatter=/*#__PURE__*/function(){function MessageFormatter(message){var isATweet=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var isAPrivateNote=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,MessageFormatter);this.message=message||'';this.isAPrivateNote=isAPrivateNote;this.isATweet=isATweet;}_createClass(MessageFormatter,[{key:\"formatMessage\",value:function formatMessage(){var updatedMessage=this.message;if(this.isATweet&&!this.isAPrivateNote){updatedMessage=updatedMessage.replace(TWITTER_USERNAME_REGEX,TWITTER_USERNAME_REPLACEMENT);updatedMessage=updatedMessage.replace(TWITTER_HASH_REGEX,TWITTER_HASH_REPLACEMENT);}return md.render(updatedMessage);}},{key:\"formattedMessage\",get:function get(){return this.formatMessage();}},{key:\"plainText\",get:function get(){var strippedOutHtml=new DOMParser().parseFromString(this.formattedMessage,'text/html');return strippedOutHtml.body.textContent||'';}}]);return MessageFormatter;}();/* harmony default export */ var helpers_MessageFormatter = (MessageFormatter);\n// CONCATENATED MODULE: ./app/javascript/shared/mixins/messageFormatterMixin.js\n/* harmony default export */ var messageFormatterMixin = __webpack_exports__[\"a\"] = ({methods:{formatMessage:function formatMessage(message,isATweet,isAPrivateNote){var messageFormatter=new helpers_MessageFormatter(message,isATweet,isAPrivateNote);return messageFormatter.formattedMessage;},getPlainText:function getPlainText(message,isATweet){var messageFormatter=new helpers_MessageFormatter(message,isATweet);return messageFormatter.plainText;},truncateMessage:function truncateMessage(){var description=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';if(description.length<100){return description;}return\"\".concat(description.slice(0,97),\"...\");},highlightContent:function highlightContent(){var content=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var searchTerm=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var highlightClass=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';var plainTextContent=this.getPlainText(content);// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\nvar escapedSearchTerm=searchTerm.replace(/[.*+?^${}()|[\\]\\\\]/g,'\\\\$&');return plainTextContent.replace(new RegExp(\"(\".concat(escapedSearchTerm,\")\"),'ig'),\"<span class=\\\"\".concat(highlightClass,\"\\\">$1</span>\"));}}});\n\n/***/ }),\n\n/***/ 1942:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/shared/components/Button.vue?vue&type=template&id=05075a0e&\nvar render = function render(){var _vm=this,_c=_vm._self._c;return _c('button',{class:_vm.buttonClassName,style:(_vm.buttonStyles),attrs:{\"disabled\":_vm.disabled},on:{\"click\":_vm.onClick}},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/shared/components/Button.vue?vue&type=template&id=05075a0e&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js\nvar es_object_keys = __webpack_require__(13);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/shared/components/Button.vue?vue&type=script&lang=js&\n/* harmony default export */ var Buttonvue_type_script_lang_js_ = ({props:{block:{type:Boolean,default:false},type:{type:String,default:'blue'},bgColor:{type:String,default:''},textColor:{type:String,default:''},disabled:{type:Boolean,default:false}},computed:{buttonClassName:function buttonClassName(){var className='text-white py-3 px-4 rounded shadow-sm leading-4';if(this.type==='clear'){className='flex mx-auto mt-4 text-xs leading-3 w-auto text-black-600';}if(this.type==='blue'&&!Object.keys(this.buttonStyles).length){className=\"\".concat(className,\" bg-woot-500 hover:bg-woot-700\");}if(this.block){className=\"\".concat(className,\" w-full\");}return className;},buttonStyles:function buttonStyles(){var styles={};if(this.bgColor){styles.backgroundColor=this.bgColor;}if(this.textColor){styles.color=this.textColor;}return styles;}},methods:{onClick:function onClick(e){this.$emit('click',e);}}});\n// CONCATENATED MODULE: ./app/javascript/shared/components/Button.vue?vue&type=script&lang=js&\n /* harmony default export */ var components_Buttonvue_type_script_lang_js_ = (Buttonvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./app/javascript/shared/components/Button.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  components_Buttonvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var Button = __webpack_exports__[\"a\"] = (component.exports);\n\n/***/ }),\n\n/***/ 2666:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1915);\n/* harmony import */ var core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(159);\n/* harmony import */ var core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(69);\n/* harmony import */ var core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony default export */ __webpack_exports__[\"a\"] = ({methods:{getRegexp:function getRegexp(regexPatternValue){var lastSlash=regexPatternValue.lastIndexOf('/');return new RegExp(regexPatternValue.slice(1,lastSlash),regexPatternValue.slice(lastSlash+1));}}});\n\n/***/ }),\n\n/***/ 3091:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 3303:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_ref_3_2_node_modules_sass_loader_dist_cjs_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_Form_vue_vue_type_style_index_0_id_be741956_prod_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3091);\n/* harmony import */ var _node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_ref_3_2_node_modules_sass_loader_dist_cjs_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_Form_vue_vue_type_style_index_0_id_be741956_prod_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_dist_cjs_js_ref_3_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_ref_3_2_node_modules_sass_loader_dist_cjs_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_Form_vue_vue_type_style_index_0_id_be741956_prod_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__);\n/* unused harmony reexport * */\n\n\n/***/ }),\n\n/***/ 3360:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/widget/views/PreChatForm.vue?vue&type=template&id=321db039&\nvar render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex flex-1 overflow-auto\"},[_c('pre-chat-form',{attrs:{\"options\":_vm.preChatFormOptions},on:{\"submit\":_vm.onSubmit}})],1)\n}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/widget/views/PreChatForm.vue?vue&type=template&id=321db039&\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/widget/components/PreChat/Form.vue?vue&type=template&id=be741956&scoped=true&\nvar Formvue_type_template_id_be741956_scoped_true_render = function render(){var _vm=this,_c=_vm._self._c;return _c('FormulateForm',{staticClass:\"flex flex-col flex-1 p-6 overflow-y-auto\",on:{\"submit\":_vm.onSubmit},model:{value:(_vm.formValues),callback:function ($$v) {_vm.formValues=$$v},expression:\"formValues\"}},[(_vm.shouldShowHeaderMessage)?_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.formatMessage(_vm.headerMessage, false)),expression:\"formatMessage(headerMessage, false)\"}],staticClass:\"mb-4 text-sm leading-5 pre-chat-header-message\",class:_vm.$dm('text-black-800', 'dark:text-slate-50')}):_vm._e(),_vm._v(\" \"),_vm._l((_vm.enabledPreChatFields),function(item){return _c('FormulateInput',{key:item.name,attrs:{\"name\":item.name,\"type\":item.type,\"label\":_vm.getLabel(item),\"placeholder\":_vm.getPlaceHolder(item),\"validation\":_vm.getValidation(item),\"options\":_vm.getOptions(item),\"label-class\":context => _vm.labelClass(context),\"input-class\":context => _vm.inputClass(context),\"validation-messages\":{\n      startsWithPlus: _vm.$t(\n        'PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.DIAL_CODE_VALID_ERROR'\n      ),\n      isValidPhoneNumber: _vm.$t('PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.VALID_ERROR'),\n      email: _vm.$t('PRE_CHAT_FORM.FIELDS.EMAIL_ADDRESS.VALID_ERROR'),\n      required: _vm.$t('PRE_CHAT_FORM.REQUIRED'),\n      matches: item.regex_cue\n        ? item.regex_cue\n        : _vm.$t('PRE_CHAT_FORM.REGEX_ERROR'),\n    },\"has-error-in-phone-input\":_vm.hasErrorInPhoneInput}})}),_vm._v(\" \"),(!_vm.hasActiveCampaign)?_c('FormulateInput',{attrs:{\"name\":\"message\",\"type\":\"textarea\",\"label-class\":context => _vm.labelClass(context),\"input-class\":context => _vm.inputClass(context),\"label\":_vm.$t('PRE_CHAT_FORM.FIELDS.MESSAGE.LABEL'),\"placeholder\":_vm.$t('PRE_CHAT_FORM.FIELDS.MESSAGE.PLACEHOLDER'),\"validation\":\"required\",\"validation-messages\":{\n      required: _vm.$t('PRE_CHAT_FORM.FIELDS.MESSAGE.ERROR'),\n    }}}):_vm._e(),_vm._v(\" \"),_c('custom-button',{staticClass:\"mt-2 mb-5 font-medium\",attrs:{\"block\":\"\",\"bg-color\":_vm.widgetColor,\"text-color\":_vm.textColor,\"disabled\":_vm.isCreating}},[(_vm.isCreating)?_c('spinner',{staticClass:\"p-0\"}):_vm._e(),_vm._v(\"\\n    \"+_vm._s(_vm.$t('START_CONVERSATION'))+\"\\n  \")],1)],2)\n}\nvar Formvue_type_template_id_be741956_scoped_true_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/widget/components/PreChat/Form.vue?vue&type=template&id=be741956&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js\nvar es_array_filter = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js\nvar es_function_name = __webpack_require__(43);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js\nvar es_array_map = __webpack_require__(88);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js\nvar es_array_concat = __webpack_require__(51);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.find.js\nvar es_array_find = __webpack_require__(158);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js\nvar es_array_iterator = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js\nvar es_object_keys = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js\nvar es_array_includes = __webpack_require__(75);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.includes.js\nvar es_string_includes = __webpack_require__(102);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.js\nvar es_symbol = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptor.js\nvar es_object_get_own_property_descriptor = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptors.js\nvar es_object_get_own_property_descriptors = __webpack_require__(16);\n\n// EXTERNAL MODULE: ./app/javascript/shared/components/Button.vue + 4 modules\nvar Button = __webpack_require__(1942);\n\n// EXTERNAL MODULE: ./app/javascript/shared/components/Spinner.vue + 4 modules\nvar Spinner = __webpack_require__(190);\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.js\nvar vuex = __webpack_require__(32);\n\n// EXTERNAL MODULE: ./node_modules/@chatwoot/utils/dist/utils.esm.js + 9 modules\nvar utils_esm = __webpack_require__(281);\n\n// EXTERNAL MODULE: ./app/javascript/shared/mixins/messageFormatterMixin.js + 2 modules\nvar messageFormatterMixin = __webpack_require__(1916);\n\n// EXTERNAL MODULE: ./app/javascript/widget/helpers/utils.js\nvar utils = __webpack_require__(93);\n\n// EXTERNAL MODULE: ./app/javascript/widget/mixins/routerMixin.js\nvar routerMixin = __webpack_require__(1785);\n\n// EXTERNAL MODULE: ./app/javascript/widget/mixins/darkModeMixin.js\nvar darkModeMixin = __webpack_require__(312);\n\n// EXTERNAL MODULE: ./app/javascript/widget/mixins/configMixin.js\nvar configMixin = __webpack_require__(351);\n\n// EXTERNAL MODULE: ./app/javascript/dashboard/mixins/customAttributeMixin.js\nvar customAttributeMixin = __webpack_require__(2666);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/widget/components/PreChat/Form.vue?vue&type=script&lang=js&\nfunction ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}/* harmony default export */ var Formvue_type_script_lang_js_ = ({components:{CustomButton:Button[\"a\" /* default */],Spinner:Spinner[\"a\" /* default */]},mixins:[routerMixin[\"a\" /* default */],darkModeMixin[\"a\" /* default */],messageFormatterMixin[\"a\" /* default */],configMixin[\"a\" /* default */],customAttributeMixin[\"a\" /* default */]],props:{options:{type:Object,default:function _default(){}}},data:function data(){return{locale:this.$root.$i18n.locale,hasErrorInPhoneInput:false,message:'',formValues:{},labels:{emailAddress:'EMAIL_ADDRESS',fullName:'FULL_NAME',phoneNumber:'PHONE_NUMBER'}};},computed:_objectSpread(_objectSpread({},Object(vuex[\"mapGetters\"])({widgetColor:'appConfig/getWidgetColor',isCreating:'conversation/getIsCreating',activeCampaign:'campaign/getActiveCampaign',currentUser:'contacts/getCurrentUser'})),{},{textColor:function textColor(){return Object(utils_esm[\"f\" /* getContrastingTextColor */])(this.widgetColor);},hasActiveCampaign:function hasActiveCampaign(){return!Object(utils[\"d\" /* isEmptyObject */])(this.activeCampaign);},shouldShowHeaderMessage:function shouldShowHeaderMessage(){return this.hasActiveCampaign||this.preChatFormEnabled;},headerMessage:function headerMessage(){if(this.preChatFormEnabled){return this.options.preChatMessage;}if(this.hasActiveCampaign){return this.$t('PRE_CHAT_FORM.CAMPAIGN_HEADER');}return'';},preChatFields:function preChatFields(){return this.preChatFormEnabled?this.options.preChatFields:[];},filteredPreChatFields:function filteredPreChatFields(){var isUserEmailAvailable=this.currentUser.has_email;var isUserPhoneNumberAvailable=this.currentUser.has_phone_number;var isUserIdentifierAvailable=!!this.currentUser.identifier;var isUserNameAvailable=!!(isUserIdentifierAvailable||isUserEmailAvailable||isUserPhoneNumberAvailable);return this.preChatFields.filter(function(field){if(isUserEmailAvailable&&field.name==='emailAddress'){return false;}if(isUserPhoneNumberAvailable&&field.name==='phoneNumber'){return false;}if(isUserNameAvailable&&field.name==='fullName'){return false;}return true;});},enabledPreChatFields:function enabledPreChatFields(){var _this=this;return this.filteredPreChatFields.filter(function(field){return field.enabled;}).map(function(field){return _objectSpread(_objectSpread({},field),{},{type:field.name==='phoneNumber'?'phoneInput':_this.findFieldType(field.type)});});},conversationCustomAttributes:function conversationCustomAttributes(){var _this2=this;var conversationAttributes={};this.enabledPreChatFields.forEach(function(field){if(field.field_type==='conversation_attribute'){conversationAttributes=_objectSpread(_objectSpread({},conversationAttributes),{},_defineProperty({},field.name,_this2.getValue(field)));}});return conversationAttributes;},contactCustomAttributes:function contactCustomAttributes(){var _this3=this;var contactAttributes={};this.enabledPreChatFields.forEach(function(field){if(field.field_type==='contact_attribute'){contactAttributes=_objectSpread(_objectSpread({},contactAttributes),{},_defineProperty({},field.name,_this3.getValue(field)));}});return contactAttributes;},inputStyles:function inputStyles(){return\"mt-1 border rounded w-full py-2 px-3 text-slate-700 outline-none\";},isInputDarkOrLightMode:function isInputDarkOrLightMode(){return\"\".concat(this.$dm('bg-white','dark:bg-slate-600'),\" \").concat(this.$dm('text-slate-700','dark:text-slate-50'));},inputBorderColor:function inputBorderColor(){return\"\".concat(this.$dm('border-black-200','dark:border-black-500'));}}),methods:{labelClass:function labelClass(context){var hasErrors=context.hasErrors;if(!hasErrors){return\"text-xs font-medium \".concat(this.$dm('text-black-800','dark:text-slate-50'));}return\"text-xs font-medium \".concat(this.$dm('text-red-400','dark:text-red-400'));},inputClass:function inputClass(context){var hasErrors=context.hasErrors,classification=context.classification,type=context.type;if(classification==='box'&&type==='checkbox'){return'';}if(type==='phoneInput'){this.hasErrorInPhoneInput=hasErrors;}if(!hasErrors){return\"\".concat(this.inputStyles,\" hover:border-black-300 focus:border-black-300 \").concat(this.isInputDarkOrLightMode,\" \").concat(this.inputBorderColor);}return\"\".concat(this.inputStyles,\" border-red-200 hover:border-red-300 focus:border-red-300 \").concat(this.isInputDarkOrLightMode);},isContactFieldRequired:function isContactFieldRequired(field){return this.preChatFields.find(function(option){return option.name===field;}).required;},getLabel:function getLabel(_ref){var label=_ref.label;return label;},getPlaceHolder:function getPlaceHolder(_ref2){var placeholder=_ref2.placeholder;return placeholder;},getValue:function getValue(_ref3){var name=_ref3.name,type=_ref3.type;if(type==='select'){return this.enabledPreChatFields.find(function(option){return option.name===name;}).values[this.formValues[name]];}return this.formValues[name]||null;},getValidation:function getValidation(_ref4){var type=_ref4.type,name=_ref4.name,field_type=_ref4.field_type,regex_pattern=_ref4.regex_pattern;var regex=regex_pattern?this.getRegexp(regex_pattern):null;var validations={emailAddress:'email',phoneNumber:['startsWithPlus','isValidPhoneNumber'],url:'url',date:'date',text:null,select:null,number:null,checkbox:false,contact_attribute:regex?[['matches',regex]]:null,conversation_attribute:regex?[['matches',regex]]:null};var validationKeys=Object.keys(validations);var isRequired=this.isContactFieldRequired(name);var validation=isRequired?['bail','required']:['bail','optional'];if(validationKeys.includes(name)||validationKeys.includes(type)||validationKeys.includes(field_type)){var validationType=validations[type]||validations[name]||validations[field_type];return validationType?validation.concat(validationType):validation;}return[];},findFieldType:function findFieldType(type){if(type==='link'){return'url';}if(type==='list'){return'select';}return type;},getOptions:function getOptions(item){if(item.type==='select'){var values={};item.values.forEach(function(value,index){values=_objectSpread(_objectSpread({},values),{},_defineProperty({},index,value));});return values;}return null;},onSubmit:function onSubmit(){var _this$formValues=this.formValues,emailAddress=_this$formValues.emailAddress,fullName=_this$formValues.fullName,phoneNumber=_this$formValues.phoneNumber,message=_this$formValues.message;this.$emit('submit',{fullName:fullName,phoneNumber:phoneNumber,emailAddress:emailAddress,message:message,activeCampaignId:this.activeCampaign.id,conversationCustomAttributes:this.conversationCustomAttributes,contactCustomAttributes:this.contactCustomAttributes});}}});\n// CONCATENATED MODULE: ./app/javascript/widget/components/PreChat/Form.vue?vue&type=script&lang=js&\n /* harmony default export */ var PreChat_Formvue_type_script_lang_js_ = (Formvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./app/javascript/widget/components/PreChat/Form.vue?vue&type=style&index=0&id=be741956&prod&lang=scss&scoped=true&\nvar Formvue_type_style_index_0_id_be741956_prod_lang_scss_scoped_true_ = __webpack_require__(3303);\n\n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./app/javascript/widget/components/PreChat/Form.vue\n\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  PreChat_Formvue_type_script_lang_js_,\n  Formvue_type_template_id_be741956_scoped_true_render,\n  Formvue_type_template_id_be741956_scoped_true_staticRenderFns,\n  false,\n  null,\n  \"be741956\",\n  null\n  \n)\n\n/* harmony default export */ var Form = (component.exports);\n// EXTERNAL MODULE: ./app/javascript/widget/constants/widgetBusEvents.js\nvar widgetBusEvents = __webpack_require__(318);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/widget/views/PreChatForm.vue?vue&type=script&lang=js&\n/* harmony default export */ var PreChatFormvue_type_script_lang_js_ = ({components:{PreChatForm:Form},mixins:[configMixin[\"a\" /* default */],routerMixin[\"a\" /* default */]],mounted:function mounted(){var _this=this;this.$emitter.on(widgetBusEvents[\"c\" /* ON_CONVERSATION_CREATED */],function(){// Redirect to messages page after conversation is created\n_this.replaceRoute('messages');});},methods:{onSubmit:function onSubmit(_ref){var fullName=_ref.fullName,emailAddress=_ref.emailAddress,message=_ref.message,activeCampaignId=_ref.activeCampaignId,phoneNumber=_ref.phoneNumber,contactCustomAttributes=_ref.contactCustomAttributes,conversationCustomAttributes=_ref.conversationCustomAttributes;if(activeCampaignId){this.$emitter.emit('execute-campaign',{campaignId:activeCampaignId,customAttributes:conversationCustomAttributes});this.$store.dispatch('contacts/update',{user:{email:emailAddress,name:fullName,phone_number:phoneNumber}});}else{this.$store.dispatch('conversation/createConversation',{fullName:fullName,emailAddress:emailAddress,message:message,phoneNumber:phoneNumber,customAttributes:conversationCustomAttributes});}if(!Object(utils[\"d\" /* isEmptyObject */])(contactCustomAttributes)){this.$store.dispatch('contacts/setCustomAttributes',contactCustomAttributes);}}}});\n// CONCATENATED MODULE: ./app/javascript/widget/views/PreChatForm.vue?vue&type=script&lang=js&\n /* harmony default export */ var views_PreChatFormvue_type_script_lang_js_ = (PreChatFormvue_type_script_lang_js_); \n// CONCATENATED MODULE: ./app/javascript/widget/views/PreChatForm.vue\n\n\n\n\n\n/* normalize component */\n\nvar PreChatForm_component = Object(componentNormalizer[\"a\" /* default */])(\n  views_PreChatFormvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var PreChatForm = __webpack_exports__[\"default\"] = (PreChatForm_component.exports);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/home/chatwoot/chatwoot/app/javascript/shared/helpers/markdownIt/link.js","/home/chatwoot/chatwoot/app/javascript/shared/helpers/MessageFormatter.js","/home/chatwoot/chatwoot/app/javascript/shared/mixins/messageFormatterMixin.js","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/shared/components/Button.vue?vue&type=template&id=05075a0e&","app/javascript/shared/components/Button.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/shared/components/Button.vue?vue&type=script&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/shared/components/Button.vue","/home/chatwoot/chatwoot/app/javascript/dashboard/mixins/customAttributeMixin.js","/home/chatwoot/chatwoot/node_modules/mini-css-extract-plugin/dist/loader.js!/home/chatwoot/chatwoot/node_modules/css-loader/dist/cjs.js??ref--3-1!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/stylePostLoader.js!/home/chatwoot/chatwoot/node_modules/postcss-loader/dist/cjs.js??ref--3-2!/home/chatwoot/chatwoot/node_modules/sass-loader/dist/cjs.js??ref--3-3!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/PreChat/Form.vue?vue&type=style&index=0&id=be741956&prod&lang=scss&scoped=true&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/mini-css-extract-plugin/dist/loader.js!/home/chatwoot/chatwoot/node_modules/css-loader/dist/cjs.js??ref--3-1!/home/chatwoot/chatwoot/node_modules/postcss-loader/dist/cjs.js??ref--3-2!/home/chatwoot/chatwoot/node_modules/sass-loader/dist/cjs.js??ref--3-3!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/PreChat/Form.vue?vue&type=style&index=0&id=be741956&prod&lang=scss&scoped=true&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/views/PreChatForm.vue?vue&type=template&id=321db039&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/PreChat/Form.vue?vue&type=template&id=be741956&scoped=true&","app/javascript/widget/components/PreChat/Form.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/PreChat/Form.vue?vue&type=script&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/components/PreChat/Form.vue","app/javascript/widget/views/PreChatForm.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/views/PreChatForm.vue?vue&type=script&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/widget/views/PreChatForm.vue"],"names":["USER_MENTIONS_REGEX","buildMentionTokens","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","md","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","push","content","renderMentions","tokens","idx","mentionPlugin","renderer","rules","mention","inline","ruler","before","setImageHeight","inlineToken","imgSrc","attrGet","url","URL","height","searchParams","get","attrSet","processInlineToken","blockToken","children","forEach","type","imgResizeManager","core","after","require","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","mila","attrs","class","rel","target","TWITTER_USERNAME_REGEX","TWITTER_USERNAME_REPLACEMENT","TWITTER_HASH_REGEX","TWITTER_HASH_REPLACEMENT","MessageFormatter","message","isATweet","isAPrivateNote","updatedMessage","replace","render","formatMessage","strippedOutHtml","DOMParser","parseFromString","formattedMessage","body","textContent","methods","messageFormatter","getPlainText","plainText","truncateMessage","description","length","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm","getRegexp","regexPatternValue","lastSlash","lastIndexOf"],"mappings":"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","file":"x","sourcesContent":["// Process [@mention](mention://user/1/Pranav)\nconst USER_MENTIONS_REGEX = /mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;\n\nconst buildMentionTokens = () => (state, silent) => {\n  var label;\n  var labelEnd;\n  var labelStart;\n  var pos;\n  var res;\n  var token;\n  var href = '';\n  var max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5b /* [ */) {\n    return false;\n  }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n\n  label = state.src.slice(labelStart, labelEnd);\n  pos = labelEnd + 1;\n\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    pos += 1;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n    pos += 1;\n  }\n\n  if (!href.match(new RegExp(USER_MENTIONS_REGEX))) {\n    return false;\n  }\n\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token = state.push('mention', '');\n    token.href = href;\n    token.content = label;\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n\n  return true;\n};\n\nconst renderMentions = () => (tokens, idx) => {\n  return `<span class=\"prosemirror-mention-node\">${tokens[idx].content}</span>`;\n};\n\nexport default function mentionPlugin(md) {\n  md.renderer.rules.mention = renderMentions(md);\n  md.inline.ruler.before('link', 'mention', buildMentionTokens(md));\n}\n","import mila from 'markdown-it-link-attributes';\nimport mentionPlugin from './markdownIt/link';\n\nconst setImageHeight = inlineToken => {\n  const imgSrc = inlineToken.attrGet('src');\n  if (!imgSrc) return;\n  const url = new URL(imgSrc);\n  const height = url.searchParams.get('cw_image_height');\n  if (!height) return;\n  inlineToken.attrSet('style', `height: ${height};`);\n};\n\nconst processInlineToken = blockToken => {\n  blockToken.children.forEach(inlineToken => {\n    if (inlineToken.type === 'image') {\n      setImageHeight(inlineToken);\n    }\n  });\n};\n\nconst imgResizeManager = md => {\n  // Custom rule for image resize in markdown\n  // If the image url has a query param cw_image_height, then add a style attribute to the image\n  md.core.ruler.after('inline', 'add-image-height', state => {\n    state.tokens.forEach(blockToken => {\n      if (blockToken.type === 'inline') {\n        processInlineToken(blockToken);\n      }\n    });\n  });\n};\n\nconst md = require('markdown-it')({\n  html: false,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  quotes: '\\u201c\\u201d\\u2018\\u2019',\n  maxNesting: 20,\n})\n  .use(mentionPlugin)\n  .use(imgResizeManager)\n  .use(mila, {\n    attrs: {\n      class: 'link',\n      rel: 'noreferrer noopener nofollow',\n      target: '_blank',\n    },\n  });\n\nconst TWITTER_USERNAME_REGEX = /(^|[^@\\w])@(\\w{1,15})\\b/g;\nconst TWITTER_USERNAME_REPLACEMENT = '$1[@$2](http://twitter.com/$2)';\nconst TWITTER_HASH_REGEX = /(^|\\s)#(\\w+)/g;\nconst TWITTER_HASH_REPLACEMENT = '$1[#$2](https://twitter.com/hashtag/$2)';\n\nclass MessageFormatter {\n  constructor(message, isATweet = false, isAPrivateNote = false) {\n    this.message = message || '';\n    this.isAPrivateNote = isAPrivateNote;\n    this.isATweet = isATweet;\n  }\n\n  formatMessage() {\n    let updatedMessage = this.message;\n    if (this.isATweet && !this.isAPrivateNote) {\n      updatedMessage = updatedMessage.replace(\n        TWITTER_USERNAME_REGEX,\n        TWITTER_USERNAME_REPLACEMENT\n      );\n      updatedMessage = updatedMessage.replace(\n        TWITTER_HASH_REGEX,\n        TWITTER_HASH_REPLACEMENT\n      );\n    }\n    return md.render(updatedMessage);\n  }\n\n  get formattedMessage() {\n    return this.formatMessage();\n  }\n\n  get plainText() {\n    const strippedOutHtml = new DOMParser().parseFromString(\n      this.formattedMessage,\n      'text/html'\n    );\n    return strippedOutHtml.body.textContent || '';\n  }\n}\n\nexport default MessageFormatter;\n","import MessageFormatter from '../helpers/MessageFormatter';\n\nexport default {\n  methods: {\n    formatMessage(message, isATweet, isAPrivateNote) {\n      const messageFormatter = new MessageFormatter(\n        message,\n        isATweet,\n        isAPrivateNote\n      );\n      return messageFormatter.formattedMessage;\n    },\n    getPlainText(message, isATweet) {\n      const messageFormatter = new MessageFormatter(message, isATweet);\n      return messageFormatter.plainText;\n    },\n    truncateMessage(description = '') {\n      if (description.length < 100) {\n        return description;\n      }\n\n      return `${description.slice(0, 97)}...`;\n    },\n\n    highlightContent(content = '', searchTerm = '', highlightClass = '') {\n      const plainTextContent = this.getPlainText(content);\n\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n      const escapedSearchTerm = searchTerm.replace(\n        /[.*+?^${}()|[\\]\\\\]/g,\n        '\\\\$&'\n      );\n\n      return plainTextContent.replace(\n        new RegExp(`(${escapedSearchTerm})`, 'ig'),\n        `<span class=\"${highlightClass}\">$1</span>`\n      );\n    },\n  },\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('button',{class:_vm.buttonClassName,style:(_vm.buttonStyles),attrs:{\"disabled\":_vm.disabled},on:{\"click\":_vm.onClick}},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <button\n    :class=\"buttonClassName\"\n    :style=\"buttonStyles\"\n    :disabled=\"disabled\"\n    @click=\"onClick\"\n  >\n    <slot />\n  </button>\n</template>\n<script>\nexport default {\n  props: {\n    block: {\n      type: Boolean,\n      default: false,\n    },\n    type: {\n      type: String,\n      default: 'blue',\n    },\n    bgColor: {\n      type: String,\n      default: '',\n    },\n    textColor: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    buttonClassName() {\n      let className = 'text-white py-3 px-4 rounded shadow-sm leading-4';\n      if (this.type === 'clear') {\n        className = 'flex mx-auto mt-4 text-xs leading-3 w-auto text-black-600';\n      }\n\n      if (this.type === 'blue' && !Object.keys(this.buttonStyles).length) {\n        className = `${className} bg-woot-500 hover:bg-woot-700`;\n      }\n      if (this.block) {\n        className = `${className} w-full`;\n      }\n      return className;\n    },\n    buttonStyles() {\n      const styles = {};\n      if (this.bgColor) {\n        styles.backgroundColor = this.bgColor;\n      }\n      if (this.textColor) {\n        styles.color = this.textColor;\n      }\n      return styles;\n    },\n  },\n  methods: {\n    onClick(e) {\n      this.$emit('click', e);\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Button.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Button.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Button.vue?vue&type=template&id=05075a0e&\"\nimport script from \"./Button.vue?vue&type=script&lang=js&\"\nexport * from \"./Button.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\n  methods: {\n    getRegexp(regexPatternValue) {\n      let lastSlash = regexPatternValue.lastIndexOf('/');\n      return new RegExp(\n        regexPatternValue.slice(1, lastSlash),\n        regexPatternValue.slice(lastSlash + 1)\n      );\n    },\n  },\n};\n","// extracted by mini-css-extract-plugin","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=style&index=0&id=be741956&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex flex-1 overflow-auto\"},[_c('pre-chat-form',{attrs:{\"options\":_vm.preChatFormOptions},on:{\"submit\":_vm.onSubmit}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('FormulateForm',{staticClass:\"flex flex-col flex-1 p-6 overflow-y-auto\",on:{\"submit\":_vm.onSubmit},model:{value:(_vm.formValues),callback:function ($$v) {_vm.formValues=$$v},expression:\"formValues\"}},[(_vm.shouldShowHeaderMessage)?_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.formatMessage(_vm.headerMessage, false)),expression:\"formatMessage(headerMessage, false)\"}],staticClass:\"mb-4 text-sm leading-5 pre-chat-header-message\",class:_vm.$dm('text-black-800', 'dark:text-slate-50')}):_vm._e(),_vm._v(\" \"),_vm._l((_vm.enabledPreChatFields),function(item){return _c('FormulateInput',{key:item.name,attrs:{\"name\":item.name,\"type\":item.type,\"label\":_vm.getLabel(item),\"placeholder\":_vm.getPlaceHolder(item),\"validation\":_vm.getValidation(item),\"options\":_vm.getOptions(item),\"label-class\":context => _vm.labelClass(context),\"input-class\":context => _vm.inputClass(context),\"validation-messages\":{\n      startsWithPlus: _vm.$t(\n        'PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.DIAL_CODE_VALID_ERROR'\n      ),\n      isValidPhoneNumber: _vm.$t('PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.VALID_ERROR'),\n      email: _vm.$t('PRE_CHAT_FORM.FIELDS.EMAIL_ADDRESS.VALID_ERROR'),\n      required: _vm.$t('PRE_CHAT_FORM.REQUIRED'),\n      matches: item.regex_cue\n        ? item.regex_cue\n        : _vm.$t('PRE_CHAT_FORM.REGEX_ERROR'),\n    },\"has-error-in-phone-input\":_vm.hasErrorInPhoneInput}})}),_vm._v(\" \"),(!_vm.hasActiveCampaign)?_c('FormulateInput',{attrs:{\"name\":\"message\",\"type\":\"textarea\",\"label-class\":context => _vm.labelClass(context),\"input-class\":context => _vm.inputClass(context),\"label\":_vm.$t('PRE_CHAT_FORM.FIELDS.MESSAGE.LABEL'),\"placeholder\":_vm.$t('PRE_CHAT_FORM.FIELDS.MESSAGE.PLACEHOLDER'),\"validation\":\"required\",\"validation-messages\":{\n      required: _vm.$t('PRE_CHAT_FORM.FIELDS.MESSAGE.ERROR'),\n    }}}):_vm._e(),_vm._v(\" \"),_c('custom-button',{staticClass:\"mt-2 mb-5 font-medium\",attrs:{\"block\":\"\",\"bg-color\":_vm.widgetColor,\"text-color\":_vm.textColor,\"disabled\":_vm.isCreating}},[(_vm.isCreating)?_c('spinner',{staticClass:\"p-0\"}):_vm._e(),_vm._v(\"\\n    \"+_vm._s(_vm.$t('START_CONVERSATION'))+\"\\n  \")],1)],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <FormulateForm\n    v-model=\"formValues\"\n    class=\"flex flex-col flex-1 p-6 overflow-y-auto\"\n    @submit=\"onSubmit\"\n  >\n    <div\n      v-if=\"shouldShowHeaderMessage\"\n      v-dompurify-html=\"formatMessage(headerMessage, false)\"\n      class=\"mb-4 text-sm leading-5 pre-chat-header-message\"\n      :class=\"$dm('text-black-800', 'dark:text-slate-50')\"\n    />\n    <FormulateInput\n      v-for=\"item in enabledPreChatFields\"\n      :key=\"item.name\"\n      :name=\"item.name\"\n      :type=\"item.type\"\n      :label=\"getLabel(item)\"\n      :placeholder=\"getPlaceHolder(item)\"\n      :validation=\"getValidation(item)\"\n      :options=\"getOptions(item)\"\n      :label-class=\"context => labelClass(context)\"\n      :input-class=\"context => inputClass(context)\"\n      :validation-messages=\"{\n        startsWithPlus: $t(\n          'PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.DIAL_CODE_VALID_ERROR'\n        ),\n        isValidPhoneNumber: $t('PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.VALID_ERROR'),\n        email: $t('PRE_CHAT_FORM.FIELDS.EMAIL_ADDRESS.VALID_ERROR'),\n        required: $t('PRE_CHAT_FORM.REQUIRED'),\n        matches: item.regex_cue\n          ? item.regex_cue\n          : $t('PRE_CHAT_FORM.REGEX_ERROR'),\n      }\"\n      :has-error-in-phone-input=\"hasErrorInPhoneInput\"\n    />\n    <FormulateInput\n      v-if=\"!hasActiveCampaign\"\n      name=\"message\"\n      type=\"textarea\"\n      :label-class=\"context => labelClass(context)\"\n      :input-class=\"context => inputClass(context)\"\n      :label=\"$t('PRE_CHAT_FORM.FIELDS.MESSAGE.LABEL')\"\n      :placeholder=\"$t('PRE_CHAT_FORM.FIELDS.MESSAGE.PLACEHOLDER')\"\n      validation=\"required\"\n      :validation-messages=\"{\n        required: $t('PRE_CHAT_FORM.FIELDS.MESSAGE.ERROR'),\n      }\"\n    />\n\n    <custom-button\n      class=\"mt-2 mb-5 font-medium\"\n      block\n      :bg-color=\"widgetColor\"\n      :text-color=\"textColor\"\n      :disabled=\"isCreating\"\n    >\n      <spinner v-if=\"isCreating\" class=\"p-0\" />\n      {{ $t('START_CONVERSATION') }}\n    </custom-button>\n  </FormulateForm>\n</template>\n\n<script>\nimport CustomButton from 'shared/components/Button.vue';\nimport Spinner from 'shared/components/Spinner.vue';\nimport { mapGetters } from 'vuex';\nimport { getContrastingTextColor } from '@chatwoot/utils';\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nimport { isEmptyObject } from 'widget/helpers/utils';\nimport routerMixin from 'widget/mixins/routerMixin';\nimport darkModeMixin from 'widget/mixins/darkModeMixin';\nimport configMixin from 'widget/mixins/configMixin';\nimport customAttributeMixin from '../../../dashboard/mixins/customAttributeMixin';\n\nexport default {\n  components: {\n    CustomButton,\n    Spinner,\n  },\n  mixins: [\n    routerMixin,\n    darkModeMixin,\n    messageFormatterMixin,\n    configMixin,\n    customAttributeMixin,\n  ],\n  props: {\n    options: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      locale: this.$root.$i18n.locale,\n      hasErrorInPhoneInput: false,\n      message: '',\n      formValues: {},\n      labels: {\n        emailAddress: 'EMAIL_ADDRESS',\n        fullName: 'FULL_NAME',\n        phoneNumber: 'PHONE_NUMBER',\n      },\n    };\n  },\n  computed: {\n    ...mapGetters({\n      widgetColor: 'appConfig/getWidgetColor',\n      isCreating: 'conversation/getIsCreating',\n      activeCampaign: 'campaign/getActiveCampaign',\n      currentUser: 'contacts/getCurrentUser',\n    }),\n    textColor() {\n      return getContrastingTextColor(this.widgetColor);\n    },\n    hasActiveCampaign() {\n      return !isEmptyObject(this.activeCampaign);\n    },\n    shouldShowHeaderMessage() {\n      return this.hasActiveCampaign || this.preChatFormEnabled;\n    },\n    headerMessage() {\n      if (this.preChatFormEnabled) {\n        return this.options.preChatMessage;\n      }\n      if (this.hasActiveCampaign) {\n        return this.$t('PRE_CHAT_FORM.CAMPAIGN_HEADER');\n      }\n      return '';\n    },\n    preChatFields() {\n      return this.preChatFormEnabled ? this.options.preChatFields : [];\n    },\n    filteredPreChatFields() {\n      const isUserEmailAvailable = this.currentUser.has_email;\n      const isUserPhoneNumberAvailable = this.currentUser.has_phone_number;\n      const isUserIdentifierAvailable = !!this.currentUser.identifier;\n\n      const isUserNameAvailable = !!(\n        isUserIdentifierAvailable ||\n        isUserEmailAvailable ||\n        isUserPhoneNumberAvailable\n      );\n      return this.preChatFields.filter(field => {\n        if (isUserEmailAvailable && field.name === 'emailAddress') {\n          return false;\n        }\n        if (isUserPhoneNumberAvailable && field.name === 'phoneNumber') {\n          return false;\n        }\n        if (isUserNameAvailable && field.name === 'fullName') {\n          return false;\n        }\n        return true;\n      });\n    },\n    enabledPreChatFields() {\n      return this.filteredPreChatFields\n        .filter(field => field.enabled)\n        .map(field => ({\n          ...field,\n          type:\n            field.name === 'phoneNumber'\n              ? 'phoneInput'\n              : this.findFieldType(field.type),\n        }));\n    },\n    conversationCustomAttributes() {\n      let conversationAttributes = {};\n      this.enabledPreChatFields.forEach(field => {\n        if (field.field_type === 'conversation_attribute') {\n          conversationAttributes = {\n            ...conversationAttributes,\n            [field.name]: this.getValue(field),\n          };\n        }\n      });\n      return conversationAttributes;\n    },\n    contactCustomAttributes() {\n      let contactAttributes = {};\n      this.enabledPreChatFields.forEach(field => {\n        if (field.field_type === 'contact_attribute') {\n          contactAttributes = {\n            ...contactAttributes,\n            [field.name]: this.getValue(field),\n          };\n        }\n      });\n      return contactAttributes;\n    },\n    inputStyles() {\n      return `mt-1 border rounded w-full py-2 px-3 text-slate-700 outline-none`;\n    },\n    isInputDarkOrLightMode() {\n      return `${this.$dm('bg-white', 'dark:bg-slate-600')} ${this.$dm(\n        'text-slate-700',\n        'dark:text-slate-50'\n      )}`;\n    },\n    inputBorderColor() {\n      return `${this.$dm('border-black-200', 'dark:border-black-500')}`;\n    },\n  },\n  methods: {\n    labelClass(context) {\n      const { hasErrors } = context;\n      if (!hasErrors) {\n        return `text-xs font-medium ${this.$dm(\n          'text-black-800',\n          'dark:text-slate-50'\n        )}`;\n      }\n      return `text-xs font-medium ${this.$dm(\n        'text-red-400',\n        'dark:text-red-400'\n      )}`;\n    },\n    inputClass(context) {\n      const { hasErrors, classification, type } = context;\n      if (classification === 'box' && type === 'checkbox') {\n        return '';\n      }\n      if (type === 'phoneInput') {\n        this.hasErrorInPhoneInput = hasErrors;\n      }\n      if (!hasErrors) {\n        return `${this.inputStyles} hover:border-black-300 focus:border-black-300 ${this.isInputDarkOrLightMode} ${this.inputBorderColor}`;\n      }\n      return `${this.inputStyles} border-red-200 hover:border-red-300 focus:border-red-300 ${this.isInputDarkOrLightMode}`;\n    },\n    isContactFieldRequired(field) {\n      return this.preChatFields.find(option => option.name === field).required;\n    },\n    getLabel({ label }) {\n      return label;\n    },\n    getPlaceHolder({ placeholder }) {\n      return placeholder;\n    },\n    getValue({ name, type }) {\n      if (type === 'select') {\n        return this.enabledPreChatFields.find(option => option.name === name)\n          .values[this.formValues[name]];\n      }\n      return this.formValues[name] || null;\n    },\n    getValidation({ type, name, field_type, regex_pattern }) {\n      let regex = regex_pattern ? this.getRegexp(regex_pattern) : null;\n      const validations = {\n        emailAddress: 'email',\n        phoneNumber: ['startsWithPlus', 'isValidPhoneNumber'],\n        url: 'url',\n        date: 'date',\n        text: null,\n        select: null,\n        number: null,\n        checkbox: false,\n        contact_attribute: regex ? [['matches', regex]] : null,\n        conversation_attribute: regex ? [['matches', regex]] : null,\n      };\n      const validationKeys = Object.keys(validations);\n      const isRequired = this.isContactFieldRequired(name);\n      const validation = isRequired\n        ? ['bail', 'required']\n        : ['bail', 'optional'];\n\n      if (\n        validationKeys.includes(name) ||\n        validationKeys.includes(type) ||\n        validationKeys.includes(field_type)\n      ) {\n        const validationType =\n          validations[type] || validations[name] || validations[field_type];\n        return validationType ? validation.concat(validationType) : validation;\n      }\n\n      return [];\n    },\n    findFieldType(type) {\n      if (type === 'link') {\n        return 'url';\n      }\n      if (type === 'list') {\n        return 'select';\n      }\n\n      return type;\n    },\n    getOptions(item) {\n      if (item.type === 'select') {\n        let values = {};\n        item.values.forEach((value, index) => {\n          values = {\n            ...values,\n            [index]: value,\n          };\n        });\n        return values;\n      }\n      return null;\n    },\n    onSubmit() {\n      const { emailAddress, fullName, phoneNumber, message } = this.formValues;\n      this.$emit('submit', {\n        fullName,\n        phoneNumber,\n        emailAddress,\n        message,\n        activeCampaignId: this.activeCampaign.id,\n        conversationCustomAttributes: this.conversationCustomAttributes,\n        contactCustomAttributes: this.contactCustomAttributes,\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n::v-deep {\n  .wrapper[data-type='checkbox'] {\n    .formulate-input-wrapper {\n      display: flex;\n      align-items: center;\n      line-height: $space-normal;\n\n      label {\n        margin-left: 0.2rem;\n      }\n    }\n  }\n  @media (prefers-color-scheme: dark) {\n    .wrapper {\n      .formulate-input-element--date,\n      .formulate-input-element--checkbox {\n        input {\n          color-scheme: dark;\n        }\n      }\n    }\n  }\n  .wrapper[data-type='textarea'] {\n    .formulate-input-element--textarea {\n      textarea {\n        min-height: 8rem;\n      }\n    }\n  }\n  .pre-chat-header-message {\n    .link {\n      color: $color-woot;\n      text-decoration: underline;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=be741956&scoped=true&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Form.vue?vue&type=style&index=0&id=be741956&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"be741956\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"flex flex-1 overflow-auto\">\n    <pre-chat-form :options=\"preChatFormOptions\" @submit=\"onSubmit\" />\n  </div>\n</template>\n<script>\nimport PreChatForm from '../components/PreChat/Form.vue';\nimport configMixin from '../mixins/configMixin';\nimport routerMixin from '../mixins/routerMixin';\nimport { isEmptyObject } from 'widget/helpers/utils';\nimport { ON_CONVERSATION_CREATED } from '../constants/widgetBusEvents';\n\nexport default {\n  components: {\n    PreChatForm,\n  },\n  mixins: [configMixin, routerMixin],\n  mounted() {\n    this.$emitter.on(ON_CONVERSATION_CREATED, () => {\n      // Redirect to messages page after conversation is created\n      this.replaceRoute('messages');\n    });\n  },\n  methods: {\n    onSubmit({\n      fullName,\n      emailAddress,\n      message,\n      activeCampaignId,\n      phoneNumber,\n      contactCustomAttributes,\n      conversationCustomAttributes,\n    }) {\n      if (activeCampaignId) {\n        this.$emitter.emit('execute-campaign', {\n          campaignId: activeCampaignId,\n          customAttributes: conversationCustomAttributes,\n        });\n        this.$store.dispatch('contacts/update', {\n          user: {\n            email: emailAddress,\n            name: fullName,\n            phone_number: phoneNumber,\n          },\n        });\n      } else {\n        this.$store.dispatch('conversation/createConversation', {\n          fullName: fullName,\n          emailAddress: emailAddress,\n          message: message,\n          phoneNumber: phoneNumber,\n          customAttributes: conversationCustomAttributes,\n        });\n      }\n      if (!isEmptyObject(contactCustomAttributes)) {\n        this.$store.dispatch(\n          'contacts/setCustomAttributes',\n          contactCustomAttributes\n        );\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreChatForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreChatForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PreChatForm.vue?vue&type=template&id=321db039&\"\nimport script from \"./PreChatForm.vue?vue&type=script&lang=js&\"\nexport * from \"./PreChatForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"]}}