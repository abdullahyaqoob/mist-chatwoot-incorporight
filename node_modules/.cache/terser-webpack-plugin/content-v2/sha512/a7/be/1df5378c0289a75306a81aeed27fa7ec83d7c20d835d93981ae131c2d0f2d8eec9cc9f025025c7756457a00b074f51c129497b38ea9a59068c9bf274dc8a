{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{2654:function(t,e,r){\"use strict\";r(56),r(88),r(51),r(75),r(13),r(9),r(11),r(15),r(12),r(16);var n=r(32),o=r(281);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.a={props:{accountSummaryKey:{type:String,default:\"getAccountSummary\"}},computed:s(s({},Object(n.mapGetters)({accountReport:\"getAccountReports\"})),{},{accountSummary:function(){return this.$store.getters[this.accountSummaryKey]}}),methods:{calculateTrend:function(t){if(!this.accountSummary.previous[t])return 0;var e=this.accountSummary[t]-this.accountSummary.previous[t];return Math.round(e/this.accountSummary.previous[t]*100)},displayMetric:function(t){return this.isAverageMetricType(t)?Object(o.e)(this.accountSummary[t]):Number(this.accountSummary[t]||\"\").toLocaleString()},displayInfoText:function(t){if(this.metrics[this.currentSelection].KEY!==t)return\"\";if(this.isAverageMetricType(t)){var e=this.accountReport.data.map((function(t){return t.count})).reduce((function(t,e){return t+e}),0);return\"\".concat(this.metrics[this.currentSelection].INFO_TEXT,\" \").concat(e)}return\"\"},isAverageMetricType:function(t){return[\"avg_first_response_time\",\"avg_resolution_time\",\"reply_time\"].includes(t)}}}},2829:function(t,e,r){\"use strict\";r(13),r(88),r(51),r(9),r(11),r(15),r(12),r(16);var n=r(2645),o=r(194),a=r(288),s=r(281),i=r(2654),c={mixins:[i.a],props:{metric:{type:Object,default:function(){return{}}}},methods:{trendColor:function(t,e){return this.isAverageMetricType(e)?t>0?\"border-red-500 text-red-500\":\"border-green-500 text-green-500\":t<0?\"border-red-500 text-red-500\":\"border-green-500 text-green-500\"}}},u=r(8);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={components:{ChartStats:Object(u.a)(c,(function(){var t=this,e=t._self._c;return e(\"div\",{staticClass:\"text-slate-900 dark:text-slate-100\"},[e(\"span\",{staticClass:\"text-sm\"},[t._v(\"\\n    \"+t._s(t.metric.NAME)+\"\\n  \")]),t._v(\" \"),e(\"div\",{staticClass:\"flex items-end\"},[e(\"div\",{staticClass:\"font-medium text-xl\"},[t._v(\"\\n      \"+t._s(t.displayMetric(t.metric.KEY))+\"\\n    \")]),t._v(\" \"),t.metric.trend?e(\"div\",{staticClass:\"text-xs ml-4 flex items-center mb-0.5\"},[t.metric.trend<0?e(\"div\",{staticClass:\"h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1\",class:t.trendColor(t.metric.trend,t.metric.KEY)}):e(\"div\",{staticClass:\"h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1\",class:t.trendColor(t.metric.trend,t.metric.KEY)}),t._v(\" \"),e(\"span\",{staticClass:\"font-medium\",class:t.trendColor(t.metric.trend,t.metric.KEY)},[t._v(\"\\n        \"+t._s(t.calculateTrend(t.metric.KEY))+\"%\\n      \")])]):t._e()])])}),[],!1,null,null,null).exports},mixins:[i.a],props:{groupBy:{type:Object,default:function(){return{}}},reportKeys:{type:Object,default:function(){return{CONVERSATIONS:\"conversations_count\",INCOMING_MESSAGES:\"incoming_messages_count\",OUTGOING_MESSAGES:\"outgoing_messages_count\",FIRST_RESPONSE_TIME:\"avg_first_response_time\",RESOLUTION_TIME:\"avg_resolution_time\",RESOLUTION_COUNT:\"resolutions_count\",REPLY_TIME:\"reply_time\"}}}},computed:{metrics:function(){var t=this,e=Object.keys(this.reportKeys),r={FIRST_RESPONSE_TIME:this.$t(\"REPORT.METRICS.FIRST_RESPONSE_TIME.INFO_TEXT\"),RESOLUTION_TIME:this.$t(\"REPORT.METRICS.RESOLUTION_TIME.INFO_TEXT\")};return e.map((function(e){return{NAME:t.$t(\"REPORT.METRICS.\".concat(e,\".NAME\")),KEY:t.reportKeys[e],DESC:t.$t(\"REPORT.METRICS.\".concat(e,\".DESC\")),INFO_TEXT:r[e],TOOLTIP_TEXT:\"REPORT.METRICS.\".concat(e,\".TOOLTIP_TEXT\"),trend:t.calculateTrend(t.reportKeys[e])}}))}},methods:{getCollection:function(t){var e=this;if(!this.accountReport.data[t.KEY])return{};var r=this.accountReport.data[t.KEY];return{labels:r.map((function(t){var r,s,i;if((null===(r=e.groupBy)||void 0===r?void 0:r.period)===n.b[2].period){var c=new Date(Object(o.a)(t.timestamp)),u=c.getDate()-c.getDay(),l=u+6,p=new Date(c.setDate(u)),f=new Date(c.setDate(l));return\"\".concat(Object(a.a)(p,\"dd-MMM\"),\" - \").concat(Object(a.a)(f,\"dd-MMM\"))}return(null===(s=e.groupBy)||void 0===s?void 0:s.period)===n.b[3].period?Object(a.a)(Object(o.a)(t.timestamp),\"MMM-yyyy\"):(null===(i=e.groupBy)||void 0===i?void 0:i.period)===n.b[4].period?Object(a.a)(Object(o.a)(t.timestamp),\"yyyy\"):Object(a.a)(Object(o.a)(t.timestamp),\"dd-MMM\")})),datasets:n.d[t.KEY].datasets.map((function(n){switch(n.type){case\"bar\":return p(p({},n),{},{yAxisID:\"y-left\",label:t.NAME,data:r.map((function(t){return t.value}))});case\"line\":return p(p({},n),{},{yAxisID:\"y-right\",label:e.metrics[0].NAME,data:r.map((function(t){return t.count}))});default:return n}}))}},getChartOptions:function(t){var e=this,r={};return this.isAverageMetricType(t.KEY)&&(r.callbacks={label:function(r){return e.$t(t.TOOLTIP_TEXT,{metricValue:Object(s.e)(r.yLabel),conversationCount:e.accountReport.data[t.KEY][r.index].count})}}),{scales:n.d[t.KEY].scales,tooltips:r}}}},O=Object(u.a)(d,(function(){var t=this,e=t._self._c;return e(\"div\",{staticClass:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 bg-white dark:bg-slate-800 p-2 border border-slate-100 dark:border-slate-700 rounded-md\"},t._l(t.metrics,(function(r){return e(\"div\",{key:r.KEY,staticClass:\"p-4 rounded-md mb-3\"},[e(\"chart-stats\",{attrs:{metric:r,\"account-summary-key\":t.accountSummaryKey}}),t._v(\" \"),e(\"div\",{staticClass:\"mt-4 h-72\"},[t.accountReport.isFetching[r.KEY]?e(\"woot-loading-state\",{staticClass:\"text-xs\",attrs:{message:t.$t(\"REPORT.LOADING_CHART\")}}):e(\"div\",{staticClass:\"h-72 flex items-center justify-center\"},[t.accountReport.data[r.KEY].length?e(\"woot-bar\",{staticClass:\"h-72 w-full\",attrs:{collection:t.getCollection(r),\"chart-options\":t.getChartOptions(r)}}):e(\"span\",{staticClass:\"text-sm text-slate-600\"},[t._v(\"\\n          \"+t._s(t.$t(\"REPORT.NO_ENOUGH_DATA\"))+\"\\n        \")])],1)],1)],1)})),0)}),[],!1,null,null,null);e.a=O.exports},2974:function(t,e,r){\"use strict\";var n={__name:\"ReportMetricCard\",props:{label:{type:String,required:!0},value:{type:String,required:!0},infoText:{type:String,required:!0},disabled:{type:Boolean,default:!1}},setup:function(t){return{__sfc:!0}}},o=r(8),a=Object(o.a)(n,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e(\"div\",{ref:\"reportMetricContainer\",staticClass:\"m-0 p-4\",class:{\"grayscale pointer-events-none opacity-30\":t.disabled}},[e(\"h3\",{staticClass:\"flex items-center text-sm font-medium m-0 text-slate-800 dark:text-slate-100\"},[e(\"span\",{ref:\"reportMetricLabel\"},[t._v(t._s(t.label))]),t._v(\" \"),e(\"fluent-icon\",{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:t.infoText,expression:\"infoText\"}],ref:\"reportMetricInfo\",staticClass:\"text-slate-500 dark:text-slate-200 my-0 mx-1 mt-0.5\",attrs:{size:\"14\",icon:\"info\"}})],1),t._v(\" \"),e(\"h4\",{ref:\"reportMetricValue\",staticClass:\"text-slate-700 dark:text-slate-100 mb-0 mt-1 font-thin text-3xl\"},[t._v(\"\\n    \"+t._s(t.value)+\"\\n  \")])])}),[],!1,null,null,null);e.a=a.exports},3370:function(t,e,r){\"use strict\";r.r(e);r(36),r(12),r(13),r(9),r(11),r(15),r(16),r(10),r(28);var n=r(32),o=(r(159),r(6)),a=r(2974),s=r(246),i={__name:\"BotMetrics\",props:{filters:{type:Object,required:!0}},setup:function(t){var e=t,r=Object(o.ref)(\"0\"),n=Object(o.ref)(\"0\"),i=Object(o.ref)(\"0\"),c=Object(o.ref)(\"0\"),u=function(){e.filters.to&&e.filters.from&&s.a.getBotMetrics(e.filters).then((function(t){r.value=t.data.conversation_count.toLocaleString(),n.value=t.data.message_count.toLocaleString(),i.value=t.data.resolution_rate.toString(),c.value=t.data.handoff_rate.toString()}))};return Object(o.watch)((function(){return e.filters}),u,{deep:!0}),Object(o.onMounted)(u),{__sfc:!0,props:e,conversationCount:r,messageCount:n,resolutionRate:i,handoffRate:c,formatToPercent:function(t){return t?\"\".concat(t,\"%\"):\"--\"},fetchMetrics:u,ReportMetricCard:a.a}}},c=r(8),u=Object(c.a)(i,(function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e(\"div\",{staticClass:\"flex flex-wrap mx-0 bg-white dark:bg-slate-800 rounded-[4px] p-4 mb-5 border border-solid border-slate-75 dark:border-slate-700\"},[e(r.ReportMetricCard,{staticClass:\"flex-1\",attrs:{label:t.$t(\"BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL\"),\"info-text\":t.$t(\"BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP\"),value:r.conversationCount}}),t._v(\" \"),e(r.ReportMetricCard,{staticClass:\"flex-1\",attrs:{label:t.$t(\"BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL\"),\"info-text\":t.$t(\"BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP\"),value:r.messageCount}}),t._v(\" \"),e(r.ReportMetricCard,{staticClass:\"flex-1\",attrs:{label:t.$t(\"BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL\"),\"info-text\":t.$t(\"BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP\"),value:r.formatToPercent(r.resolutionRate)}}),t._v(\" \"),e(r.ReportMetricCard,{staticClass:\"flex-1\",attrs:{label:t.$t(\"BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL\"),\"info-text\":t.$t(\"BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP\"),value:r.formatToPercent(r.handoffRate)}})],1)}),[],!1,null,null,null).exports,l=r(2956),p=r(2645),f=r(2654),d=r(2829),O=r(94);function m(t,e,r,n,o,a,s){try{var i=t[a](s),c=i.value}catch(u){return void r(u)}i.done?e(c):Promise.resolve(c).then(n,o)}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h={name:\"BotReports\",components:{BotMetrics:u,ReportFilterSelector:l.a,ReportContainer:d.a},mixins:[f.a],data:function(){return{from:0,to:0,groupBy:p.b[1],reportKeys:{BOT_RESOLUTION_COUNT:\"bot_resolutions_count\",BOT_HANDOFF_COUNT:\"bot_handoffs_count\"},businessHours:!1}},computed:y(y({},Object(n.mapGetters)({accountReport:\"getAccountReports\"})),{},{requestPayload:function(){return{from:this.from,to:this.to}}}),methods:{fetchAllData:function(){this.fetchBotSummary(),this.fetchChartData()},fetchBotSummary:function(){try{this.$store.dispatch(\"fetchBotSummary\",this.getRequestPayload())}catch(t){this.showAlert(this.$t(\"REPORT.SUMMARY_FETCHING_FAILED\"))}},fetchChartData:function(){var t=this;Object.keys(this.reportKeys).forEach(function(){var e,r=(e=regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch(\"fetchAccountReport\",y({metric:t.reportKeys[r]},t.getRequestPayload()));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.showAlert(t.$t(\"REPORT.DATA_FETCHING_FAILED\"));case 8:case\"end\":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(t){m(a,n,o,s,i,\"next\",t)}function i(t){m(a,n,o,s,i,\"throw\",t)}s(void 0)}))});return function(t){return r.apply(this,arguments)}}())},getRequestPayload:function(){var t=this.from,e=this.to,r=this.groupBy,n=this.businessHours;return{from:t,to:e,groupBy:null===r||void 0===r?void 0:r.period,businessHours:n}},onFilterChange:function(t){var e=t.from,r=t.to,n=t.groupBy,o=t.businessHours;this.from=e,this.to=r,this.groupBy=n,this.businessHours=o,this.fetchAllData(),this.$track(O.j.FILTER_REPORT,{filterValue:{from:e,to:r,groupBy:n,businessHours:o},reportType:\"bots\"})}}},_=h,v=Object(c.a)(_,(function(){var t=this,e=t._self._c;return e(\"div\",{staticClass:\"flex-1 overflow-auto p-4\"},[e(\"report-filter-selector\",{attrs:{\"show-agents-filter\":!1,\"show-group-by-filter\":!0,\"show-business-hours-switch\":!1},on:{\"filter-change\":t.onFilterChange}}),t._v(\" \"),e(\"bot-metrics\",{attrs:{filters:t.requestPayload}}),t._v(\" \"),e(\"report-container\",{attrs:{\"group-by\":t.groupBy,\"report-keys\":t.reportKeys,\"account-summary-key\":\"getBotSummary\"}})],1)}),[],!1,null,null,null);e.default=v.exports}}]);","name":"js/87-81625dadbac089de9380.chunk.js","map":{"version":3,"names":["window","push","module","__webpack_exports__","__webpack_require__","vuex__WEBPACK_IMPORTED_MODULE_10__","_chatwoot_utils__WEBPACK_IMPORTED_MODULE_11__","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","props","accountSummaryKey","type","String","default","computed","accountReport","accountSummary","this","$store","getters","methods","calculateTrend","previous","diff","Math","round","displayMetric","isAverageMetricType","Number","toLocaleString","displayInfoText","metrics","currentSelection","KEY","total","data","map","item","count","reduce","prev","curr","concat","INFO_TEXT","includes","constants","fromUnixTime","format","utils_esm","reportMixin","ChartElements_ChartStatsvue_type_script_lang_js_","mixins","metric","trendColor","componentNormalizer","reports_ReportContainervue_type_script_lang_js_","components","ChartStats","_vm","_c","_self","staticClass","_v","_s","NAME","trend","class","_e","groupBy","reportKeys","CONVERSATIONS","INCOMING_MESSAGES","OUTGOING_MESSAGES","FIRST_RESPONSE_TIME","RESOLUTION_TIME","RESOLUTION_COUNT","REPLY_TIME","_this","infoText","$t","DESC","TOOLTIP_TEXT","getCollection","_this2","labels","element","_this2$groupBy","_this2$groupBy2","_this2$groupBy3","period","week_date","Date","timestamp","first_day","getDate","getDay","last_day","week_first_date","setDate","week_last_date","datasets","dataset","yAxisID","label","getChartOptions","_this3","tooltips","callbacks","tooltipItem","metricValue","yLabel","conversationCount","index","scales","ReportContainer_component","_l","attrs","isFetching","message","collection","components_ReportMetricCardvue_type_script_setup_true_lang_js_","__name","required","disabled","Boolean","setup","__props","__sfc","component","_setupProxy","ref","directives","name","rawName","expression","size","icon","r","vuex","vue_common","ReportMetricCard","reports","components_BotMetricsvue_type_script_setup_true_lang_js_","filters","messageCount","resolutionRate","handoffRate","fetchMetrics","to","from","getBotMetrics","then","response","conversation_count","message_count","resolution_rate","toString","handoff_rate","deep","formatToPercent","BotMetrics","_setup","FilterSelector","ReportContainer","events","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","BotReportsvue_type_script_lang_js_","ReportFilterSelector","BOT_RESOLUTION_COUNT","BOT_HANDOFF_COUNT","businessHours","requestPayload","fetchAllData","fetchBotSummary","fetchChartData","dispatch","getRequestPayload","_unused","showAlert","fn","_ref","regeneratorRuntime","mark","_callee","wrap","_context","next","t0","stop","self","args","err","undefined","_x","onFilterChange","_ref2","$track","FILTER_REPORT","filterValue","reportType","reports_BotReportsvue_type_script_lang_js_","BotReports_component","on"],"sources":["js/87-81625dadbac089de9380.chunk.js"],"mappings":"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"},"input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[87],{\n\n/***/ 2654:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(56);\n/* harmony import */ var core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(88);\n/* harmony import */ var core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(51);\n/* harmony import */ var core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(75);\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9);\n/* harmony import */ var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(11);\n/* harmony import */ var core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(15);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptor_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(12);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(16);\n/* harmony import */ var core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_get_own_property_descriptors_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(32);\n/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(vuex__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _chatwoot_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(281);\nfunction ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}/* harmony default export */ __webpack_exports__[\"a\"] = ({props:{accountSummaryKey:{type:String,default:'getAccountSummary'}},computed:_objectSpread(_objectSpread({},Object(vuex__WEBPACK_IMPORTED_MODULE_10__[\"mapGetters\"])({accountReport:'getAccountReports'})),{},{accountSummary:function accountSummary(){return this.$store.getters[this.accountSummaryKey];}}),methods:{calculateTrend:function calculateTrend(key){if(!this.accountSummary.previous[key])return 0;var diff=this.accountSummary[key]-this.accountSummary.previous[key];return Math.round(diff/this.accountSummary.previous[key]*100);},displayMetric:function displayMetric(key){if(this.isAverageMetricType(key)){return Object(_chatwoot_utils__WEBPACK_IMPORTED_MODULE_11__[/* formatTime */ \"e\"])(this.accountSummary[key]);}return Number(this.accountSummary[key]||'').toLocaleString();},displayInfoText:function displayInfoText(key){if(this.metrics[this.currentSelection].KEY!==key){return'';}if(this.isAverageMetricType(key)){var total=this.accountReport.data.map(function(item){return item.count;}).reduce(function(prev,curr){return prev+curr;},0);return\"\".concat(this.metrics[this.currentSelection].INFO_TEXT,\" \").concat(total);}return'';},isAverageMetricType:function isAverageMetricType(key){return['avg_first_response_time','avg_resolution_time','reply_time'].includes(key);}}});\n\n/***/ }),\n\n/***/ 2829:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue?vue&type=template&id=0c82c06e&\nvar render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 bg-white dark:bg-slate-800 p-2 border border-slate-100 dark:border-slate-700 rounded-md\"},_vm._l((_vm.metrics),function(metric){return _c('div',{key:metric.KEY,staticClass:\"p-4 rounded-md mb-3\"},[_c('chart-stats',{attrs:{\"metric\":metric,\"account-summary-key\":_vm.accountSummaryKey}}),_vm._v(\" \"),_c('div',{staticClass:\"mt-4 h-72\"},[(_vm.accountReport.isFetching[metric.KEY])?_c('woot-loading-state',{staticClass:\"text-xs\",attrs:{\"message\":_vm.$t('REPORT.LOADING_CHART')}}):_c('div',{staticClass:\"h-72 flex items-center justify-center\"},[(_vm.accountReport.data[metric.KEY].length)?_c('woot-bar',{staticClass:\"h-72 w-full\",attrs:{\"collection\":_vm.getCollection(metric),\"chart-options\":_vm.getChartOptions(metric)}}):_c('span',{staticClass:\"text-sm text-slate-600\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('REPORT.NO_ENOUGH_DATA'))+\"\\n        \")])],1)],1)],1)}),0)\n}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue?vue&type=template&id=0c82c06e&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js\nvar es_object_keys = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js\nvar es_array_map = __webpack_require__(88);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.concat.js\nvar es_array_concat = __webpack_require__(51);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.js\nvar es_symbol = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js\nvar es_array_filter = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptor.js\nvar es_object_get_own_property_descriptor = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptors.js\nvar es_object_get_own_property_descriptors = __webpack_require__(16);\n\n// EXTERNAL MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/constants.js\nvar constants = __webpack_require__(2645);\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/fromUnixTime/index.js\nvar fromUnixTime = __webpack_require__(194);\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/format/index.js + 4 modules\nvar format = __webpack_require__(288);\n\n// EXTERNAL MODULE: ./node_modules/@chatwoot/utils/dist/utils.esm.js + 9 modules\nvar utils_esm = __webpack_require__(281);\n\n// EXTERNAL MODULE: ./app/javascript/dashboard/mixins/reportMixin.js\nvar reportMixin = __webpack_require__(2654);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue?vue&type=template&id=4bfd08f4&\nvar ChartStatsvue_type_template_id_4bfd08f4_render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"text-slate-900 dark:text-slate-100\"},[_c('span',{staticClass:\"text-sm\"},[_vm._v(\"\\n    \"+_vm._s(_vm.metric.NAME)+\"\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"flex items-end\"},[_c('div',{staticClass:\"font-medium text-xl\"},[_vm._v(\"\\n      \"+_vm._s(_vm.displayMetric(_vm.metric.KEY))+\"\\n    \")]),_vm._v(\" \"),(_vm.metric.trend)?_c('div',{staticClass:\"text-xs ml-4 flex items-center mb-0.5\"},[(_vm.metric.trend < 0)?_c('div',{staticClass:\"h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1\",class:_vm.trendColor(_vm.metric.trend, _vm.metric.KEY)}):_c('div',{staticClass:\"h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1\",class:_vm.trendColor(_vm.metric.trend, _vm.metric.KEY)}),_vm._v(\" \"),_c('span',{staticClass:\"font-medium\",class:_vm.trendColor(_vm.metric.trend, _vm.metric.KEY)},[_vm._v(\"\\n        \"+_vm._s(_vm.calculateTrend(_vm.metric.KEY))+\"%\\n      \")])]):_vm._e()])])\n}\nvar ChartStatsvue_type_template_id_4bfd08f4_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue?vue&type=template&id=4bfd08f4&\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue?vue&type=script&lang=js&\n/* harmony default export */ var ChartStatsvue_type_script_lang_js_ = ({mixins:[reportMixin[\"a\" /* default */]],props:{metric:{type:Object,default:function _default(){return{};}}},methods:{trendColor:function trendColor(value,key){if(this.isAverageMetricType(key)){return value>0?'border-red-500 text-red-500':'border-green-500 text-green-500';}return value<0?'border-red-500 text-red-500':'border-green-500 text-green-500';}}});\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue?vue&type=script&lang=js&\n /* harmony default export */ var ChartElements_ChartStatsvue_type_script_lang_js_ = (ChartStatsvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  ChartElements_ChartStatsvue_type_script_lang_js_,\n  ChartStatsvue_type_template_id_4bfd08f4_render,\n  ChartStatsvue_type_template_id_4bfd08f4_staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var ChartStats = (component.exports);\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue?vue&type=script&lang=js&\nfunction ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}/* harmony default export */ var ReportContainervue_type_script_lang_js_ = ({components:{ChartStats:ChartStats},mixins:[reportMixin[\"a\" /* default */]],props:{groupBy:{type:Object,default:function _default(){return{};}},reportKeys:{type:Object,default:function _default(){return{CONVERSATIONS:'conversations_count',INCOMING_MESSAGES:'incoming_messages_count',OUTGOING_MESSAGES:'outgoing_messages_count',FIRST_RESPONSE_TIME:'avg_first_response_time',RESOLUTION_TIME:'avg_resolution_time',RESOLUTION_COUNT:'resolutions_count',REPLY_TIME:'reply_time'};}}},computed:{metrics:function metrics(){var _this=this;var reportKeys=Object.keys(this.reportKeys);var infoText={FIRST_RESPONSE_TIME:this.$t(\"REPORT.METRICS.FIRST_RESPONSE_TIME.INFO_TEXT\"),RESOLUTION_TIME:this.$t(\"REPORT.METRICS.RESOLUTION_TIME.INFO_TEXT\")};return reportKeys.map(function(key){return{NAME:_this.$t(\"REPORT.METRICS.\".concat(key,\".NAME\")),KEY:_this.reportKeys[key],DESC:_this.$t(\"REPORT.METRICS.\".concat(key,\".DESC\")),INFO_TEXT:infoText[key],TOOLTIP_TEXT:\"REPORT.METRICS.\".concat(key,\".TOOLTIP_TEXT\"),trend:_this.calculateTrend(_this.reportKeys[key])};});}},methods:{getCollection:function getCollection(metric){var _this2=this;if(!this.accountReport.data[metric.KEY]){return{};}var data=this.accountReport.data[metric.KEY];var labels=data.map(function(element){var _this2$groupBy,_this2$groupBy2,_this2$groupBy3;if(((_this2$groupBy=_this2.groupBy)===null||_this2$groupBy===void 0?void 0:_this2$groupBy.period)===constants[\"b\" /* GROUP_BY_FILTER */][2].period){var week_date=new Date(Object(fromUnixTime[\"a\" /* default */])(element.timestamp));var first_day=week_date.getDate()-week_date.getDay();var last_day=first_day+6;var week_first_date=new Date(week_date.setDate(first_day));var week_last_date=new Date(week_date.setDate(last_day));return\"\".concat(Object(format[\"a\" /* default */])(week_first_date,'dd-MMM'),\" - \").concat(Object(format[\"a\" /* default */])(week_last_date,'dd-MMM'));}if(((_this2$groupBy2=_this2.groupBy)===null||_this2$groupBy2===void 0?void 0:_this2$groupBy2.period)===constants[\"b\" /* GROUP_BY_FILTER */][3].period){return Object(format[\"a\" /* default */])(Object(fromUnixTime[\"a\" /* default */])(element.timestamp),'MMM-yyyy');}if(((_this2$groupBy3=_this2.groupBy)===null||_this2$groupBy3===void 0?void 0:_this2$groupBy3.period)===constants[\"b\" /* GROUP_BY_FILTER */][4].period){return Object(format[\"a\" /* default */])(Object(fromUnixTime[\"a\" /* default */])(element.timestamp),'yyyy');}return Object(format[\"a\" /* default */])(Object(fromUnixTime[\"a\" /* default */])(element.timestamp),'dd-MMM');});var datasets=constants[\"d\" /* METRIC_CHART */][metric.KEY].datasets.map(function(dataset){switch(dataset.type){case'bar':return _objectSpread(_objectSpread({},dataset),{},{yAxisID:'y-left',label:metric.NAME,data:data.map(function(element){return element.value;})});case'line':return _objectSpread(_objectSpread({},dataset),{},{yAxisID:'y-right',label:_this2.metrics[0].NAME,data:data.map(function(element){return element.count;})});default:return dataset;}});return{labels:labels,datasets:datasets};},getChartOptions:function getChartOptions(metric){var _this3=this;var tooltips={};if(this.isAverageMetricType(metric.KEY)){tooltips.callbacks={label:function label(tooltipItem){return _this3.$t(metric.TOOLTIP_TEXT,{metricValue:Object(utils_esm[\"e\" /* formatTime */])(tooltipItem.yLabel),conversationCount:_this3.accountReport.data[metric.KEY][tooltipItem.index].count});}};}return{scales:constants[\"d\" /* METRIC_CHART */][metric.KEY].scales,tooltips:tooltips};}}});\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue?vue&type=script&lang=js&\n /* harmony default export */ var reports_ReportContainervue_type_script_lang_js_ = (ReportContainervue_type_script_lang_js_); \n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue\n\n\n\n\n\n/* normalize component */\n\nvar ReportContainer_component = Object(componentNormalizer[\"a\" /* default */])(\n  reports_ReportContainervue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var ReportContainer = __webpack_exports__[\"a\"] = (ReportContainer_component.exports);\n\n/***/ }),\n\n/***/ 2974:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue?vue&type=template&id=1515d57f&\nvar render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{ref:\"reportMetricContainer\",staticClass:\"m-0 p-4\",class:{\n    'grayscale pointer-events-none opacity-30': _vm.disabled,\n  }},[_c('h3',{staticClass:\"flex items-center text-sm font-medium m-0 text-slate-800 dark:text-slate-100\"},[_c('span',{ref:\"reportMetricLabel\"},[_vm._v(_vm._s(_vm.label))]),_vm._v(\" \"),_c('fluent-icon',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.infoText),expression:\"infoText\"}],ref:\"reportMetricInfo\",staticClass:\"text-slate-500 dark:text-slate-200 my-0 mx-1 mt-0.5\",attrs:{\"size\":\"14\",\"icon\":\"info\"}})],1),_vm._v(\" \"),_c('h4',{ref:\"reportMetricValue\",staticClass:\"text-slate-700 dark:text-slate-100 mb-0 mt-1 font-thin text-3xl\"},[_vm._v(\"\\n    \"+_vm._s(_vm.value)+\"\\n  \")])])\n}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue?vue&type=template&id=1515d57f&\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue?vue&type=script&setup=true&lang=js&\n/* harmony default export */ var ReportMetricCardvue_type_script_setup_true_lang_js_ = ({__name:'ReportMetricCard',props:{label:{type:String,required:true},value:{type:String,required:true},infoText:{type:String,required:true},disabled:{type:Boolean,default:false}},setup:function setup(__props){return{__sfc:true};}});\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue?vue&type=script&setup=true&lang=js&\n /* harmony default export */ var components_ReportMetricCardvue_type_script_setup_true_lang_js_ = (ReportMetricCardvue_type_script_setup_true_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  components_ReportMetricCardvue_type_script_setup_true_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var ReportMetricCard = __webpack_exports__[\"a\"] = (component.exports);\n\n/***/ }),\n\n/***/ 3370:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue?vue&type=template&id=a143ac74&\nvar render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex-1 overflow-auto p-4\"},[_c('report-filter-selector',{attrs:{\"show-agents-filter\":false,\"show-group-by-filter\":true,\"show-business-hours-switch\":false},on:{\"filter-change\":_vm.onFilterChange}}),_vm._v(\" \"),_c('bot-metrics',{attrs:{\"filters\":_vm.requestPayload}}),_vm._v(\" \"),_c('report-container',{attrs:{\"group-by\":_vm.groupBy,\"report-keys\":_vm.reportKeys,\"account-summary-key\":'getBotSummary'}})],1)\n}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue?vue&type=template&id=a143ac74&\n\n// EXTERNAL MODULE: ./node_modules/regenerator-runtime/runtime.js\nvar runtime = __webpack_require__(36);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js\nvar es_object_keys = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.js\nvar es_symbol = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js\nvar es_array_filter = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptor.js\nvar es_object_get_own_property_descriptor = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.get-own-property-descriptors.js\nvar es_object_get_own_property_descriptors = __webpack_require__(16);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.js\nvar es_promise = __webpack_require__(28);\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.js\nvar vuex = __webpack_require__(32);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue?vue&type=template&id=44ad0ea8&\nvar BotMetricsvue_type_template_id_44ad0ea8_render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"flex flex-wrap mx-0 bg-white dark:bg-slate-800 rounded-[4px] p-4 mb-5 border border-solid border-slate-75 dark:border-slate-700\"},[_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP'),\"value\":_setup.conversationCount}}),_vm._v(\" \"),_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP'),\"value\":_setup.messageCount}}),_vm._v(\" \"),_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP'),\"value\":_setup.formatToPercent(_setup.resolutionRate)}}),_vm._v(\" \"),_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP'),\"value\":_setup.formatToPercent(_setup.handoffRate)}})],1)\n}\nvar BotMetricsvue_type_template_id_44ad0ea8_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue?vue&type=template&id=44ad0ea8&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js\nvar es_regexp_to_string = __webpack_require__(159);\n\n// EXTERNAL MODULE: ./node_modules/vue/dist/vue.common.js\nvar vue_common = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue + 4 modules\nvar ReportMetricCard = __webpack_require__(2974);\n\n// EXTERNAL MODULE: ./app/javascript/dashboard/api/reports.js\nvar reports = __webpack_require__(246);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue?vue&type=script&setup=true&lang=js&\n/* harmony default export */ var BotMetricsvue_type_script_setup_true_lang_js_ = ({__name:'BotMetrics',props:{filters:{type:Object,required:true}},setup:function setup(__props){var props=__props;var conversationCount=Object(vue_common[\"ref\"])('0');var messageCount=Object(vue_common[\"ref\"])('0');var resolutionRate=Object(vue_common[\"ref\"])('0');var handoffRate=Object(vue_common[\"ref\"])('0');var formatToPercent=function formatToPercent(value){return value?\"\".concat(value,\"%\"):'--';};var fetchMetrics=function fetchMetrics(){if(!props.filters.to||!props.filters.from){return;}reports[\"a\" /* default */].getBotMetrics(props.filters).then(function(response){conversationCount.value=response.data.conversation_count.toLocaleString();messageCount.value=response.data.message_count.toLocaleString();resolutionRate.value=response.data.resolution_rate.toString();handoffRate.value=response.data.handoff_rate.toString();});};Object(vue_common[\"watch\"])(function(){return props.filters;},fetchMetrics,{deep:true});Object(vue_common[\"onMounted\"])(fetchMetrics);return{__sfc:true,props:props,conversationCount:conversationCount,messageCount:messageCount,resolutionRate:resolutionRate,handoffRate:handoffRate,formatToPercent:formatToPercent,fetchMetrics:fetchMetrics,ReportMetricCard:ReportMetricCard[\"a\" /* default */]};}});\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue?vue&type=script&setup=true&lang=js&\n /* harmony default export */ var components_BotMetricsvue_type_script_setup_true_lang_js_ = (BotMetricsvue_type_script_setup_true_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  components_BotMetricsvue_type_script_setup_true_lang_js_,\n  BotMetricsvue_type_template_id_44ad0ea8_render,\n  BotMetricsvue_type_template_id_44ad0ea8_staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var BotMetrics = (component.exports);\n// EXTERNAL MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/components/FilterSelector.vue + 39 modules\nvar FilterSelector = __webpack_require__(2956);\n\n// EXTERNAL MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/constants.js\nvar constants = __webpack_require__(2645);\n\n// EXTERNAL MODULE: ./app/javascript/dashboard/mixins/reportMixin.js\nvar reportMixin = __webpack_require__(2654);\n\n// EXTERNAL MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue + 9 modules\nvar ReportContainer = __webpack_require__(2829);\n\n// EXTERNAL MODULE: ./app/javascript/dashboard/helper/AnalyticsHelper/events.js\nvar events = __webpack_require__(94);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue?vue&type=script&lang=js&\nfunction asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err);}_next(undefined);});};}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}/* harmony default export */ var BotReportsvue_type_script_lang_js_ = ({name:'BotReports',components:{BotMetrics:BotMetrics,ReportFilterSelector:FilterSelector[\"a\" /* default */],ReportContainer:ReportContainer[\"a\" /* default */]},mixins:[reportMixin[\"a\" /* default */]],data:function data(){return{from:0,to:0,groupBy:constants[\"b\" /* GROUP_BY_FILTER */][1],reportKeys:{BOT_RESOLUTION_COUNT:'bot_resolutions_count',BOT_HANDOFF_COUNT:'bot_handoffs_count'},businessHours:false};},computed:_objectSpread(_objectSpread({},Object(vuex[\"mapGetters\"])({accountReport:'getAccountReports'})),{},{requestPayload:function requestPayload(){return{from:this.from,to:this.to};}}),methods:{fetchAllData:function fetchAllData(){this.fetchBotSummary();this.fetchChartData();},fetchBotSummary:function fetchBotSummary(){try{this.$store.dispatch('fetchBotSummary',this.getRequestPayload());}catch(_unused){this.showAlert(this.$t('REPORT.SUMMARY_FETCHING_FAILED'));}},fetchChartData:function fetchChartData(){var _this=this;Object.keys(this.reportKeys).forEach(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(key){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _this.$store.dispatch('fetchAccountReport',_objectSpread({metric:_this.reportKeys[key]},_this.getRequestPayload()));case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);_this.showAlert(_this.$t('REPORT.DATA_FETCHING_FAILED'));case 8:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function(_x){return _ref.apply(this,arguments);};}());},getRequestPayload:function getRequestPayload(){var from=this.from,to=this.to,groupBy=this.groupBy,businessHours=this.businessHours;return{from:from,to:to,groupBy:groupBy===null||groupBy===void 0?void 0:groupBy.period,businessHours:businessHours};},onFilterChange:function onFilterChange(_ref2){var from=_ref2.from,to=_ref2.to,groupBy=_ref2.groupBy,businessHours=_ref2.businessHours;this.from=from;this.to=to;this.groupBy=groupBy;this.businessHours=businessHours;this.fetchAllData();this.$track(events[\"j\" /* REPORTS_EVENTS */].FILTER_REPORT,{filterValue:{from:from,to:to,groupBy:groupBy,businessHours:businessHours},reportType:'bots'});}}});\n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue?vue&type=script&lang=js&\n /* harmony default export */ var reports_BotReportsvue_type_script_lang_js_ = (BotReportsvue_type_script_lang_js_); \n// CONCATENATED MODULE: ./app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue\n\n\n\n\n\n/* normalize component */\n\nvar BotReports_component = Object(componentNormalizer[\"a\" /* default */])(\n  reports_BotReportsvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var BotReports = __webpack_exports__[\"default\"] = (BotReports_component.exports);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/home/chatwoot/chatwoot/app/javascript/dashboard/mixins/reportMixin.js","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue?vue&type=template&id=0c82c06e&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue?vue&type=template&id=4bfd08f4&","app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue?vue&type=script&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/components/ChartElements/ChartStats.vue","app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue?vue&type=script&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/ReportContainer.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue?vue&type=template&id=1515d57f&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue?vue&type=script&setup=true&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/components/ReportMetricCard.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue?vue&type=template&id=a143ac74&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue?vue&type=template&id=44ad0ea8&","BotMetrics.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue?vue&type=script&setup=true&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/components/BotMetrics.vue","app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue?vue&type=script&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/dashboard/routes/dashboard/settings/reports/BotReports.vue"],"names":["props","accountSummaryKey","type","String","default","computed","mapGetters","accountReport","accountSummary","$store","getters","methods","calculateTrend","key","previous","diff","Math","round","displayMetric","isAverageMetricType","formatTime","Number","toLocaleString","displayInfoText","metrics","currentSelection","KEY","total","data","map","item","count","reduce","prev","curr","INFO_TEXT","includes"],"mappings":"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","file":"x","sourcesContent":["import { mapGetters } from 'vuex';\nimport { formatTime } from '@chatwoot/utils';\n\nexport default {\n  props: {\n    accountSummaryKey: {\n      type: String,\n      default: 'getAccountSummary',\n    },\n  },\n  computed: {\n    ...mapGetters({\n      accountReport: 'getAccountReports',\n    }),\n    accountSummary() {\n      return this.$store.getters[this.accountSummaryKey];\n    },\n  },\n  methods: {\n    calculateTrend(key) {\n      if (!this.accountSummary.previous[key]) return 0;\n      const diff = this.accountSummary[key] - this.accountSummary.previous[key];\n      return Math.round((diff / this.accountSummary.previous[key]) * 100);\n    },\n    displayMetric(key) {\n      if (this.isAverageMetricType(key)) {\n        return formatTime(this.accountSummary[key]);\n      }\n      return Number(this.accountSummary[key] || '').toLocaleString();\n    },\n    displayInfoText(key) {\n      if (this.metrics[this.currentSelection].KEY !== key) {\n        return '';\n      }\n      if (this.isAverageMetricType(key)) {\n        const total = this.accountReport.data\n          .map(item => item.count)\n          .reduce((prev, curr) => prev + curr, 0);\n        return `${this.metrics[this.currentSelection].INFO_TEXT} ${total}`;\n      }\n      return '';\n    },\n    isAverageMetricType(key) {\n      return [\n        'avg_first_response_time',\n        'avg_resolution_time',\n        'reply_time',\n      ].includes(key);\n    },\n  },\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 bg-white dark:bg-slate-800 p-2 border border-slate-100 dark:border-slate-700 rounded-md\"},_vm._l((_vm.metrics),function(metric){return _c('div',{key:metric.KEY,staticClass:\"p-4 rounded-md mb-3\"},[_c('chart-stats',{attrs:{\"metric\":metric,\"account-summary-key\":_vm.accountSummaryKey}}),_vm._v(\" \"),_c('div',{staticClass:\"mt-4 h-72\"},[(_vm.accountReport.isFetching[metric.KEY])?_c('woot-loading-state',{staticClass:\"text-xs\",attrs:{\"message\":_vm.$t('REPORT.LOADING_CHART')}}):_c('div',{staticClass:\"h-72 flex items-center justify-center\"},[(_vm.accountReport.data[metric.KEY].length)?_c('woot-bar',{staticClass:\"h-72 w-full\",attrs:{\"collection\":_vm.getCollection(metric),\"chart-options\":_vm.getChartOptions(metric)}}):_c('span',{staticClass:\"text-sm text-slate-600\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$t('REPORT.NO_ENOUGH_DATA'))+\"\\n        \")])],1)],1)],1)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"text-slate-900 dark:text-slate-100\"},[_c('span',{staticClass:\"text-sm\"},[_vm._v(\"\\n    \"+_vm._s(_vm.metric.NAME)+\"\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"flex items-end\"},[_c('div',{staticClass:\"font-medium text-xl\"},[_vm._v(\"\\n      \"+_vm._s(_vm.displayMetric(_vm.metric.KEY))+\"\\n    \")]),_vm._v(\" \"),(_vm.metric.trend)?_c('div',{staticClass:\"text-xs ml-4 flex items-center mb-0.5\"},[(_vm.metric.trend < 0)?_c('div',{staticClass:\"h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1\",class:_vm.trendColor(_vm.metric.trend, _vm.metric.KEY)}):_c('div',{staticClass:\"h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1\",class:_vm.trendColor(_vm.metric.trend, _vm.metric.KEY)}),_vm._v(\" \"),_c('span',{staticClass:\"font-medium\",class:_vm.trendColor(_vm.metric.trend, _vm.metric.KEY)},[_vm._v(\"\\n        \"+_vm._s(_vm.calculateTrend(_vm.metric.KEY))+\"%\\n      \")])]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"text-slate-900 dark:text-slate-100\">\n    <span class=\"text-sm\">\n      {{ metric.NAME }}\n    </span>\n    <div class=\"flex items-end\">\n      <div class=\"font-medium text-xl\">\n        {{ displayMetric(metric.KEY) }}\n      </div>\n      <div v-if=\"metric.trend\" class=\"text-xs ml-4 flex items-center mb-0.5\">\n        <div\n          v-if=\"metric.trend < 0\"\n          class=\"h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1\"\n          :class=\"trendColor(metric.trend, metric.KEY)\"\n        />\n        <div\n          v-else\n          class=\"h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1\"\n          :class=\"trendColor(metric.trend, metric.KEY)\"\n        />\n        <span class=\"font-medium\" :class=\"trendColor(metric.trend, metric.KEY)\">\n          {{ calculateTrend(metric.KEY) }}%\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport reportMixin from 'dashboard/mixins/reportMixin';\nexport default {\n  mixins: [reportMixin],\n  props: {\n    metric: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  methods: {\n    trendColor(value, key) {\n      if (this.isAverageMetricType(key)) {\n        return value > 0\n          ? 'border-red-500 text-red-500'\n          : 'border-green-500 text-green-500';\n      }\n      return value < 0\n        ? 'border-red-500 text-red-500'\n        : 'border-green-500 text-green-500';\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartStats.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartStats.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartStats.vue?vue&type=template&id=4bfd08f4&\"\nimport script from \"./ChartStats.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartStats.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 bg-white dark:bg-slate-800 p-2 border border-slate-100 dark:border-slate-700 rounded-md\"\n  >\n    <div\n      v-for=\"metric in metrics\"\n      :key=\"metric.KEY\"\n      class=\"p-4 rounded-md mb-3\"\n    >\n      <chart-stats :metric=\"metric\" :account-summary-key=\"accountSummaryKey\" />\n      <div class=\"mt-4 h-72\">\n        <woot-loading-state\n          v-if=\"accountReport.isFetching[metric.KEY]\"\n          class=\"text-xs\"\n          :message=\"$t('REPORT.LOADING_CHART')\"\n        />\n        <div v-else class=\"h-72 flex items-center justify-center\">\n          <woot-bar\n            v-if=\"accountReport.data[metric.KEY].length\"\n            :collection=\"getCollection(metric)\"\n            :chart-options=\"getChartOptions(metric)\"\n            class=\"h-72 w-full\"\n          />\n          <span v-else class=\"text-sm text-slate-600\">\n            {{ $t('REPORT.NO_ENOUGH_DATA') }}\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { GROUP_BY_FILTER, METRIC_CHART } from './constants';\nimport fromUnixTime from 'date-fns/fromUnixTime';\nimport format from 'date-fns/format';\nimport { formatTime } from '@chatwoot/utils';\nimport reportMixin from 'dashboard/mixins/reportMixin';\nimport ChartStats from './components/ChartElements/ChartStats.vue';\n\nexport default {\n  components: { ChartStats },\n  mixins: [reportMixin],\n  props: {\n    groupBy: {\n      type: Object,\n      default: () => ({}),\n    },\n    reportKeys: {\n      type: Object,\n      default: () => ({\n        CONVERSATIONS: 'conversations_count',\n        INCOMING_MESSAGES: 'incoming_messages_count',\n        OUTGOING_MESSAGES: 'outgoing_messages_count',\n        FIRST_RESPONSE_TIME: 'avg_first_response_time',\n        RESOLUTION_TIME: 'avg_resolution_time',\n        RESOLUTION_COUNT: 'resolutions_count',\n        REPLY_TIME: 'reply_time',\n      }),\n    },\n  },\n  computed: {\n    metrics() {\n      const reportKeys = Object.keys(this.reportKeys);\n      const infoText = {\n        FIRST_RESPONSE_TIME: this.$t(\n          `REPORT.METRICS.FIRST_RESPONSE_TIME.INFO_TEXT`\n        ),\n        RESOLUTION_TIME: this.$t(`REPORT.METRICS.RESOLUTION_TIME.INFO_TEXT`),\n      };\n      return reportKeys.map(key => ({\n        NAME: this.$t(`REPORT.METRICS.${key}.NAME`),\n        KEY: this.reportKeys[key],\n        DESC: this.$t(`REPORT.METRICS.${key}.DESC`),\n        INFO_TEXT: infoText[key],\n        TOOLTIP_TEXT: `REPORT.METRICS.${key}.TOOLTIP_TEXT`,\n        trend: this.calculateTrend(this.reportKeys[key]),\n      }));\n    },\n  },\n  methods: {\n    getCollection(metric) {\n      if (!this.accountReport.data[metric.KEY]) {\n        return {};\n      }\n      const data = this.accountReport.data[metric.KEY];\n      const labels = data.map(element => {\n        if (this.groupBy?.period === GROUP_BY_FILTER[2].period) {\n          let week_date = new Date(fromUnixTime(element.timestamp));\n          const first_day = week_date.getDate() - week_date.getDay();\n          const last_day = first_day + 6;\n          const week_first_date = new Date(week_date.setDate(first_day));\n          const week_last_date = new Date(week_date.setDate(last_day));\n          return `${format(week_first_date, 'dd-MMM')} - ${format(\n            week_last_date,\n            'dd-MMM'\n          )}`;\n        }\n        if (this.groupBy?.period === GROUP_BY_FILTER[3].period) {\n          return format(fromUnixTime(element.timestamp), 'MMM-yyyy');\n        }\n        if (this.groupBy?.period === GROUP_BY_FILTER[4].period) {\n          return format(fromUnixTime(element.timestamp), 'yyyy');\n        }\n        return format(fromUnixTime(element.timestamp), 'dd-MMM');\n      });\n      const datasets = METRIC_CHART[metric.KEY].datasets.map(dataset => {\n        switch (dataset.type) {\n          case 'bar':\n            return {\n              ...dataset,\n              yAxisID: 'y-left',\n              label: metric.NAME,\n              data: data.map(element => element.value),\n            };\n          case 'line':\n            return {\n              ...dataset,\n              yAxisID: 'y-right',\n              label: this.metrics[0].NAME,\n              data: data.map(element => element.count),\n            };\n          default:\n            return dataset;\n        }\n      });\n      return {\n        labels,\n        datasets,\n      };\n    },\n    getChartOptions(metric) {\n      let tooltips = {};\n      if (this.isAverageMetricType(metric.KEY)) {\n        tooltips.callbacks = {\n          label: tooltipItem => {\n            return this.$t(metric.TOOLTIP_TEXT, {\n              metricValue: formatTime(tooltipItem.yLabel),\n              conversationCount:\n                this.accountReport.data[metric.KEY][tooltipItem.index].count,\n            });\n          },\n        };\n      }\n      return {\n        scales: METRIC_CHART[metric.KEY].scales,\n        tooltips: tooltips,\n      };\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReportContainer.vue?vue&type=template&id=0c82c06e&\"\nimport script from \"./ReportContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./ReportContainer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{ref:\"reportMetricContainer\",staticClass:\"m-0 p-4\",class:{\n    'grayscale pointer-events-none opacity-30': _vm.disabled,\n  }},[_c('h3',{staticClass:\"flex items-center text-sm font-medium m-0 text-slate-800 dark:text-slate-100\"},[_c('span',{ref:\"reportMetricLabel\"},[_vm._v(_vm._s(_vm.label))]),_vm._v(\" \"),_c('fluent-icon',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.infoText),expression:\"infoText\"}],ref:\"reportMetricInfo\",staticClass:\"text-slate-500 dark:text-slate-200 my-0 mx-1 mt-0.5\",attrs:{\"size\":\"14\",\"icon\":\"info\"}})],1),_vm._v(\" \"),_c('h4',{ref:\"reportMetricValue\",staticClass:\"text-slate-700 dark:text-slate-100 mb-0 mt-1 font-thin text-3xl\"},[_vm._v(\"\\n    \"+_vm._s(_vm.value)+\"\\n  \")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportMetricCard.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportMetricCard.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./ReportMetricCard.vue?vue&type=template&id=1515d57f&\"\nimport script from \"./ReportMetricCard.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./ReportMetricCard.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex-1 overflow-auto p-4\"},[_c('report-filter-selector',{attrs:{\"show-agents-filter\":false,\"show-group-by-filter\":true,\"show-business-hours-switch\":false},on:{\"filter-change\":_vm.onFilterChange}}),_vm._v(\" \"),_c('bot-metrics',{attrs:{\"filters\":_vm.requestPayload}}),_vm._v(\" \"),_c('report-container',{attrs:{\"group-by\":_vm.groupBy,\"report-keys\":_vm.reportKeys,\"account-summary-key\":'getBotSummary'}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"flex flex-wrap mx-0 bg-white dark:bg-slate-800 rounded-[4px] p-4 mb-5 border border-solid border-slate-75 dark:border-slate-700\"},[_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP'),\"value\":_setup.conversationCount}}),_vm._v(\" \"),_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP'),\"value\":_setup.messageCount}}),_vm._v(\" \"),_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP'),\"value\":_setup.formatToPercent(_setup.resolutionRate)}}),_vm._v(\" \"),_c(_setup.ReportMetricCard,{staticClass:\"flex-1\",attrs:{\"label\":_vm.$t('BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL'),\"info-text\":_vm.$t('BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP'),\"value\":_setup.formatToPercent(_setup.handoffRate)}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script setup>\nimport { ref, watch, onMounted } from 'vue';\nimport ReportMetricCard from './ReportMetricCard.vue';\nimport ReportsAPI from 'dashboard/api/reports';\n\nconst props = defineProps({\n  filters: {\n    type: Object,\n    required: true,\n  },\n});\n\nconst conversationCount = ref('0');\nconst messageCount = ref('0');\nconst resolutionRate = ref('0');\nconst handoffRate = ref('0');\n\nconst formatToPercent = value => {\n  return value ? `${value}%` : '--';\n};\n\nconst fetchMetrics = () => {\n  if (!props.filters.to || !props.filters.from) {\n    return;\n  }\n  ReportsAPI.getBotMetrics(props.filters).then(response => {\n    conversationCount.value = response.data.conversation_count.toLocaleString();\n    messageCount.value = response.data.message_count.toLocaleString();\n    resolutionRate.value = response.data.resolution_rate.toString();\n    handoffRate.value = response.data.handoff_rate.toString();\n  });\n};\n\nwatch(() => props.filters, fetchMetrics, { deep: true });\n\nonMounted(fetchMetrics);\n</script>\n\n<template>\n  <div\n    class=\"flex flex-wrap mx-0 bg-white dark:bg-slate-800 rounded-[4px] p-4 mb-5 border border-solid border-slate-75 dark:border-slate-700\"\n  >\n    <report-metric-card\n      :label=\"$t('BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.LABEL')\"\n      :info-text=\"$t('BOT_REPORTS.METRIC.TOTAL_CONVERSATIONS.TOOLTIP')\"\n      :value=\"conversationCount\"\n      class=\"flex-1\"\n    />\n    <report-metric-card\n      :label=\"$t('BOT_REPORTS.METRIC.TOTAL_RESPONSES.LABEL')\"\n      :info-text=\"$t('BOT_REPORTS.METRIC.TOTAL_RESPONSES.TOOLTIP')\"\n      :value=\"messageCount\"\n      class=\"flex-1\"\n    />\n    <report-metric-card\n      :label=\"$t('BOT_REPORTS.METRIC.RESOLUTION_RATE.LABEL')\"\n      :info-text=\"$t('BOT_REPORTS.METRIC.RESOLUTION_RATE.TOOLTIP')\"\n      :value=\"formatToPercent(resolutionRate)\"\n      class=\"flex-1\"\n    />\n    <report-metric-card\n      :label=\"$t('BOT_REPORTS.METRIC.HANDOFF_RATE.LABEL')\"\n      :info-text=\"$t('BOT_REPORTS.METRIC.HANDOFF_RATE.TOOLTIP')\"\n      :value=\"formatToPercent(handoffRate)\"\n      class=\"flex-1\"\n    />\n  </div>\n</template>\n","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMetrics.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMetrics.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./BotMetrics.vue?vue&type=template&id=44ad0ea8&\"\nimport script from \"./BotMetrics.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./BotMetrics.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"flex-1 overflow-auto p-4\">\n    <report-filter-selector\n      :show-agents-filter=\"false\"\n      :show-group-by-filter=\"true\"\n      :show-business-hours-switch=\"false\"\n      @filter-change=\"onFilterChange\"\n    />\n\n    <bot-metrics :filters=\"requestPayload\" />\n    <report-container\n      :group-by=\"groupBy\"\n      :report-keys=\"reportKeys\"\n      :account-summary-key=\"'getBotSummary'\"\n    />\n  </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex';\nimport BotMetrics from './components/BotMetrics.vue';\nimport ReportFilterSelector from './components/FilterSelector.vue';\nimport { GROUP_BY_FILTER } from './constants';\nimport reportMixin from 'dashboard/mixins/reportMixin';\nimport ReportContainer from './ReportContainer.vue';\nimport { REPORTS_EVENTS } from '../../../../helper/AnalyticsHelper/events';\n\nexport default {\n  name: 'BotReports',\n  components: {\n    BotMetrics,\n    ReportFilterSelector,\n    ReportContainer,\n  },\n  mixins: [reportMixin],\n  data() {\n    return {\n      from: 0,\n      to: 0,\n      groupBy: GROUP_BY_FILTER[1],\n      reportKeys: {\n        BOT_RESOLUTION_COUNT: 'bot_resolutions_count',\n        BOT_HANDOFF_COUNT: 'bot_handoffs_count',\n      },\n      businessHours: false,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      accountReport: 'getAccountReports',\n    }),\n    requestPayload() {\n      return {\n        from: this.from,\n        to: this.to,\n      };\n    },\n  },\n  methods: {\n    fetchAllData() {\n      this.fetchBotSummary();\n      this.fetchChartData();\n    },\n    fetchBotSummary() {\n      try {\n        this.$store.dispatch('fetchBotSummary', this.getRequestPayload());\n      } catch {\n        this.showAlert(this.$t('REPORT.SUMMARY_FETCHING_FAILED'));\n      }\n    },\n    fetchChartData() {\n      Object.keys(this.reportKeys).forEach(async key => {\n        try {\n          await this.$store.dispatch('fetchAccountReport', {\n            metric: this.reportKeys[key],\n            ...this.getRequestPayload(),\n          });\n        } catch {\n          this.showAlert(this.$t('REPORT.DATA_FETCHING_FAILED'));\n        }\n      });\n    },\n    getRequestPayload() {\n      const { from, to, groupBy, businessHours } = this;\n\n      return {\n        from,\n        to,\n        groupBy: groupBy?.period,\n        businessHours,\n      };\n    },\n    onFilterChange({ from, to, groupBy, businessHours }) {\n      this.from = from;\n      this.to = to;\n      this.groupBy = groupBy;\n      this.businessHours = businessHours;\n      this.fetchAllData();\n\n      this.$track(REPORTS_EVENTS.FILTER_REPORT, {\n        filterValue: { from, to, groupBy, businessHours },\n        reportType: 'bots',\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotReports.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotReports.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BotReports.vue?vue&type=template&id=a143ac74&\"\nimport script from \"./BotReports.vue?vue&type=script&lang=js&\"\nexport * from \"./BotReports.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"]}}