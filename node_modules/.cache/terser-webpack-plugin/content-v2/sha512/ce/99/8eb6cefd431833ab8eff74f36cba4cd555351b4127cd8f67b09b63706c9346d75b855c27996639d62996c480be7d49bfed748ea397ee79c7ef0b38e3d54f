{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1916:function(e,t,n){\"use strict\";n(69),n(52),n(70),n(1915),n(159),n(22),n(10),n(23),n(25),n(207),n(12);var s=n(1918),r=n.n(s),a=(n(368),/mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm);function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function i(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var u=function(e){e.children.forEach((function(e){\"image\"===e.type&&function(e){var t=e.attrGet(\"src\");if(t){var n=new URL(t).searchParams.get(\"cw_image_height\");n&&e.attrSet(\"style\",\"height: \".concat(n,\";\"))}}(e)}))},c=n(1809)({html:!1,xhtmlOut:!0,breaks:!0,langPrefix:\"language-\",linkify:!0,typographer:!0,quotes:\"\\u201c\\u201d\\u2018\\u2019\",maxNesting:20}).use((function(e){e.renderer.rules.mention=function(e,t){return'<span class=\"prosemirror-mention-node\">'.concat(e[t].content,\"</span>\")},e.inline.ruler.before(\"link\",\"mention\",(function(e,t){var n,s,r,o,i,u,c=\"\",l=e.posMax;return 91===e.src.charCodeAt(e.pos)&&(r=e.pos+1,!((s=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)&&(n=e.src.slice(r,s),(o=s+1)<l&&40===e.src.charCodeAt(o)&&(o+=1,(i=e.md.helpers.parseLinkDestination(e.src,o,e.posMax)).ok&&(c=e.md.normalizeLink(i.str),e.md.validateLink(c)?o=i.pos:c=\"\"),o+=1),!!c.match(new RegExp(a))&&(t||(e.pos=r,e.posMax=s,(u=e.push(\"mention\",\"\")).href=c,u.content=n),e.pos=o,e.posMax=l,!0)))}))})).use((function(e){e.core.ruler.after(\"inline\",\"add-image-height\",(function(e){e.tokens.forEach((function(e){\"inline\"===e.type&&u(e)}))}))})).use(r.a,{attrs:{class:\"link\",rel:\"noreferrer noopener nofollow\",target:\"_blank\"}}),l=/(^|[^@\\w])@(\\w{1,15})\\b/g,d=/(^|\\s)#(\\w+)/g,f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(this,e),this.message=t||\"\",this.isAPrivateNote=s,this.isATweet=n}var t,n,s;return t=e,(n=[{key:\"formatMessage\",value:function(){var e=this.message;return this.isATweet&&!this.isAPrivateNote&&(e=(e=e.replace(l,\"$1[@$2](http://twitter.com/$2)\")).replace(d,\"$1[#$2](https://twitter.com/hashtag/$2)\")),c.render(e)}},{key:\"formattedMessage\",get:function(){return this.formatMessage()}},{key:\"plainText\",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,\"text/html\").body.textContent||\"\"}}])&&i(t.prototype,n),s&&i(t,s),e}(),p=f;t.a={methods:{formatMessage:function(e,t,n){return new p(e,t,n).formattedMessage},getPlainText:function(e,t){return new p(e,t).plainText},truncateMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\";return e.length<100?e:\"\".concat(e.slice(0,97),\"...\")},highlightContent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\",s=this.getPlainText(e),r=t.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\");return s.replace(new RegExp(\"(\".concat(r,\")\"),\"ig\"),'<span class=\"'.concat(n,'\">$1</span>'))}}}},247:function(e,t,n){\"use strict\";n(12),n(13);var s=n(276),r=n(523),a=[];t.a={mounted:function(){var e=this.getKeyboardEvents();if(e){var t=this.wrapEventsInKeybindingsHandler(e),n=Object(r.a)(t);this.addEventHandler(n)}},beforeDestroy:function(){var e;if(this.$el&&null!==(e=this.$el.dataset)&&void 0!==e&&e.keydownHandlerIndex){var t=a[this.$el.dataset.keydownHandlerIndex];document.removeEventListener(\"keydown\",t)}},methods:{addEventHandler:function(e){var t=a.push(e)-1,n=this.$el;n&&n.dataset&&(document.addEventListener(\"keydown\",e),n.dataset.keydownHandlerIndex=t)},getKeyboardEvents:function(){return null},wrapEventsInKeybindingsHandler:function(e){var t=this,n={};return Object.keys(e).forEach((function(s){n[s]=t.keydownWrapper(e[s])})),n},keydownWrapper:function(e){return function(t){var n=\"function\"===typeof e?e:e.action,r=\"function\"!==typeof e&&e.allowOnFocusedInput;Object(s.d)(t)&&(Object(s.e)(t)&&t.target.blur(),!r)||n(t)}}}}},2637:function(e,t,n){\"use strict\";n.r(t);n(36),n(88),n(10),n(28);var s=n(1916),r=n(247),a={__name:\"Header\",props:{responseSourcePath:{type:String,required:!0},responseSourceName:{type:String,required:!0}},setup:function(e){return{__sfc:!0}}},o=n(8),i=Object(o.a)(a,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"header\",{staticClass:\"flex items-center px-8 py-4 bg-white border-b border-slate-100\",attrs:{role:\"banner\"}},[t(\"a\",{staticClass:\"text-woot-500 hover:underline mr-4\",attrs:{href:e.responseSourcePath}},[e._v(\"\\n    Back\\n  \")]),e._v(\" \"),t(\"div\",{staticClass:\"border border-solid border-slate-100 text-slate-700 mr-4 p-2 rounded-full\"},[t(\"svg\",{attrs:{width:\"24\",height:\"24\"}},[t(\"use\",{attrs:{\"xlink:href\":\"#icon-mist-fill\"}})])]),e._v(\" \"),t(\"div\",{staticClass:\"flex flex-col h-14 justify-center\"},[t(\"h1\",{staticClass:\"text-base font-medium text-slate-900\",attrs:{id:\"page-title\"}},[e._v(\"\\n      Robin AI playground\\n    \")]),e._v(\" \"),t(\"p\",{staticClass:\"text-sm text-slate-600\"},[e._v(\"\\n      Chat with the source\\n      \"),t(\"span\",{staticClass:\"font-medium\"},[e._v(\"\\n        \"+e._s(e.responseSourceName)+\"\\n      \")]),e._v(\"\\n      and evaluate it\\u2019s efficiency.\\n    \")])])])}),[],!1,null,null,null).exports,u={__name:\"UserMessage\",props:{message:{type:String,required:!0}},setup:function(e){return{__sfc:!0}}},c=Object(o.a)(u,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"w-full mb-4 flex items-center justify-end\"},[t(\"div\",{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:e.message,expression:\"message\"}],staticClass:\"px-4 py-3 bg-woot-400 text-white text-sm rounded-md inline-block\"})])}),[],!1,null,null,null).exports,l={__name:\"BotMessage\",props:{message:{type:String,required:!0}},setup:function(e){return{__sfc:!0}}},d=Object(o.a)(l,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t(\"div\",{staticClass:\"w-full mb-4 flex items-center justify-start\"},[t(\"div\",{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:e.message,expression:\"message\"}],staticClass:\"px-4 py-3 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"})])}),[],!1,null,null,null).exports,f=n(3293),p=n.n(f),g={__name:\"TypingIndicator\",setup:function(e){return{__sfc:!0,TypingIndicator:p.a}}};function m(e,t,n,s,r,a,o){try{var i=e[a](o),u=i.value}catch(c){return void n(c)}i.done?t(u):Promise.resolve(u).then(s,r)}var h={components:{PlaygroundHeader:i,UserMessage:c,BotMessage:d,TypingIndicator:Object(o.a)(g,(function(){var e=this._self._c;return e(\"div\",{staticClass:\"w-full mb-4 flex items-center justify-start\"},[e(\"div\",{staticClass:\"px-2 py-2 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"},[e(\"img\",{staticClass:\"h-4\",attrs:{src:this._self._setupProxy.TypingIndicator,alt:\"TypingIndicator\"}})])])}),[],!1,null,null,null).exports},mixins:[s.a,r.a],props:{componentData:{type:Object,default:function(){return{}}}},data:function(){return{messages:[],messageContent:\"\",isWaiting:!1}},computed:{previousMessages:function(){return this.messages.map((function(e){return{type:e.type,message:e.content}}))}},mounted:function(){this.focusInput()},methods:{getKeyboardEvents:function(){var e=this;return{\"$mod+Enter\":{action:function(){e.onMessageSend()},allowOnFocusedInput:!0}}},focusInput:function(){this.$refs.messageInput.focus()},onMessageSend:function(){this.addMessageToData(\"User\",this.messageContent),this.sendMessageToServer(this.messageContent)},scrollToLastMessage:function(){var e=this;this.$nextTick((function(){var t=e.messages[e.messages.length-1].id;document.getElementById(\"message-\".concat(t)).scrollIntoView({behavior:\"smooth\"})}))},addMessageToData:function(e,t){this.messages.push({id:this.messages.length,type:e,content:t}),this.scrollToLastMessage()},sendMessageToServer:function(e){var t,n=this;return(t=regeneratorRuntime.mark((function t(){var s,r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.messageContent=\"\",n.isWaiting=!0,s=document.querySelector('meta[name=\"csrf-token\"]').getAttribute(\"content\"),t.prev=3,t.next=6,fetch(window.location.href,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-CSRF-Token\":s},body:JSON.stringify({message:e,previous_messages:n.previousMessages}),credentials:\"include\"});case 6:if((r=t.sent).ok){t.next=9;break}throw new Error(\"HTTP error! status: \".concat(r.status));case 9:return t.next=11,r.json();case 11:a=t.sent,o=a.message,n.addMessageToData(\"Bot\",o),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),n.addMessageToData(\"bot\",\"Error: Could not retrieve response. Please check the console for more details.\");case 19:return t.prev=19,n.isWaiting=!1,n.focusInput(),t.finish(19);case 23:case\"end\":return t.stop()}}),t,null,[[3,16,19,23]])})),function(){var e=this,n=arguments;return new Promise((function(s,r){var a=t.apply(e,n);function o(e){m(a,s,r,o,i,\"next\",e)}function i(e){m(a,s,r,o,i,\"throw\",e)}o(void 0)}))})()}}},v=h,y=Object(o.a)(v,(function(){var e=this,t=e._self._c;return t(\"section\",{staticClass:\"h-full w-full flex flex-col bg-slate-25\"},[t(\"PlaygroundHeader\",{attrs:{\"response-source-name\":e.componentData.responseSourceName,\"response-source-path\":e.componentData.responseSourcePath}}),e._v(\" \"),t(\"div\",{ref:\"chatContainer\",staticClass:\"flex-1 overflow-auto px-8 py-4\"},[e._l(e.messages,(function(n){return t(\"div\",{key:n.id,attrs:{id:`message-${n.id}`}},[\"User\"===n.type?t(\"UserMessage\",{attrs:{message:e.formatMessage(n.content)}}):t(\"BotMessage\",{attrs:{message:e.formatMessage(n.content)}})],1)})),e._v(\" \"),e.isWaiting?t(\"TypingIndicator\"):e._e()],2),e._v(\" \"),t(\"div\",{staticClass:\"w-full px-8 py-6\"},[t(\"textarea\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.messageContent,expression:\"messageContent\"}],ref:\"messageInput\",staticClass:\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\",attrs:{rows:4,placeholder:\"Type a message... [CMD/CTRL + Enter to send]\",autofocus:\"\",autocomplete:\"off\"},domProps:{value:e.messageContent},on:{input:function(t){t.target.composing||(e.messageContent=t.target.value)}}})])],1)}),[],!1,null,null,null);t.default=y.exports},276:function(e,t,n){\"use strict\";n.d(t,\"e\",(function(){return r})),n.d(t,\"a\",(function(){return a})),n.d(t,\"c\",(function(){return o})),n.d(t,\"b\",(function(){return i})),n.d(t,\"d\",(function(){return u}));n(75),n(102);var s=function(e){return\"Enter\"===e.key},r=function(e){return\"Escape\"===e.key},a=function(e){return e.metaKey},o=function(e){return s(e)&&!a(e)&&!function(e){return e.shiftKey}(e)},i=function(e){return a(e)&&s(e)},u=function(e){var t,n=e.target||document.activeElement;return!!(\"INPUT\"===(null===n||void 0===n?void 0:n.tagName)||\"NINJA-KEYS\"===(null===n||void 0===n?void 0:n.tagName)||\"TEXTAREA\"===(null===n||void 0===n?void 0:n.tagName)||\"true\"===(null===n||void 0===n?void 0:n.contentEditable)||null!==n&&void 0!==n&&null!==(t=n.className)&&void 0!==t&&t.includes(\"ProseMirror\"))}},3293:function(e,t,n){e.exports=n.p+\"media/superadmin_pages/components/playground/assets/typing-929e3aeb589b7668d0b4ff57f73e17e3.gif\"}}]);","name":"js/79-f83c503f166a0851ff41.chunk.js","map":{"version":3,"names":["window","push","module","__webpack_exports__","__webpack_require__","markdown_it_link_attributes","markdown_it_link_attributes_default","n","USER_MENTIONS_REGEX","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","processInlineToken","blockToken","children","forEach","inlineToken","type","imgSrc","attrGet","height","URL","searchParams","get","attrSet","concat","setImageHeight","md","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","renderer","rules","mention","tokens","idx","content","inline","ruler","before","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","core","after","a","attrs","class","rel","TWITTER_USERNAME_REGEX","TWITTER_HASH_REGEX","MessageFormatter","message","isATweet","arguments","undefined","isAPrivateNote","this","protoProps","staticProps","value","updatedMessage","replace","render","formatMessage","DOMParser","parseFromString","formattedMessage","body","textContent","prototype","helpers_MessageFormatter","methods","getPlainText","plainText","truncateMessage","description","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm","_helpers_KeyboardHelpers__WEBPACK_IMPORTED_MODULE_2__","tinykeys__WEBPACK_IMPORTED_MODULE_3__","taggedHandlers","mounted","events","getKeyboardEvents","wrappedEvents","wrapEventsInKeybindingsHandler","keydownHandler","addEventHandler","beforeDestroy","_this$$el$dataset","$el","dataset","keydownHandlerIndex","handlerToRemove","document","removeEventListener","indexToAppend","root","addEventListener","_this","keys","eventName","keydownWrapper","handler","e","actionToPerform","action","allowOnFocusedInput","blur","r","messageFormatterMixin","keyboardEventListenerMixins","playground_Headervue_type_script_setup_true_lang_js_","__name","responseSourcePath","String","required","responseSourceName","setup","__props","__sfc","componentNormalizer","Header","_vm","_c","_self","_setupProxy","staticClass","role","_v","width","id","_s","playground_UserMessagevue_type_script_setup_true_lang_js_","UserMessage","directives","name","rawName","expression","playground_BotMessagevue_type_script_setup_true_lang_js_","BotMessage","typing","typing_default","playground_TypingIndicatorvue_type_script_setup_true_lang_js_","TypingIndicator","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","Indexvue_type_script_lang_js_","components","PlaygroundHeader","alt","mixins","componentData","default","data","messages","messageContent","isWaiting","computed","previousMessages","map","focusInput","onMessageSend","$refs","messageInput","focus","addMessageToData","sendMessageToServer","scrollToLastMessage","_this2","$nextTick","messageId","getElementById","scrollIntoView","behavior","fn","_this3","regeneratorRuntime","mark","_callee","csrfToken","response","_yield$response$json","wrap","_context","prev","next","querySelector","getAttribute","fetch","location","method","headers","JSON","stringify","previous_messages","credentials","sent","Error","status","json","t0","finish","stop","self","args","apply","err","playground_Indexvue_type_script_lang_js_","Index_component","ref","_l","_e","rows","placeholder","autofocus","autocomplete","domProps","on","input","$event","composing","d","isEscape","hasPressedCommand","hasPressedEnterAndNotCmdOrShift","hasPressedCommandAndEnter","isActiveElementTypeable","isEnter","metaKey","shiftKey","hasPressedShift","_activeElement$classN","activeElement","tagName","contentEditable","className","includes","exports","p"],"sources":["js/79-f83c503f166a0851ff41.chunk.js"],"mappings":"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"},"input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[79],{\n\n/***/ 1916:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js\nvar es_array_slice = __webpack_require__(69);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__(52);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(70);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.constructor.js\nvar es_regexp_constructor = __webpack_require__(1915);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.to-string.js\nvar es_regexp_to_string = __webpack_require__(159);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js\nvar es_array_iterator = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js\nvar es_string_iterator = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.js\nvar web_url = __webpack_require__(207);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.for-each.js\nvar web_dom_collections_for_each = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/markdown-it-link-attributes/index.js\nvar markdown_it_link_attributes = __webpack_require__(1918);\nvar markdown_it_link_attributes_default = /*#__PURE__*/__webpack_require__.n(markdown_it_link_attributes);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.match.js\nvar es_string_match = __webpack_require__(368);\n\n// CONCATENATED MODULE: ./app/javascript/shared/helpers/markdownIt/link.js\n// Process [@mention](mention://user/1/Pranav)\nvar USER_MENTIONS_REGEX=/mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;var buildMentionTokens=function buildMentionTokens(){return function(state,silent){var label;var labelEnd;var labelStart;var pos;var res;var token;var href='';var max=state.posMax;if(state.src.charCodeAt(state.pos)!==0x5b/* [ */){return false;}labelStart=state.pos+1;labelEnd=state.md.helpers.parseLinkLabel(state,state.pos,true);// parser failed to find ']', so it's not a valid link\nif(labelEnd<0){return false;}label=state.src.slice(labelStart,labelEnd);pos=labelEnd+1;if(pos<max&&state.src.charCodeAt(pos)===0x28/* ( */){pos+=1;res=state.md.helpers.parseLinkDestination(state.src,pos,state.posMax);if(res.ok){href=state.md.normalizeLink(res.str);if(state.md.validateLink(href)){pos=res.pos;}else{href='';}}pos+=1;}if(!href.match(new RegExp(USER_MENTIONS_REGEX))){return false;}if(!silent){state.pos=labelStart;state.posMax=labelEnd;token=state.push('mention','');token.href=href;token.content=label;}state.pos=pos;state.posMax=max;return true;};};var renderMentions=function renderMentions(){return function(tokens,idx){return\"<span class=\\\"prosemirror-mention-node\\\">\".concat(tokens[idx].content,\"</span>\");};};function mentionPlugin(md){md.renderer.rules.mention=renderMentions(md);md.inline.ruler.before('link','mention',buildMentionTokens(md));}\n// CONCATENATED MODULE: ./app/javascript/shared/helpers/MessageFormatter.js\nfunction _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}var setImageHeight=function setImageHeight(inlineToken){var imgSrc=inlineToken.attrGet('src');if(!imgSrc)return;var url=new URL(imgSrc);var height=url.searchParams.get('cw_image_height');if(!height)return;inlineToken.attrSet('style',\"height: \".concat(height,\";\"));};var processInlineToken=function processInlineToken(blockToken){blockToken.children.forEach(function(inlineToken){if(inlineToken.type==='image'){setImageHeight(inlineToken);}});};var imgResizeManager=function imgResizeManager(md){// Custom rule for image resize in markdown\n// If the image url has a query param cw_image_height, then add a style attribute to the image\nmd.core.ruler.after('inline','add-image-height',function(state){state.tokens.forEach(function(blockToken){if(blockToken.type==='inline'){processInlineToken(blockToken);}});});};var md=__webpack_require__(1809)({html:false,xhtmlOut:true,breaks:true,langPrefix:'language-',linkify:true,typographer:true,quotes:\"\\u201C\\u201D\\u2018\\u2019\",maxNesting:20}).use(mentionPlugin).use(imgResizeManager).use(markdown_it_link_attributes_default.a,{attrs:{class:'link',rel:'noreferrer noopener nofollow',target:'_blank'}});var TWITTER_USERNAME_REGEX=/(^|[^@\\w])@(\\w{1,15})\\b/g;var TWITTER_USERNAME_REPLACEMENT='$1[@$2](http://twitter.com/$2)';var TWITTER_HASH_REGEX=/(^|\\s)#(\\w+)/g;var TWITTER_HASH_REPLACEMENT='$1[#$2](https://twitter.com/hashtag/$2)';var MessageFormatter=/*#__PURE__*/function(){function MessageFormatter(message){var isATweet=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var isAPrivateNote=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,MessageFormatter);this.message=message||'';this.isAPrivateNote=isAPrivateNote;this.isATweet=isATweet;}_createClass(MessageFormatter,[{key:\"formatMessage\",value:function formatMessage(){var updatedMessage=this.message;if(this.isATweet&&!this.isAPrivateNote){updatedMessage=updatedMessage.replace(TWITTER_USERNAME_REGEX,TWITTER_USERNAME_REPLACEMENT);updatedMessage=updatedMessage.replace(TWITTER_HASH_REGEX,TWITTER_HASH_REPLACEMENT);}return md.render(updatedMessage);}},{key:\"formattedMessage\",get:function get(){return this.formatMessage();}},{key:\"plainText\",get:function get(){var strippedOutHtml=new DOMParser().parseFromString(this.formattedMessage,'text/html');return strippedOutHtml.body.textContent||'';}}]);return MessageFormatter;}();/* harmony default export */ var helpers_MessageFormatter = (MessageFormatter);\n// CONCATENATED MODULE: ./app/javascript/shared/mixins/messageFormatterMixin.js\n/* harmony default export */ var messageFormatterMixin = __webpack_exports__[\"a\"] = ({methods:{formatMessage:function formatMessage(message,isATweet,isAPrivateNote){var messageFormatter=new helpers_MessageFormatter(message,isATweet,isAPrivateNote);return messageFormatter.formattedMessage;},getPlainText:function getPlainText(message,isATweet){var messageFormatter=new helpers_MessageFormatter(message,isATweet);return messageFormatter.plainText;},truncateMessage:function truncateMessage(){var description=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';if(description.length<100){return description;}return\"\".concat(description.slice(0,97),\"...\");},highlightContent:function highlightContent(){var content=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var searchTerm=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var highlightClass=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';var plainTextContent=this.getPlainText(content);// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\nvar escapedSearchTerm=searchTerm.replace(/[.*+?^${}()|[\\]\\\\]/g,'\\\\$&');return plainTextContent.replace(new RegExp(\"(\".concat(escapedSearchTerm,\")\"),'ig'),\"<span class=\\\"\".concat(highlightClass,\"\\\">$1</span>\"));}}});\n\n/***/ }),\n\n/***/ 247:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _helpers_KeyboardHelpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(276);\n/* harmony import */ var tinykeys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(523);\n// this is a store that stores the handler globally, and only gets reset on reload\nvar taggedHandlers=[];/* harmony default export */ __webpack_exports__[\"a\"] = ({mounted:function mounted(){var events=this.getKeyboardEvents();if(events){var wrappedEvents=this.wrapEventsInKeybindingsHandler(events);var keydownHandler=Object(tinykeys__WEBPACK_IMPORTED_MODULE_3__[/* createKeybindingsHandler */ \"a\"])(wrappedEvents);this.addEventHandler(keydownHandler);}},beforeDestroy:function beforeDestroy(){var _this$$el$dataset;if(this.$el&&(_this$$el$dataset=this.$el.dataset)!==null&&_this$$el$dataset!==void 0&&_this$$el$dataset.keydownHandlerIndex){var handlerToRemove=taggedHandlers[this.$el.dataset.keydownHandlerIndex];document.removeEventListener('keydown',handlerToRemove);}},methods:{addEventHandler:function addEventHandler(keydownHandler){var indexToAppend=taggedHandlers.push(keydownHandler)-1;var root=this.$el;if(root&&root.dataset){// For the components with a top level v-if Vue renders it as an empty comment in the DOM\n// so we need to check if the root element has a dataset property to ensure it is a valid element\ndocument.addEventListener('keydown',keydownHandler);root.dataset.keydownHandlerIndex=indexToAppend;}},getKeyboardEvents:function getKeyboardEvents(){return null;},wrapEventsInKeybindingsHandler:function wrapEventsInKeybindingsHandler(events){var _this=this;var wrappedEvents={};Object.keys(events).forEach(function(eventName){wrappedEvents[eventName]=_this.keydownWrapper(events[eventName]);});return wrappedEvents;},keydownWrapper:function keydownWrapper(handler){return function(e){var actionToPerform=typeof handler==='function'?handler:handler.action;var allowOnFocusedInput=typeof handler==='function'?false:handler.allowOnFocusedInput;var isTypeable=Object(_helpers_KeyboardHelpers__WEBPACK_IMPORTED_MODULE_2__[/* isActiveElementTypeable */ \"d\"])(e);if(isTypeable){if(Object(_helpers_KeyboardHelpers__WEBPACK_IMPORTED_MODULE_2__[/* isEscape */ \"e\"])(e)){e.target.blur();}if(!allowOnFocusedInput)return;}actionToPerform(e);};}}});\n\n/***/ }),\n\n/***/ 2637:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/superadmin_pages/views/playground/Index.vue?vue&type=template&id=8aac9116&\nvar render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"h-full w-full flex flex-col bg-slate-25\"},[_c('PlaygroundHeader',{attrs:{\"response-source-name\":_vm.componentData.responseSourceName,\"response-source-path\":_vm.componentData.responseSourcePath}}),_vm._v(\" \"),_c('div',{ref:\"chatContainer\",staticClass:\"flex-1 overflow-auto px-8 py-4\"},[_vm._l((_vm.messages),function(message){return _c('div',{key:message.id,attrs:{\"id\":`message-${message.id}`}},[(message.type === 'User')?_c('UserMessage',{attrs:{\"message\":_vm.formatMessage(message.content)}}):_c('BotMessage',{attrs:{\"message\":_vm.formatMessage(message.content)}})],1)}),_vm._v(\" \"),(_vm.isWaiting)?_c('TypingIndicator'):_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"w-full px-8 py-6\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.messageContent),expression:\"messageContent\"}],ref:\"messageInput\",staticClass:\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\",attrs:{\"rows\":4,\"placeholder\":\"Type a message... [CMD/CTRL + Enter to send]\",\"autofocus\":\"\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.messageContent)},on:{\"input\":function($event){if($event.target.composing)return;_vm.messageContent=$event.target.value}}})])],1)\n}\nvar staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/views/playground/Index.vue?vue&type=template&id=8aac9116&\n\n// EXTERNAL MODULE: ./node_modules/regenerator-runtime/runtime.js\nvar runtime = __webpack_require__(36);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js\nvar es_array_map = __webpack_require__(88);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.promise.js\nvar es_promise = __webpack_require__(28);\n\n// EXTERNAL MODULE: ./app/javascript/shared/mixins/messageFormatterMixin.js + 2 modules\nvar messageFormatterMixin = __webpack_require__(1916);\n\n// EXTERNAL MODULE: ./app/javascript/shared/mixins/keyboardEventListenerMixins.js\nvar keyboardEventListenerMixins = __webpack_require__(247);\n\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/superadmin_pages/components/playground/Header.vue?vue&type=template&id=0fa12268&\nvar Headervue_type_template_id_0fa12268_render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('header',{staticClass:\"flex items-center px-8 py-4 bg-white border-b border-slate-100\",attrs:{\"role\":\"banner\"}},[_c('a',{staticClass:\"text-woot-500 hover:underline mr-4\",attrs:{\"href\":_vm.responseSourcePath}},[_vm._v(\"\\n    Back\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"border border-solid border-slate-100 text-slate-700 mr-4 p-2 rounded-full\"},[_c('svg',{attrs:{\"width\":\"24\",\"height\":\"24\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-mist-fill\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"flex flex-col h-14 justify-center\"},[_c('h1',{staticClass:\"text-base font-medium text-slate-900\",attrs:{\"id\":\"page-title\"}},[_vm._v(\"\\n      Robin AI playground\\n    \")]),_vm._v(\" \"),_c('p',{staticClass:\"text-sm text-slate-600\"},[_vm._v(\"\\n      Chat with the source\\n      \"),_c('span',{staticClass:\"font-medium\"},[_vm._v(\"\\n        \"+_vm._s(_vm.responseSourceName)+\"\\n      \")]),_vm._v(\"\\n      and evaluate itâ€™s efficiency.\\n    \")])])])\n}\nvar Headervue_type_template_id_0fa12268_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/Header.vue?vue&type=template&id=0fa12268&\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/superadmin_pages/components/playground/Header.vue?vue&type=script&setup=true&lang=js&\n/* harmony default export */ var Headervue_type_script_setup_true_lang_js_ = ({__name:'Header',props:{responseSourcePath:{type:String,required:true},responseSourceName:{type:String,required:true}},setup:function setup(__props){return{__sfc:true};}});\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/Header.vue?vue&type=script&setup=true&lang=js&\n /* harmony default export */ var playground_Headervue_type_script_setup_true_lang_js_ = (Headervue_type_script_setup_true_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/Header.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  playground_Headervue_type_script_setup_true_lang_js_,\n  Headervue_type_template_id_0fa12268_render,\n  Headervue_type_template_id_0fa12268_staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var Header = (component.exports);\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/superadmin_pages/components/playground/UserMessage.vue?vue&type=template&id=8cd00670&\nvar UserMessagevue_type_template_id_8cd00670_render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-end\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.message),expression:\"message\"}],staticClass:\"px-4 py-3 bg-woot-400 text-white text-sm rounded-md inline-block\"})])\n}\nvar UserMessagevue_type_template_id_8cd00670_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/UserMessage.vue?vue&type=template&id=8cd00670&\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/superadmin_pages/components/playground/UserMessage.vue?vue&type=script&setup=true&lang=js&\n/* harmony default export */ var UserMessagevue_type_script_setup_true_lang_js_ = ({__name:'UserMessage',props:{message:{type:String,required:true}},setup:function setup(__props){return{__sfc:true};}});\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/UserMessage.vue?vue&type=script&setup=true&lang=js&\n /* harmony default export */ var playground_UserMessagevue_type_script_setup_true_lang_js_ = (UserMessagevue_type_script_setup_true_lang_js_); \n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/UserMessage.vue\n\n\n\n\n\n/* normalize component */\n\nvar UserMessage_component = Object(componentNormalizer[\"a\" /* default */])(\n  playground_UserMessagevue_type_script_setup_true_lang_js_,\n  UserMessagevue_type_template_id_8cd00670_render,\n  UserMessagevue_type_template_id_8cd00670_staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var UserMessage = (UserMessage_component.exports);\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/superadmin_pages/components/playground/BotMessage.vue?vue&type=template&id=92255130&\nvar BotMessagevue_type_template_id_92255130_render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-start\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.message),expression:\"message\"}],staticClass:\"px-4 py-3 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"})])\n}\nvar BotMessagevue_type_template_id_92255130_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/BotMessage.vue?vue&type=template&id=92255130&\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/superadmin_pages/components/playground/BotMessage.vue?vue&type=script&setup=true&lang=js&\n/* harmony default export */ var BotMessagevue_type_script_setup_true_lang_js_ = ({__name:'BotMessage',props:{message:{type:String,required:true}},setup:function setup(__props){return{__sfc:true};}});\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/BotMessage.vue?vue&type=script&setup=true&lang=js&\n /* harmony default export */ var playground_BotMessagevue_type_script_setup_true_lang_js_ = (BotMessagevue_type_script_setup_true_lang_js_); \n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/BotMessage.vue\n\n\n\n\n\n/* normalize component */\n\nvar BotMessage_component = Object(componentNormalizer[\"a\" /* default */])(\n  playground_BotMessagevue_type_script_setup_true_lang_js_,\n  BotMessagevue_type_template_id_92255130_render,\n  BotMessagevue_type_template_id_92255130_staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var BotMessage = (BotMessage_component.exports);\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?vue&type=template&id=278d0699&\nvar TypingIndicatorvue_type_template_id_278d0699_render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-start\"},[_c('div',{staticClass:\"px-2 py-2 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"},[_c('img',{staticClass:\"h-4\",attrs:{\"src\":_setup.TypingIndicator,\"alt\":\"TypingIndicator\"}})])])\n}\nvar TypingIndicatorvue_type_template_id_278d0699_staticRenderFns = []\n\n\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?vue&type=template&id=278d0699&\n\n// EXTERNAL MODULE: ./app/javascript/superadmin_pages/components/playground/assets/typing.gif\nvar typing = __webpack_require__(3293);\nvar typing_default = /*#__PURE__*/__webpack_require__.n(typing);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?vue&type=script&setup=true&lang=js&\n/* harmony default export */ var TypingIndicatorvue_type_script_setup_true_lang_js_ = ({__name:'TypingIndicator',setup:function setup(__props){return{__sfc:true,TypingIndicator:typing_default.a};}});\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?vue&type=script&setup=true&lang=js&\n /* harmony default export */ var playground_TypingIndicatorvue_type_script_setup_true_lang_js_ = (TypingIndicatorvue_type_script_setup_true_lang_js_); \n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue\n\n\n\n\n\n/* normalize component */\n\nvar TypingIndicator_component = Object(componentNormalizer[\"a\" /* default */])(\n  playground_TypingIndicatorvue_type_script_setup_true_lang_js_,\n  TypingIndicatorvue_type_template_id_278d0699_render,\n  TypingIndicatorvue_type_template_id_278d0699_staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var TypingIndicator = (TypingIndicator_component.exports);\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--7-0!./node_modules/vue-loader/lib??vue-loader-options!./app/javascript/superadmin_pages/views/playground/Index.vue?vue&type=script&lang=js&\nfunction asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{Promise.resolve(value).then(_next,_throw);}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"next\",value);}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,\"throw\",err);}_next(undefined);});};}/* harmony default export */ var Indexvue_type_script_lang_js_ = ({components:{PlaygroundHeader:Header,UserMessage:UserMessage,BotMessage:BotMessage,TypingIndicator:TypingIndicator},mixins:[messageFormatterMixin[\"a\" /* default */],keyboardEventListenerMixins[\"a\" /* default */]],props:{componentData:{type:Object,default:function _default(){return{};}}},data:function data(){return{messages:[],messageContent:'',isWaiting:false};},computed:{previousMessages:function previousMessages(){return this.messages.map(function(message){return{type:message.type,message:message.content};});}},mounted:function mounted(){this.focusInput();},methods:{getKeyboardEvents:function getKeyboardEvents(){var _this=this;return{'$mod+Enter':{action:function action(){_this.onMessageSend();},allowOnFocusedInput:true}};},focusInput:function focusInput(){this.$refs.messageInput.focus();},onMessageSend:function onMessageSend(){this.addMessageToData('User',this.messageContent);this.sendMessageToServer(this.messageContent);},scrollToLastMessage:function scrollToLastMessage(){var _this2=this;this.$nextTick(function(){var messageId=_this2.messages[_this2.messages.length-1].id;var messageElement=document.getElementById(\"message-\".concat(messageId));messageElement.scrollIntoView({behavior:'smooth'});});},addMessageToData:function addMessageToData(type,content){this.messages.push({id:this.messages.length,type:type,content:content});this.scrollToLastMessage();},sendMessageToServer:function sendMessageToServer(messageContent){var _this3=this;return _asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(){var csrfToken,response,_yield$response$json,message;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this3.messageContent='';_this3.isWaiting=true;csrfToken=document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content');_context.prev=3;_context.next=6;return fetch(window.location.href,{method:'POST',headers:{'Content-Type':'application/json','X-CSRF-Token':csrfToken},body:JSON.stringify({message:messageContent,previous_messages:_this3.previousMessages}),credentials:'include'});case 6:response=_context.sent;if(response.ok){_context.next=9;break;}throw new Error(\"HTTP error! status: \".concat(response.status));case 9:_context.next=11;return response.json();case 11:_yield$response$json=_context.sent;message=_yield$response$json.message;_this3.addMessageToData('Bot',message);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](3);_this3.addMessageToData('bot','Error: Could not retrieve response. Please check the console for more details.');case 19:_context.prev=19;_this3.isWaiting=false;_this3.focusInput();return _context.finish(19);case 23:case\"end\":return _context.stop();}}},_callee,null,[[3,16,19,23]]);}))();}}});\n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/views/playground/Index.vue?vue&type=script&lang=js&\n /* harmony default export */ var playground_Indexvue_type_script_lang_js_ = (Indexvue_type_script_lang_js_); \n// CONCATENATED MODULE: ./app/javascript/superadmin_pages/views/playground/Index.vue\n\n\n\n\n\n/* normalize component */\n\nvar Index_component = Object(componentNormalizer[\"a\" /* default */])(\n  playground_Indexvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var Index = __webpack_exports__[\"default\"] = (Index_component.exports);\n\n/***/ }),\n\n/***/ 276:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export isEnter */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return isEscape; });\n/* unused harmony export hasPressedShift */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return hasPressedCommand; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return hasPressedEnterAndNotCmdOrShift; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return hasPressedCommandAndEnter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return isActiveElementTypeable; });\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75);\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(102);\n/* harmony import */ var core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_includes_js__WEBPACK_IMPORTED_MODULE_1__);\nvar isEnter=function isEnter(e){return e.key==='Enter';};var isEscape=function isEscape(e){return e.key==='Escape';};var hasPressedShift=function hasPressedShift(e){return e.shiftKey;};var hasPressedCommand=function hasPressedCommand(e){return e.metaKey;};var hasPressedEnterAndNotCmdOrShift=function hasPressedEnterAndNotCmdOrShift(e){return isEnter(e)&&!hasPressedCommand(e)&&!hasPressedShift(e);};var hasPressedCommandAndEnter=function hasPressedCommandAndEnter(e){return hasPressedCommand(e)&&isEnter(e);};/**\n * Determines whether the active element is typeable.\n *\n * @param {KeyboardEvent} e - The keyboard event object.\n * @returns {boolean} `true` if the active element is typeable, `false` otherwise.\n *\n * @example\n * document.addEventListener('keydown', e => {\n *   if (isActiveElementTypeable(e)) {\n *     handleTypeableElement(e);\n *   }\n * });\n */var isActiveElementTypeable=function isActiveElementTypeable(e){var _activeElement$classN;/** @type {HTMLElement | null} */ // @ts-ignore\nvar activeElement=e.target||document.activeElement;return!!((activeElement===null||activeElement===void 0?void 0:activeElement.tagName)==='INPUT'||(activeElement===null||activeElement===void 0?void 0:activeElement.tagName)==='NINJA-KEYS'||(activeElement===null||activeElement===void 0?void 0:activeElement.tagName)==='TEXTAREA'||(activeElement===null||activeElement===void 0?void 0:activeElement.contentEditable)==='true'||activeElement!==null&&activeElement!==void 0&&(_activeElement$classN=activeElement.className)!==null&&_activeElement$classN!==void 0&&_activeElement$classN.includes('ProseMirror'));};\n\n/***/ }),\n\n/***/ 3293:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"media/superadmin_pages/components/playground/assets/typing-929e3aeb589b7668d0b4ff57f73e17e3.gif\";\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/home/chatwoot/chatwoot/app/javascript/shared/helpers/markdownIt/link.js","/home/chatwoot/chatwoot/app/javascript/shared/helpers/MessageFormatter.js","/home/chatwoot/chatwoot/app/javascript/shared/mixins/messageFormatterMixin.js","/home/chatwoot/chatwoot/app/javascript/shared/mixins/keyboardEventListenerMixins.js","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/views/playground/Index.vue?vue&type=template&id=8aac9116&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/Header.vue?vue&type=template&id=0fa12268&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/Header.vue?vue&type=script&setup=true&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/Header.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/UserMessage.vue?vue&type=template&id=8cd00670&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/UserMessage.vue?vue&type=script&setup=true&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/UserMessage.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/BotMessage.vue?vue&type=template&id=92255130&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/BotMessage.vue?vue&type=script&setup=true&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/BotMessage.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--5!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?vue&type=template&id=278d0699&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?vue&type=script&setup=true&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/TypingIndicator.vue","app/javascript/superadmin_pages/views/playground/Index.vue","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/loaders/pitcher.js??ref--4!/home/chatwoot/chatwoot/node_modules/babel-loader/lib/index.js??ref--7-0!/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/views/playground/Index.vue?vue&type=script&lang=js&","/home/chatwoot/chatwoot/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/views/playground/Index.vue","/home/chatwoot/chatwoot/app/javascript/shared/helpers/KeyboardHelpers.js","/home/chatwoot/chatwoot/node_modules/file-loader/dist/cjs.js??ref--1-0!/home/chatwoot/chatwoot/app/javascript/superadmin_pages/components/playground/assets/typing.gif"],"names":["USER_MENTIONS_REGEX","buildMentionTokens","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","md","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","push","content","renderMentions","tokens","idx","mentionPlugin","renderer","rules","mention","inline","ruler","before","setImageHeight","inlineToken","imgSrc","attrGet","url","URL","height","searchParams","get","attrSet","processInlineToken","blockToken","children","forEach","type","imgResizeManager","core","after","require","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","mila","attrs","class","rel","target","TWITTER_USERNAME_REGEX","TWITTER_USERNAME_REPLACEMENT","TWITTER_HASH_REGEX","TWITTER_HASH_REPLACEMENT","MessageFormatter","message","isATweet","isAPrivateNote","updatedMessage","replace","render","formatMessage","strippedOutHtml","DOMParser","parseFromString","formattedMessage","body","textContent","methods","messageFormatter","getPlainText","plainText","truncateMessage","description","length","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm","taggedHandlers","mounted","events","getKeyboardEvents","wrappedEvents","wrapEventsInKeybindingsHandler","keydownHandler","createKeybindingsHandler","addEventHandler","beforeDestroy","$el","dataset","keydownHandlerIndex","handlerToRemove","document","removeEventListener","indexToAppend","root","addEventListener","Object","keys","eventName","keydownWrapper","handler","e","actionToPerform","action","allowOnFocusedInput","isTypeable","isActiveElementTypeable","isEscape","blur","isEnter","key","hasPressedShift","shiftKey","hasPressedCommand","metaKey","hasPressedEnterAndNotCmdOrShift","hasPressedCommandAndEnter","activeElement","tagName","contentEditable","className","includes"],"mappings":"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","file":"x","sourcesContent":["// Process [@mention](mention://user/1/Pranav)\nconst USER_MENTIONS_REGEX = /mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;\n\nconst buildMentionTokens = () => (state, silent) => {\n  var label;\n  var labelEnd;\n  var labelStart;\n  var pos;\n  var res;\n  var token;\n  var href = '';\n  var max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5b /* [ */) {\n    return false;\n  }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n\n  label = state.src.slice(labelStart, labelEnd);\n  pos = labelEnd + 1;\n\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    pos += 1;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n    pos += 1;\n  }\n\n  if (!href.match(new RegExp(USER_MENTIONS_REGEX))) {\n    return false;\n  }\n\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token = state.push('mention', '');\n    token.href = href;\n    token.content = label;\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n\n  return true;\n};\n\nconst renderMentions = () => (tokens, idx) => {\n  return `<span class=\"prosemirror-mention-node\">${tokens[idx].content}</span>`;\n};\n\nexport default function mentionPlugin(md) {\n  md.renderer.rules.mention = renderMentions(md);\n  md.inline.ruler.before('link', 'mention', buildMentionTokens(md));\n}\n","import mila from 'markdown-it-link-attributes';\nimport mentionPlugin from './markdownIt/link';\n\nconst setImageHeight = inlineToken => {\n  const imgSrc = inlineToken.attrGet('src');\n  if (!imgSrc) return;\n  const url = new URL(imgSrc);\n  const height = url.searchParams.get('cw_image_height');\n  if (!height) return;\n  inlineToken.attrSet('style', `height: ${height};`);\n};\n\nconst processInlineToken = blockToken => {\n  blockToken.children.forEach(inlineToken => {\n    if (inlineToken.type === 'image') {\n      setImageHeight(inlineToken);\n    }\n  });\n};\n\nconst imgResizeManager = md => {\n  // Custom rule for image resize in markdown\n  // If the image url has a query param cw_image_height, then add a style attribute to the image\n  md.core.ruler.after('inline', 'add-image-height', state => {\n    state.tokens.forEach(blockToken => {\n      if (blockToken.type === 'inline') {\n        processInlineToken(blockToken);\n      }\n    });\n  });\n};\n\nconst md = require('markdown-it')({\n  html: false,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  quotes: '\\u201c\\u201d\\u2018\\u2019',\n  maxNesting: 20,\n})\n  .use(mentionPlugin)\n  .use(imgResizeManager)\n  .use(mila, {\n    attrs: {\n      class: 'link',\n      rel: 'noreferrer noopener nofollow',\n      target: '_blank',\n    },\n  });\n\nconst TWITTER_USERNAME_REGEX = /(^|[^@\\w])@(\\w{1,15})\\b/g;\nconst TWITTER_USERNAME_REPLACEMENT = '$1[@$2](http://twitter.com/$2)';\nconst TWITTER_HASH_REGEX = /(^|\\s)#(\\w+)/g;\nconst TWITTER_HASH_REPLACEMENT = '$1[#$2](https://twitter.com/hashtag/$2)';\n\nclass MessageFormatter {\n  constructor(message, isATweet = false, isAPrivateNote = false) {\n    this.message = message || '';\n    this.isAPrivateNote = isAPrivateNote;\n    this.isATweet = isATweet;\n  }\n\n  formatMessage() {\n    let updatedMessage = this.message;\n    if (this.isATweet && !this.isAPrivateNote) {\n      updatedMessage = updatedMessage.replace(\n        TWITTER_USERNAME_REGEX,\n        TWITTER_USERNAME_REPLACEMENT\n      );\n      updatedMessage = updatedMessage.replace(\n        TWITTER_HASH_REGEX,\n        TWITTER_HASH_REPLACEMENT\n      );\n    }\n    return md.render(updatedMessage);\n  }\n\n  get formattedMessage() {\n    return this.formatMessage();\n  }\n\n  get plainText() {\n    const strippedOutHtml = new DOMParser().parseFromString(\n      this.formattedMessage,\n      'text/html'\n    );\n    return strippedOutHtml.body.textContent || '';\n  }\n}\n\nexport default MessageFormatter;\n","import MessageFormatter from '../helpers/MessageFormatter';\n\nexport default {\n  methods: {\n    formatMessage(message, isATweet, isAPrivateNote) {\n      const messageFormatter = new MessageFormatter(\n        message,\n        isATweet,\n        isAPrivateNote\n      );\n      return messageFormatter.formattedMessage;\n    },\n    getPlainText(message, isATweet) {\n      const messageFormatter = new MessageFormatter(message, isATweet);\n      return messageFormatter.plainText;\n    },\n    truncateMessage(description = '') {\n      if (description.length < 100) {\n        return description;\n      }\n\n      return `${description.slice(0, 97)}...`;\n    },\n\n    highlightContent(content = '', searchTerm = '', highlightClass = '') {\n      const plainTextContent = this.getPlainText(content);\n\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n      const escapedSearchTerm = searchTerm.replace(\n        /[.*+?^${}()|[\\]\\\\]/g,\n        '\\\\$&'\n      );\n\n      return plainTextContent.replace(\n        new RegExp(`(${escapedSearchTerm})`, 'ig'),\n        `<span class=\"${highlightClass}\">$1</span>`\n      );\n    },\n  },\n};\n","import { isActiveElementTypeable, isEscape } from '../helpers/KeyboardHelpers';\n\nimport { createKeybindingsHandler } from 'tinykeys';\n\n// this is a store that stores the handler globally, and only gets reset on reload\nconst taggedHandlers = [];\n\nexport default {\n  mounted() {\n    const events = this.getKeyboardEvents();\n    if (events) {\n      const wrappedEvents = this.wrapEventsInKeybindingsHandler(events);\n      const keydownHandler = createKeybindingsHandler(wrappedEvents);\n      this.addEventHandler(keydownHandler);\n    }\n  },\n  beforeDestroy() {\n    if (this.$el && this.$el.dataset?.keydownHandlerIndex) {\n      const handlerToRemove =\n        taggedHandlers[this.$el.dataset.keydownHandlerIndex];\n      document.removeEventListener('keydown', handlerToRemove);\n    }\n  },\n  methods: {\n    addEventHandler(keydownHandler) {\n      const indexToAppend = taggedHandlers.push(keydownHandler) - 1;\n      const root = this.$el;\n      if (root && root.dataset) {\n        // For the components with a top level v-if Vue renders it as an empty comment in the DOM\n        // so we need to check if the root element has a dataset property to ensure it is a valid element\n        document.addEventListener('keydown', keydownHandler);\n        root.dataset.keydownHandlerIndex = indexToAppend;\n      }\n    },\n    getKeyboardEvents() {\n      return null;\n    },\n    wrapEventsInKeybindingsHandler(events) {\n      const wrappedEvents = {};\n      Object.keys(events).forEach(eventName => {\n        wrappedEvents[eventName] = this.keydownWrapper(events[eventName]);\n      });\n\n      return wrappedEvents;\n    },\n    keydownWrapper(handler) {\n      return e => {\n        const actionToPerform =\n          typeof handler === 'function' ? handler : handler.action;\n        const allowOnFocusedInput =\n          typeof handler === 'function' ? false : handler.allowOnFocusedInput;\n\n        const isTypeable = isActiveElementTypeable(e);\n\n        if (isTypeable) {\n          if (isEscape(e)) {\n            e.target.blur();\n          }\n\n          if (!allowOnFocusedInput) return;\n        }\n\n        actionToPerform(e);\n      };\n    },\n  },\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"h-full w-full flex flex-col bg-slate-25\"},[_c('PlaygroundHeader',{attrs:{\"response-source-name\":_vm.componentData.responseSourceName,\"response-source-path\":_vm.componentData.responseSourcePath}}),_vm._v(\" \"),_c('div',{ref:\"chatContainer\",staticClass:\"flex-1 overflow-auto px-8 py-4\"},[_vm._l((_vm.messages),function(message){return _c('div',{key:message.id,attrs:{\"id\":`message-${message.id}`}},[(message.type === 'User')?_c('UserMessage',{attrs:{\"message\":_vm.formatMessage(message.content)}}):_c('BotMessage',{attrs:{\"message\":_vm.formatMessage(message.content)}})],1)}),_vm._v(\" \"),(_vm.isWaiting)?_c('TypingIndicator'):_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"w-full px-8 py-6\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.messageContent),expression:\"messageContent\"}],ref:\"messageInput\",staticClass:\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\",attrs:{\"rows\":4,\"placeholder\":\"Type a message... [CMD/CTRL + Enter to send]\",\"autofocus\":\"\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.messageContent)},on:{\"input\":function($event){if($event.target.composing)return;_vm.messageContent=$event.target.value}}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('header',{staticClass:\"flex items-center px-8 py-4 bg-white border-b border-slate-100\",attrs:{\"role\":\"banner\"}},[_c('a',{staticClass:\"text-woot-500 hover:underline mr-4\",attrs:{\"href\":_vm.responseSourcePath}},[_vm._v(\"\\n    Back\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"border border-solid border-slate-100 text-slate-700 mr-4 p-2 rounded-full\"},[_c('svg',{attrs:{\"width\":\"24\",\"height\":\"24\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-mist-fill\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"flex flex-col h-14 justify-center\"},[_c('h1',{staticClass:\"text-base font-medium text-slate-900\",attrs:{\"id\":\"page-title\"}},[_vm._v(\"\\n      Robin AI playground\\n    \")]),_vm._v(\" \"),_c('p',{staticClass:\"text-sm text-slate-600\"},[_vm._v(\"\\n      Chat with the source\\n      \"),_c('span',{staticClass:\"font-medium\"},[_vm._v(\"\\n        \"+_vm._s(_vm.responseSourceName)+\"\\n      \")]),_vm._v(\"\\n      and evaluate itâ€™s efficiency.\\n    \")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=0fa12268&\"\nimport script from \"./Header.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-end\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.message),expression:\"message\"}],staticClass:\"px-4 py-3 bg-woot-400 text-white text-sm rounded-md inline-block\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessage.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessage.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./UserMessage.vue?vue&type=template&id=8cd00670&\"\nimport script from \"./UserMessage.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./UserMessage.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-start\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.message),expression:\"message\"}],staticClass:\"px-4 py-3 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMessage.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMessage.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./BotMessage.vue?vue&type=template&id=92255130&\"\nimport script from \"./BotMessage.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./BotMessage.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-start\"},[_c('div',{staticClass:\"px-2 py-2 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"},[_c('img',{staticClass:\"h-4\",attrs:{\"src\":_setup.TypingIndicator,\"alt\":\"TypingIndicator\"}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./TypingIndicator.vue?vue&type=template&id=278d0699&\"\nimport script from \"./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <section class=\"h-full w-full flex flex-col bg-slate-25\">\n    <PlaygroundHeader\n      :response-source-name=\"componentData.responseSourceName\"\n      :response-source-path=\"componentData.responseSourcePath\"\n    />\n    <div ref=\"chatContainer\" class=\"flex-1 overflow-auto px-8 py-4\">\n      <div\n        v-for=\"message in messages\"\n        :id=\"`message-${message.id}`\"\n        :key=\"message.id\"\n      >\n        <UserMessage\n          v-if=\"message.type === 'User'\"\n          :message=\"formatMessage(message.content)\"\n        />\n        <BotMessage v-else :message=\"formatMessage(message.content)\" />\n      </div>\n      <TypingIndicator v-if=\"isWaiting\" />\n    </div>\n    <div class=\"w-full px-8 py-6\">\n      <textarea\n        ref=\"messageInput\"\n        v-model=\"messageContent\"\n        :rows=\"4\"\n        class=\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\"\n        placeholder=\"Type a message... [CMD/CTRL + Enter to send]\"\n        autofocus\n        autocomplete=\"off\"\n      />\n    </div>\n  </section>\n</template>\n\n<script>\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nimport keyboardEventListenerMixins from 'shared/mixins/keyboardEventListenerMixins';\nimport Header from '../../components/playground/Header.vue';\nimport UserMessage from '../../components/playground/UserMessage.vue';\nimport BotMessage from '../../components/playground/BotMessage.vue';\nimport TypingIndicator from '../../components/playground/TypingIndicator.vue';\n\nexport default {\n  components: {\n    PlaygroundHeader: Header,\n    UserMessage,\n    BotMessage,\n    TypingIndicator,\n  },\n  mixins: [messageFormatterMixin, keyboardEventListenerMixins],\n  props: {\n    componentData: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  data() {\n    return { messages: [], messageContent: '', isWaiting: false };\n  },\n  computed: {\n    previousMessages() {\n      return this.messages.map(message => ({\n        type: message.type,\n        message: message.content,\n      }));\n    },\n  },\n  mounted() {\n    this.focusInput();\n  },\n  methods: {\n    getKeyboardEvents() {\n      return {\n        '$mod+Enter': {\n          action: () => {\n            this.onMessageSend();\n          },\n          allowOnFocusedInput: true,\n        },\n      };\n    },\n    focusInput() {\n      this.$refs.messageInput.focus();\n    },\n    onMessageSend() {\n      this.addMessageToData('User', this.messageContent);\n      this.sendMessageToServer(this.messageContent);\n    },\n    scrollToLastMessage() {\n      this.$nextTick(() => {\n        const messageId = this.messages[this.messages.length - 1].id;\n        const messageElement = document.getElementById(`message-${messageId}`);\n        messageElement.scrollIntoView({ behavior: 'smooth' });\n      });\n    },\n    addMessageToData(type, content) {\n      this.messages.push({ id: this.messages.length, type, content });\n      this.scrollToLastMessage();\n    },\n    async sendMessageToServer(messageContent) {\n      this.messageContent = '';\n      this.isWaiting = true;\n      const csrfToken = document\n        .querySelector('meta[name=\"csrf-token\"]')\n        .getAttribute('content');\n\n      try {\n        const response = await fetch(window.location.href, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-CSRF-Token': csrfToken,\n          },\n          body: JSON.stringify({\n            message: messageContent,\n            previous_messages: this.previousMessages,\n          }),\n          credentials: 'include',\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const { message } = await response.json();\n        this.addMessageToData('Bot', message);\n      } catch (error) {\n        this.addMessageToData(\n          'bot',\n          'Error: Could not retrieve response. Please check the console for more details.'\n        );\n      } finally {\n        this.isWaiting = false;\n        this.focusInput();\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=8aac9116&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export const isEnter = e => {\n  return e.key === 'Enter';\n};\n\nexport const isEscape = e => {\n  return e.key === 'Escape';\n};\n\nexport const hasPressedShift = e => {\n  return e.shiftKey;\n};\n\nexport const hasPressedCommand = e => {\n  return e.metaKey;\n};\n\nexport const hasPressedEnterAndNotCmdOrShift = e => {\n  return isEnter(e) && !hasPressedCommand(e) && !hasPressedShift(e);\n};\n\nexport const hasPressedCommandAndEnter = e => {\n  return hasPressedCommand(e) && isEnter(e);\n};\n\n/**\n * Determines whether the active element is typeable.\n *\n * @param {KeyboardEvent} e - The keyboard event object.\n * @returns {boolean} `true` if the active element is typeable, `false` otherwise.\n *\n * @example\n * document.addEventListener('keydown', e => {\n *   if (isActiveElementTypeable(e)) {\n *     handleTypeableElement(e);\n *   }\n * });\n */\nexport const isActiveElementTypeable = e => {\n  /** @type {HTMLElement | null} */\n  // @ts-ignore\n  const activeElement = e.target || document.activeElement;\n\n  return !!(\n    activeElement?.tagName === 'INPUT' ||\n    activeElement?.tagName === 'NINJA-KEYS' ||\n    activeElement?.tagName === 'TEXTAREA' ||\n    activeElement?.contentEditable === 'true' ||\n    activeElement?.className?.includes('ProseMirror')\n  );\n};\n","module.exports = __webpack_public_path__ + \"media/superadmin_pages/components/playground/assets/typing-929e3aeb589b7668d0b4ff57f73e17e3.gif\";"]}}