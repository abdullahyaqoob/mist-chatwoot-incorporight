// Pico Search v0.5.1 · The MIT License · Copyright © 2023 Shivam Mishra.
function p(e,t){if(e.length<t.length){let n=e;e=t,t=n}let i=e.length,o=t.length;if(!o)return 0;let s=Math.max(1,i/2)-1,a=Array(o).fill(!1),m=Array(i).fill(""),r=0;for(let n=0;n<i;n++){let u=e[n];for(let h=0;h<o;h++){let d=t[h];if(h<=n+s&&h+s>=1&&u===d&&!a[h]){a[h]=!0,m[r++]=u;break}}}if(!r)return 0;let c=0;for(let n=0,u=0;u<o;u++)a[u]&&(t[u]!==m[n]&&c++,n++);let l=r,g=(l/i+l/o+(l-c/2)/l)/3,f=0;o=Math.min(4,o);for(let n=0;n<o;n++)e[n]===t[n]&&f++;return g+f*.1*(1-g)}function y(e,t){if(t&&e.length!==t.length)throw new Error("The number of values must be equal to the number of weights");let i=e.reduce((s,a,m)=>{let r=t?t[m]:1;return s+a*r},0),o=t?t.reduce((s,a)=>s+a,0):e.length;return i/o}function S(e,t=0,i=1){return Math.max(t,Math.min(i,e))}function T(e){return e.split(/\s+/).filter((t,i,o)=>t&&o.indexOf(t)===i)}var b={CONTAINS_MATCH:1.2,FIRST_SIMILARITY:1.1,STARTS_WITH:1.05};function O(e,t,i,o){let s=[],a=o&&o.threshold||.8,m=t.trim().toLowerCase();return t?(e.forEach(r=>{let c=[],l=[];for(let f of i){let n=typeof f=="string"?f:f.name;if(typeof f!="string"?l.push(f.weight):l.push(1),Object.prototype.hasOwnProperty.call(r,n)&&typeof r[n]=="string"){let u=r[n].trim().toLowerCase(),h=A(u,m);c.push(h)}else c.push(0)}let g=y(c,l);g>=a&&s.push({object:r,similarity:g})}),s.sort((r,c)=>c.similarity-r.similarity),s.map(r=>r.object)):e}function A(e,t){let i=T(e),s=T(t).map(a=>{let m=i.map(l=>W(l,a)),r=Math.max(...m),c=m[0];return r===c?r*b.FIRST_SIMILARITY:S(r)});return y(s)}function W(e,t){let i=p(e,t);return e.includes(t)?i*b.CONTAINS_MATCH:i}export{O as picoSearch};
//# sourceMappingURL=index.mjs.map